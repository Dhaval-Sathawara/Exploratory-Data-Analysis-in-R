<?xml version="1.0" encoding="utf-8" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <meta http-equiv="Content-Style-Type" content="text/css" />
  <meta name="generator" content="pandoc" />
  <title>Exploratory Data Analysis in R</title>
  <style type="text/css">code{white-space: pre;}</style>
  <style type="text/css">
a.sourceLine { display: inline-block; line-height: 1.25; }
a.sourceLine { pointer-events: none; color: inherit; text-decoration: inherit; }
a.sourceLine:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode { white-space: pre; position: relative; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
code.sourceCode { white-space: pre-wrap; }
a.sourceLine { text-indent: -1em; padding-left: 1em; }
}
pre.numberSource a.sourceLine
  { position: relative; left: -4em; }
pre.numberSource a.sourceLine::before
  { content: attr(title);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; pointer-events: all; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {  }
@media screen {
a.sourceLine::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
  </style>
  <style type="text/css">
body
{
margin: 0 0 0 0;
padding: 0 0 0 0;
width: 100%;
height: 100%;
color: black;
background-color: white;
font-family: "Gill Sans MT", "Gill Sans", GillSans, sans-serif;
font-size: 14pt;
}
div.toolbar {
position: fixed; z-index: 200;
top: auto; bottom: 0; left: 0; right: 0;
height: 1.2em; text-align: right;
padding-left: 1em;
padding-right: 1em; font-size: 60%;
color: DimGray;
background-color: rgb(240,240,240);
border-top: solid 1px rgb(180,180,180);
}
div.toolbar span.copyright {
color: DimGray;
margin-left: 0.5em;
}
div.initial_prompt {
position: absolute;
z-index: 1000;
bottom: 1.2em;
width: 100%;
background-color: rgb(200,200,200);
opacity: 0.35;
background-color: rgb(200,200,200, 0.35);
cursor: pointer;
}
div.initial_prompt p.help {
text-align: center;
}
div.initial_prompt p.close {
text-align: right;
font-style: italic;
}
div.slidy_toc {
position: absolute;
z-index: 300;
width: 60%;
max-width: 30em;
height: 30em;
overflow: auto;
top: auto;
right: auto;
left: 4em;
bottom: 4em;
padding: 1em;
background: rgb(240,240,240);
border-style: solid;
border-width: 2px;
font-size: 60%;
}
div.slidy_toc .toc_heading {
text-align: center;
width: 100%;
margin: 0;
margin-bottom: 1em;
border-bottom-style: solid;
border-bottom-color: rgb(180,180,180);
border-bottom-width: 1px;
}
div.slide {
z-index: 20;
margin: 0 0 0 0;
padding-top: 0;
padding-bottom: 0;
padding-left: 20px;
padding-right: 20px;
border-width: 0;
clear: both;
top: 0;
bottom: 0;
left: 0;
right: 0;
line-height: 120%;
background-color: transparent;
}
div.background {
display: none;
}
div.handout {
margin-left: 20px;
margin-right: 20px;
}
div.slide.titlepage {
text-align: center;
}
div.slide.titlepage h1 {
padding-top: 10%;
margin-right: 0;
}
div.slide h1 {
padding-left: 0;
padding-right: 20pt;
padding-top: 4pt;
padding-bottom: 4pt;
margin-top: 0;
margin-left: 0;
margin-right: 60pt;
margin-bottom: 0.5em;
display: block; font-size: 160%;
line-height: 1.2em;
background: transparent;
}
@media screen and (max-device-width: 1024px)
{
div.slide { font-size: 100%; }
}
@media screen and (max-device-width: 800px)
{
div.slide { font-size: 200%; }
div.slidy_toc {
top: 1em;
left: 1em;
right: auto;
width: 80%;
font-size: 180%;
}
}
div.toc-heading {
width: 100%;
border-bottom: solid 1px rgb(180,180,180);
margin-bottom: 1em;
text-align: center;
}
img {
image-rendering: optimize-quality;
}
pre {
font-size: 80%;
font-weight: bold;
line-height: 120%;
padding-top: 0.2em;
padding-bottom: 0.2em;
padding-left: 1em;
padding-right: 1em;
border-style: solid;
border-left-width: 1em;
border-top-width: thin;
border-right-width: thin;
border-bottom-width: thin;
border-color: #95ABD0;
color: #00428C;
background-color: #E4E5E7;
}
li pre { margin-left: 0; }
blockquote { font-style: italic }
img { background-color: transparent }
p.copyright { font-size: smaller }
.center { text-align: center }
.footnote { font-size: smaller; margin-left: 2em; }
a img { border-width: 0; border-style: none }
a:visited { color: navy }
a:link { color: navy }
a:hover { color: red; text-decoration: underline }
a:active { color: red; text-decoration: underline }
a {text-decoration: none}
.toolbar a:link {color: blue}
.toolbar a:visited {color: blue}
.toolbar a:active {color: red}
.toolbar a:hover {color: red}
ul { list-style-type: square; }
ul ul { list-style-type: disc; }
ul ul ul { list-style-type: circle; }
ul ul ul ul { list-style-type: disc; }
li { margin-left: 0.5em; margin-top: 0.5em; }
li li { font-size: 85%; font-style: italic }
li li li { font-size: 85%; font-style: normal }
div dt
{
margin-left: 0;
margin-top: 1em;
margin-bottom: 0.5em;
font-weight: bold;
}
div dd
{
margin-left: 2em;
margin-bottom: 0.5em;
}
p,pre,ul,ol,blockquote,h2,h3,h4,h5,h6,dl,table {
margin-left: 1em;
margin-right: 1em;
}
p.subhead { font-weight: bold; margin-top: 2em; }
.smaller { font-size: smaller }
.bigger { font-size: 130% }
td,th { padding: 0.2em }
ul {
margin: 0.5em 1.5em 0.5em 1.5em;
padding: 0;
}
ol {
margin: 0.5em 1.5em 0.5em 1.5em;
padding: 0;
}
ul { list-style-type: square; }
ul ul { list-style-type: disc; }
ul ul ul { list-style-type: circle; }
ul ul ul ul { list-style-type: disc; }
ul li { list-style: square;
margin: 0.1em 0em 0.6em 0;
padding: 0 0 0 0;
line-height: 140%;
}
ol li { margin: 0.1em 0em 0.6em 1.5em;
padding: 0 0 0 0px;
line-height: 140%;
list-style-type: decimal;
}
li ul li { font-size: 85%; font-style: italic;
list-style-type: disc;
background: transparent;
padding: 0 0 0 0;
}
li li ul li { font-size: 85%; font-style: normal;
list-style-type: circle;
background: transparent;
padding: 0 0 0 0;
}
li li li ul li {
list-style-type: disc;
background: transparent;
padding: 0 0 0 0;
}
li ol li {
list-style-type: decimal;
}
li li ol li {
list-style-type: decimal;
}

ol.outline li:hover { cursor: pointer }
ol.outline li.nofold:hover { cursor: default }
ul.outline li:hover { cursor: pointer }
ul.outline li.nofold:hover { cursor: default }
ol.outline { list-style:decimal; }
ol.outline ol { list-style-type:lower-alpha }
ol.outline li.nofold {
padding: 0 0 0 20px;
background: transparent url(data:image/gif;base64,R0lGODdhCQAJAIACAMzMzOvr/ywAAAAACQAJAAACD4SPoRvG614Dctb4MEMcFAA7) no-repeat 0px 0.5em;
}
ol.outline li.unfolded {
padding: 0 0 0 20px;
background: transparent url(data:image/gif;base64,R0lGODdhCQAJAKEDAMPD/8zMzOvr/////ywAAAAACQAJAAACEYyPoivG614LAlg7ZZbxoR8UADs=) no-repeat 0px 0.5em;
}
ol.outline li.folded {
padding: 0 0 0 20px;
background: transparent url(data:image/gif;base64,R0lGODdhCQAJAKEDAMPD/8zMzOvr/////ywAAAAACQAJAAACFIyPoiu2sJyCyoF7W3hxz850CFIAADs=) no-repeat 0px 0.5em;
}
ol.outline li.unfolded:hover {
padding: 0 0 0 20px;
background: transparent url(data:image/gif;base64,R0lGODdhCQAJAKEDAAAAAAAA/8PD/////ywAAAAACQAJAAACEYSPoivG614DIlg7ZZbxoQ8UADs=) no-repeat 0px 0.5em;
}
ol.outline li.folded:hover {
padding: 0 0 0 20px;
background: transparent url(data:image/gif;base64,R0lGODdhCQAJAKEDAAAAAAAA/8PD/////ywAAAAACQAJAAACFISPoiu2sZyCyoV7G3hxz850CFIAADs=) no-repeat 0px 0.5em;
}
ul.outline li.nofold {
padding: 0 0 0 20px;
background: transparent url(data:image/gif;base64,R0lGODdhCQAJAIACAMzMzOvr/ywAAAAACQAJAAACD4SPoRvG614Dctb4MEMcFAA7) no-repeat 0px 0.5em;
}
ul.outline li.unfolded {
padding: 0 0 0 20px;
background: transparent url(data:image/gif;base64,R0lGODdhCQAJAKEDAMPD/8zMzOvr/////ywAAAAACQAJAAACEYyPoivG614LAlg7ZZbxoR8UADs=) no-repeat 0px 0.5em;
}
ul.outline li.folded {
padding: 0 0 0 20px;
background: transparent url(data:image/gif;base64,R0lGODdhCQAJAKEDAMPD/8zMzOvr/////ywAAAAACQAJAAACFIyPoiu2sJyCyoF7W3hxz850CFIAADs=) no-repeat 0px 0.5em;
}
ul.outline li.unfolded:hover {
padding: 0 0 0 20px;
background: transparent url(data:image/gif;base64,R0lGODdhCQAJAKEDAAAAAAAA/8PD/////ywAAAAACQAJAAACEYSPoivG614DIlg7ZZbxoQ8UADs=) no-repeat 0px 0.5em;
}
ul.outline li.folded:hover {
padding: 0 0 0 20px;
background: transparent url(data:image/gif;base64,R0lGODdhCQAJAKEDAAAAAAAA/8PD/////ywAAAAACQAJAAACFISPoiu2sZyCyoV7G3hxz850CFIAADs=) no-repeat 0px 0.5em;
}

a.titleslide { font-weight: bold; font-style: italic }

img.hidden { display: none; visibility: hidden }
div.initial_prompt { display: none; visibility: hidden }
div.slide {
visibility: visible;
position: inherit;
}
div.handout {
border-top-style: solid;
border-top-width: thin;
border-top-color: black;
}
@media screen {
.hidden { display: none; visibility: visible }
div.slide.hidden { display: block; visibility: visible }
div.handout.hidden { display: block; visibility: visible }
div.background { display: none; visibility: hidden }
body.single_slide div.initial_prompt { display: block; visibility: visible }
body.single_slide div.background { display: block; visibility: visible }
body.single_slide div.background.hidden { display: none; visibility: hidden }
body.single_slide .invisible { visibility: hidden }
body.single_slide .hidden { display: none; visibility: hidden }
body.single_slide div.slide { position: absolute }
body.single_slide div.handout { display: none; visibility: hidden }
}
@media print {
.hidden { display: block; visibility: visible }
div.slide pre { font-size: 60%; padding-left: 0.5em; }
div.toolbar { display: none; visibility: hidden; }
div.slidy_toc { display: none; visibility: hidden; }
div.background { display: none; visibility: hidden; }
div.slide { page-break-before: always }

div.slide.first-slide { page-break-before: avoid }
}


.jslider table {
margin-left: 0em;
margin-right: 0em;
}

table.dataTable, .shiny-datatable-output div {
font-size: 14pt;
}

.dataTables_info, .dataTables_paginate {
font-size: 19px;
}

pre.sourceCode, code.sourceCode {
font-size: 80%;
}

label, button, input, select, textarea {
font-size: 14pt;
}

ul.nav, ul.nav li {
list-style-type: none;
}
</style>
  <script src="data:application/javascript;base64,Lyogc2xpZHkuanMKCiAgIENvcHlyaWdodCAoYykgMjAwNS0yMDEzIFczQyAoTUlULCBFUkNJTSwgS2VpbyksIEFsbCBSaWdodHMgUmVzZXJ2ZWQuCiAgIFczQyBsaWFiaWxpdHksIHRyYWRlbWFyaywgZG9jdW1lbnQgdXNlIGFuZCBzb2Z0d2FyZSBsaWNlbnNpbmcKICAgcnVsZXMgYXBwbHksIHNlZToKCiAgIGh0dHA6Ly93d3cudzMub3JnL0NvbnNvcnRpdW0vTGVnYWwvY29weXJpZ2h0LWRvY3VtZW50cwogICBodHRwOi8vd3d3LnczLm9yZy9Db25zb3J0aXVtL0xlZ2FsL2NvcHlyaWdodC1zb2Z0d2FyZQoKICAgRGVmaW5lcyBzaW5nbGUgbmFtZSAidzNjX3NsaWR5IiBpbiBnbG9iYWwgbmFtZXNwYWNlCiAgIEFkZHMgZXZlbnQgaGFuZGxlcnMgd2l0aG91dCB0cmFtcGxpbmcgb24gYW55IG90aGVycwoqLwoKLy8gdGhlIHNsaWR5IG9iamVjdCBpbXBsZW1lbnRhdGlvbgp2YXIgdzNjX3NsaWR5ID0gewogIC8vIGNsYXNzaWZ5IHdoaWNoIGtpbmQgb2YgYnJvd3NlciB3ZSdyZSBydW5uaW5nIHVuZGVyCiAgbnNfcG9zOiAodHlwZW9mIHdpbmRvdy5wYWdlWU9mZnNldCE9J3VuZGVmaW5lZCcpLAogIGtodG1sOiAoKG5hdmlnYXRvci51c2VyQWdlbnQpLmluZGV4T2YoIktIVE1MIikgPj0gMCA/IHRydWUgOiBmYWxzZSksCiAgb3BlcmE6ICgobmF2aWdhdG9yLnVzZXJBZ2VudCkuaW5kZXhPZigiT3BlcmEiKSA+PSAwID8gdHJ1ZSA6IGZhbHNlKSwKICBpcGFkOiAoKG5hdmlnYXRvci51c2VyQWdlbnQpLmluZGV4T2YoImlQYWQiKSA+PSAwID8gdHJ1ZSA6IGZhbHNlKSwKICBpcGhvbmU6ICgobmF2aWdhdG9yLnVzZXJBZ2VudCkuaW5kZXhPZigiaVBob25lIikgPj0gMCA/IHRydWUgOiBmYWxzZSksCiAgYW5kcm9pZDogKChuYXZpZ2F0b3IudXNlckFnZW50KS5pbmRleE9mKCJBbmRyb2lkIikgPj0gMCA/IHRydWUgOiBmYWxzZSksCiAgaWU6ICh0eXBlb2YgZG9jdW1lbnQuYWxsICE9ICJ1bmRlZmluZWQiICYmICF0aGlzLm9wZXJhKSwKICBpZTY6ICghdGhpcy5uc19wb3MgJiYgbmF2aWdhdG9yLnVzZXJBZ2VudC5pbmRleE9mKCJNU0lFIDYiKSAhPSAtMSksCiAgaWU3OiAoIXRoaXMubnNfcG9zICYmIG5hdmlnYXRvci51c2VyQWdlbnQuaW5kZXhPZigiTVNJRSA3IikgIT0gLTEpLAogIGllODogKCF0aGlzLm5zX3BvcyAmJiBuYXZpZ2F0b3IudXNlckFnZW50LmluZGV4T2YoIk1TSUUgOCIpICE9IC0xKSwKICBpZTk6ICghdGhpcy5uc19wb3MgJiYgbmF2aWdhdG9yLnVzZXJBZ2VudC5pbmRleE9mKCJNU0lFIDkiKSAhPSAtMSksCgogIC8vIGRhdGEgZm9yIHN3aXBlIGFuZCBkb3VibGUgdGFwIGRldGVjdGlvbiBvbiB0b3VjaCBzY3JlZW5zCiAgbGFzdF90YXA6IDAsCiAgcHJldl90YXA6IDAsCiAgc3RhcnRfeDogMCwKICBzdGFydF95OiAwLAogIGRlbHRhX3g6IDAsCiAgZGVsdGFfeTogMCwKCiAgLy8gYXJlIHdlIHJ1bm5pbmcgYXMgWEhUTUw/IChkb2Vzbid0IHdvcmsgb24gT3BlcmEpCiAgaXNfeGh0bWw6IC94bWwvLnRlc3QoZG9jdW1lbnQuY29udGVudFR5cGUpLAoKICBzbGlkZV9udW1iZXI6IDAsIC8vIGludGVnZXIgc2xpZGUgY291bnQ6IDAsIDEsIDIsIC4uLgogIHNsaWRlX251bWJlcl9lbGVtZW50OiBudWxsLCAvLyBlbGVtZW50IGNvbnRhaW5pbmcgc2xpZGUgbnVtYmVyCiAgc2xpZGVzOiBbXSwgLy8gc2V0IHRvIGFycmF5IG9mIHNsaWRlIGRpdidzCiAgbm90ZXM6IFtdLCAvLyBzZXQgdG8gYXJyYXkgb2YgaGFuZG91dCBkaXYncwogIGJhY2tncm91bmRzOiBbXSwgLy8gc2V0IHRvIGFycmF5IG9mIGJhY2tncm91bmQgZGl2J3MKICBvYnNlcnZlcnM6IFtdLCAvLyBsaXN0IG9mIG9ic2VydmVyIGZ1bmN0aW9ucwogIHRvb2xiYXI6IG51bGwsIC8vIGVsZW1lbnQgY29udGFpbmluZyB0b29sYmFyCiAgdGl0bGU6IG51bGwsIC8vIGRvY3VtZW50IHRpdGxlCiAgbGFzdF9zaG93bjogbnVsbCwgLy8gbGFzdCBpbmNyZW1lbnRhbGx5IHNob3duIGl0ZW0KICBlb3M6IG51bGwsICAvLyBzcGFuIGVsZW1lbnQgZm9yIGVuZCBvZiBzbGlkZSBpbmRpY2F0b3IKICB0b2M6IG51bGwsIC8vIHRhYmxlIG9mIGNvbnRlbnRzCiAgb3V0bGluZTogbnVsbCwgLy8gb3V0bGluZSBlbGVtZW50IHdpdGggdGhlIGZvY3VzCiAgc2VsZWN0ZWRfdGV4dF9sZW46IDAsIC8vIGxlbmd0aCBvZiBkcmFnIHNlbGVjdGlvbiBvbiBkb2N1bWVudAogIHZpZXdfYWxsOiAwLCAgLy8gMSB0byB2aWV3IGFsbCBzbGlkZXMgKyBoYW5kb3V0cwogIHdhbnRfdG9vbGJhcjogdHJ1ZSwgIC8vIHVzZXIgcHJlZmVyZW5jZSB0byBzaG93L2hpZGUgdG9vbGJhcgogIG1vdXNlX2NsaWNrX2VuYWJsZWQ6IHRydWUsIC8vIGVuYWJsZXMgbGVmdCBjbGljayBmb3IgbmV4dCBzbGlkZQogIHNjcm9sbF9oYWNrOiAwLCAvLyBJRSB3b3JrIGFyb3VuZCBmb3IgcG9zaXRpb246IGZpeGVkCiAgZGlzYWJsZV9zbGlkZV9jbGljazogZmFsc2UsICAvLyB1c2VkIGJ5IGNsaWNrZWQgYW5jaG9ycwoKICBsYW5nOiAiZW4iLCAvLyB1cGRhdGVkIHRvIGxhbmd1YWdlIHNwZWNpZmllZCBieSBodG1sIGZpbGUKCiAgaGVscF9hbmNob3I6IG51bGwsIC8vIHVzZWQgZm9yIGtleWJvYXJkIGZvY3VzIGhhY2sgaW4gc2hvd1Rvb2xiYXIoKQogIGhlbHBfcGFnZTogImh0dHA6Ly93d3cudzMub3JnL1RhbGtzL1Rvb2xzL1NsaWR5Mi9oZWxwL2hlbHAuaHRtbCIsCiAgaGVscF90ZXh0OiAiTmF2aWdhdGUgd2l0aCBtb3VzZSBjbGljaywgc3BhY2UgYmFyLCBDdXJzb3IgTGVmdC9SaWdodCwgIiArCiAgICAgICAgICAgICAib3IgUGcgVXAgYW5kIFBnIERuLiBVc2UgUyBhbmQgQiB0byBjaGFuZ2UgZm9udCBzaXplLiIsCgogIHNpemVfaW5kZXg6IDAsCiAgc2l6ZV9hZGp1c3RtZW50OiAwLAogIHNpemVzOiAgbmV3IEFycmF5KCIxMHB0IiwgIjEycHQiLCAiMTRwdCIsICIxNnB0IiwgIjE4cHQiLCAiMjBwdCIsCiAgICAgICAgICAgICAgICAgICAgIjIycHQiLCAiMjRwdCIsICIyNnB0IiwgIjI4cHQiLCAiMzBwdCIsICIzMnB0IiksCgogIC8vIG5lZWRlZCBmb3IgZWZmaWNpZW50IHJlc2l6aW5nCiAgbGFzdF93aWR0aDogMCwKICBsYXN0X2hlaWdodDogMCwKCgogIC8vIE5lZWRlZCBmb3IgY3Jvc3MgYnJvd3NlciBzdXBwb3J0IGZvciByZWxhdGl2ZSB3aWR0aC9oZWlnaHQgb24KICAvLyBvYmplY3QgZWxlbWVudHMuIFRoZSB3b3JrIGFyb3VuZCBpcyB0byBzYXZlIHdpZHRoL2hlaWdodCBhdHRyaWJ1dGVzCiAgLy8gYW5kIHRoZW4gdG8gcmVjb21wdXRlIGFic29sdXRlIHdpZHRoL2hlaWdodCBkaW1lbnNpb25zIG9uIHJlc2l6aW5nCiAgIG9iamVjdHM6IFtdLAoKICAvLyBhdHRhY2ggaW5pdGlhbGlhdGlvbiBldmVudCBoYW5kbGVycwogIHNldF91cDogZnVuY3Rpb24gKCkgewogICAgdmFyIGluaXQgPSBmdW5jdGlvbigpIHsgdzNjX3NsaWR5LmluaXQoKTsgfTsKICAgIGlmICh0eXBlb2Ygd2luZG93LmFkZEV2ZW50TGlzdGVuZXIgIT0gInVuZGVmaW5lZCIpCiAgICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCJsb2FkIiwgaW5pdCwgZmFsc2UpOwogICAgZWxzZQogICAgICB3aW5kb3cuYXR0YWNoRXZlbnQoIm9ubG9hZCIsIGluaXQpOwogIH0sCgogIGhpZGVfc2xpZGVzOiBmdW5jdGlvbiAoKSB7CiAgICBpZiAoZG9jdW1lbnQuYm9keSAmJiAhdzNjX3NsaWR5LmluaXRpYWxpemVkKQogICAgICBkb2N1bWVudC5ib2R5LnN0eWxlLnZpc2liaWxpdHkgPSAiaGlkZGVuIjsKICAgIGVsc2UKICAgICAgc2V0VGltZW91dCh3M2Nfc2xpZHkuaGlkZV9zbGlkZXMsIDUwKTsKICB9LAoKICAvLyBoYWNrIHRvIHBlcnN1YWRlIElFIHRvIGNvbXB1dGUgY29ycmVjdCBkb2N1bWVudCBoZWlnaHQKICAvLyBhcyBuZWVkZWQgZm9yIHNpbXVsYXRpbmcgZml4ZWQgcG9zaXRpb25pbmcgb2YgdG9vbGJhcgogIGllX2hhY2s6IGZ1bmN0aW9uICgpIHsKICAgIHdpbmRvdy5yZXNpemVCeSgwLC0xKTsKICAgIHdpbmRvdy5yZXNpemVCeSgwLCAxKTsKICB9LAoKICBpbml0OiBmdW5jdGlvbiAoKSB7CiAgICAvL2FsZXJ0KCJzbGlkeSBzdGFydGluZyB0ZXN0IDEwIik7CiAgICBkb2N1bWVudC5ib2R5LnN0eWxlLnZpc2liaWxpdHkgPSAidmlzaWJsZSI7CiAgICB0aGlzLmluaXRfbG9jYWxpemF0aW9uKCk7CiAgICB0aGlzLmFkZF90b29sYmFyKCk7CiAgICB0aGlzLndyYXBfaW1wbGljaXRfc2xpZGVzKCk7CiAgICB0aGlzLmNvbGxlY3Rfc2xpZGVzKCk7CiAgICB0aGlzLmNvbGxlY3Rfbm90ZXMoKTsKICAgIHRoaXMuY29sbGVjdF9iYWNrZ3JvdW5kcygpOwogICAgdGhpcy5vYmplY3RzID0gZG9jdW1lbnQuYm9keS5nZXRFbGVtZW50c0J5VGFnTmFtZSgib2JqZWN0Iik7CiAgICB0aGlzLnBhdGNoX2FuY2hvcnMoKTsKICAgIHRoaXMuc2xpZGVfbnVtYmVyID0gdGhpcy5maW5kX3NsaWRlX251bWJlcihsb2NhdGlvbi5ocmVmKTsKICAgIHdpbmRvdy5vZmZzY3JlZW5idWZmZXJpbmcgPSB0cnVlOwogICAgdGhpcy5zaXplX2FkanVzdG1lbnQgPSB0aGlzLmZpbmRfc2l6ZV9hZGp1c3QoKTsKICAgIHRoaXMudGltZV9sZWZ0ID0gdGhpcy5maW5kX2R1cmF0aW9uKCk7CiAgICB0aGlzLmhpZGVfaW1hZ2VfdG9vbGJhcigpOyAgLy8gc3VwcHJlc3MgSUUgaW1hZ2UgdG9vbGJhciBwb3B1cAogICAgdGhpcy5pbml0X291dGxpbmVyKCk7ICAvLyBhY3RpdmF0ZSBmb2xkL3VuZm9sZCBzdXBwb3J0CiAgICB0aGlzLnRpdGxlID0gZG9jdW1lbnQudGl0bGU7CiAgICB0aGlzLmtleWJvYXJkbGVzcyA9ICh0aGlzLmlwYWR8fHRoaXMuaXBob25lfHx0aGlzLmFuZHJvaWQpOwoKICAgIGlmICh0aGlzLmtleWJvYXJkbGVzcykKICAgIHsKICAgICAgdzNjX3NsaWR5LnJlbW92ZV9jbGFzcyh3M2Nfc2xpZHkudG9vbGJhciwgImhpZGRlbiIpCiAgICAgIHRoaXMud2FudF90b29sYmFyID0gMDsKICAgIH0KCiAgICAvLyB3b3JrIGFyb3VuZCBmb3Igb3BlcmEgYnVnCiAgICB0aGlzLmlzX3hodG1sID0gKGRvY3VtZW50LmJvZHkudGFnTmFtZSA9PSAiQk9EWSIgPyBmYWxzZSA6IHRydWUpOwoKICAgIGlmICh0aGlzLnNsaWRlcy5sZW5ndGggPiAwKQogICAgewogICAgICB2YXIgc2xpZGUgPSB0aGlzLnNsaWRlc1t0aGlzLnNsaWRlX251bWJlcl07CiAgIAogICAgICBpZiAodGhpcy5zbGlkZV9udW1iZXIgPiAwKQogICAgICB7CiAgICAgICAgdGhpcy5zZXRfdmlzaWJpbGl0eV9hbGxfaW5jcmVtZW50YWwoInZpc2libGUiKTsKICAgICAgICB0aGlzLmxhc3Rfc2hvd24gPSB0aGlzLnByZXZpb3VzX2luY3JlbWVudGFsX2l0ZW0obnVsbCk7CiAgICAgICAgdGhpcy5zZXRfZW9zX3N0YXR1cyh0cnVlKTsKICAgICAgfQogICAgICBlbHNlCiAgICAgIHsKICAgICAgICB0aGlzLmxhc3Rfc2hvd24gPSBudWxsOwogICAgICAgIHRoaXMuc2V0X3Zpc2liaWxpdHlfYWxsX2luY3JlbWVudGFsKCJoaWRkZW4iKTsKICAgICAgICB0aGlzLnNldF9lb3Nfc3RhdHVzKCF0aGlzLm5leHRfaW5jcmVtZW50YWxfaXRlbSh0aGlzLmxhc3Rfc2hvd24pKTsKICAgICAgfQoKICAgICAgdGhpcy5zZXRfbG9jYXRpb24oKTsKICAgICAgdGhpcy5hZGRfY2xhc3ModGhpcy5zbGlkZXNbMF0sICJmaXJzdC1zbGlkZSIpOwogICAgICB3M2Nfc2xpZHkuc2hvd19zbGlkZShzbGlkZSk7CiAgICB9CgogICAgdGhpcy50b2MgPSB0aGlzLnRhYmxlX29mX2NvbnRlbnRzKCk7CgogICAgdGhpcy5hZGRfaW5pdGlhbF9wcm9tcHQoKTsKCiAgICAvLyBiaW5kIGV2ZW50IGhhbmRsZXJzIHdpdGhvdXQgaW50ZXJmZXJpbmcgd2l0aCBjdXN0b20gcGFnZSBzY3JpcHRzCiAgICAvLyBUYXAgZXZlbnRzIGJlaGF2ZSB0b28gd2VpcmRseSB0byBzdXBwb3J0IGNsaWNrcyByZWxpYWJseSBvbgogICAgLy8gaVBob25lIGFuZCBpUGFkLCBzbyBleGNsdWRlIHRoZXNlIGZyb20gY2xpY2sgaGFuZGxlcgoKICAgIGlmICghdGhpcy5rZXlib2FyZGxlc3MpCiAgICB7CiAgICAgIHRoaXMuYWRkX2xpc3RlbmVyKGRvY3VtZW50LmJvZHksICJjbGljayIsIHRoaXMubW91c2VfYnV0dG9uX2NsaWNrKTsKICAgICAgdGhpcy5hZGRfbGlzdGVuZXIoZG9jdW1lbnQuYm9keSwgIm1vdXNlZG93biIsIHRoaXMubW91c2VfYnV0dG9uX2Rvd24pOwogICAgfQoKICAgIHRoaXMuYWRkX2xpc3RlbmVyKGRvY3VtZW50LCAia2V5ZG93biIsIHRoaXMua2V5X2Rvd24pOwogICAgdGhpcy5hZGRfbGlzdGVuZXIoZG9jdW1lbnQsICJrZXlwcmVzcyIsIHRoaXMua2V5X3ByZXNzKTsKICAgIHRoaXMuYWRkX2xpc3RlbmVyKHdpbmRvdywgInJlc2l6ZSIsIHRoaXMucmVzaXplZCk7CiAgICB0aGlzLmFkZF9saXN0ZW5lcih3aW5kb3csICJzY3JvbGwiLCB0aGlzLnNjcm9sbGVkKTsKICAgIHRoaXMuYWRkX2xpc3RlbmVyKHdpbmRvdywgInVubG9hZCIsIHRoaXMudW5sb2FkZWQpOwoKICAgIHRoaXMuYWRkX2xpc3RlbmVyKGRvY3VtZW50LCAiZ2VzdHVyZWNoYW5nZSIsIGZ1bmN0aW9uICgpCiAgICB7CiAgICAgIHJldHVybiBmYWxzZTsKICAgIH0pOwoKICAgIHRoaXMuYXR0YWNoX3RvdWNoX2hhbmRlcnModGhpcy5zbGlkZXMpOwoKICAgIC8vIHRoaXMgc2VlbXMgdG8gYmUgYSBkZWJ1Z2dpbmcgaGFjawogICAgLy9pZiAoIWRvY3VtZW50LmJvZHkub25jbGljaykKICAgIC8vICBkb2N1bWVudC5ib2R5Lm9uY2xpY2sgPSBmdW5jdGlvbiAoKSB7IH07CgogICAgdGhpcy5zaW5nbGVfc2xpZGVfdmlldygpOwoKICAgIC8vdGhpcy5zZXRfbG9jYXRpb24oKTsKCiAgICB0aGlzLnJlc2l6ZWQoKTsKCiAgICBpZiAodGhpcy5pZTcpCiAgICAgIHNldFRpbWVvdXQodzNjX3NsaWR5LmllX2hhY2ssIDEwMCk7CgogICAgdGhpcy5zaG93X3Rvb2xiYXIoKTsKCiAgICAvLyBmb3IgYmFjayBidXR0b24gZGV0ZWN0aW9uCiAgICBzZXRJbnRlcnZhbChmdW5jdGlvbiAoKSB7IHczY19zbGlkeS5jaGVja19sb2NhdGlvbigpOyB9LCAyMDApOwogICAgdzNjX3NsaWR5LmluaXRpYWxpemVkID0gdHJ1ZTsKICB9LAoKICAvLyBjcmVhdGUgZGl2IGVsZW1lbnQgd2l0aCBsaW5rcyB0byBlYWNoIHNsaWRlCiAgdGFibGVfb2ZfY29udGVudHM6IGZ1bmN0aW9uICgpIHsKICAgIHZhciB0b2MgPSB0aGlzLmNyZWF0ZV9lbGVtZW50KCJkaXYiKTsKICAgIHRoaXMuYWRkX2NsYXNzKHRvYywgInNsaWR5X3RvYyBoaWRkZW4iKTsKICAgIC8vdG9jLnNldEF0dHJpYnV0ZSgidGFiaW5kZXgiLCAiMCIpOwoKICAgIHZhciBoZWFkaW5nID0gdGhpcy5jcmVhdGVfZWxlbWVudCgiZGl2Iik7CiAgICB0aGlzLmFkZF9jbGFzcyhoZWFkaW5nLCAidG9jLWhlYWRpbmciKTsKICAgIGhlYWRpbmcuaW5uZXJIVE1MID0gdGhpcy5sb2NhbGl6ZSgiVGFibGUgb2YgQ29udGVudHMiKTsKCiAgICB0b2MuYXBwZW5kQ2hpbGQoaGVhZGluZyk7CiAgICB2YXIgcHJldmlvdXMgPSBudWxsOwoKICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdGhpcy5zbGlkZXMubGVuZ3RoOyArK2kpCiAgICB7CiAgICAgIHZhciB0aXRsZSA9IHRoaXMuaGFzX2NsYXNzKHRoaXMuc2xpZGVzW2ldLCAidGl0bGUiKTsKICAgICAgdmFyIG51bSA9IGRvY3VtZW50LmNyZWF0ZVRleHROb2RlKChpICsgMSkgKyAiLiAiKTsKCiAgICAgIHRvYy5hcHBlbmRDaGlsZChudW0pOwoKICAgICAgdmFyIGEgPSB0aGlzLmNyZWF0ZV9lbGVtZW50KCJhIik7CiAgICAgIGEuc2V0QXR0cmlidXRlKCJocmVmIiwgIiMoIiArIChpKzEpICsgIikiKTsKCiAgICAgIGlmICh0aXRsZSkKICAgICAgICB0aGlzLmFkZF9jbGFzcyhhLCAidGl0bGVzbGlkZSIpOwoKICAgICAgdmFyIG5hbWUgPSBkb2N1bWVudC5jcmVhdGVUZXh0Tm9kZSh0aGlzLnNsaWRlX25hbWUoaSkpOwogICAgICBhLmFwcGVuZENoaWxkKG5hbWUpOwogICAgICBhLm9uY2xpY2sgPSB3M2Nfc2xpZHkudG9jX2NsaWNrOwogICAgICBhLm9ua2V5ZG93biA9IHczY19zbGlkeS50b2Nfa2V5X2Rvd247CiAgICAgIGEucHJldmlvdXMgPSBwcmV2aW91czsKCiAgICAgIGlmIChwcmV2aW91cykKICAgICAgICBwcmV2aW91cy5uZXh0ID0gYTsKCiAgICAgIHRvYy5hcHBlbmRDaGlsZChhKTsKCiAgICAgIGlmIChpID09IDApCiAgICAgICAgdG9jLmZpcnN0ID0gYTsKCiAgICAgIGlmIChpIDwgdGhpcy5zbGlkZXMubGVuZ3RoIC0gMSkKICAgICAgewogICAgICAgIHZhciBiciA9IHRoaXMuY3JlYXRlX2VsZW1lbnQoImJyIik7CiAgICAgICAgdG9jLmFwcGVuZENoaWxkKGJyKTsKICAgICAgfQoKICAgICAgcHJldmlvdXMgPSBhOwogICAgfQoKICAgIHRvYy5mb2N1cyA9IGZ1bmN0aW9uICgpIHsKICAgICAgaWYgKHRoaXMuZmlyc3QpCiAgICAgICAgdGhpcy5maXJzdC5mb2N1cygpOwogICAgfQoKICAgIHRvYy5vbm1vdXNldXAgPSB3M2Nfc2xpZHkubW91c2VfYnV0dG9uX3VwOwoKICAgIHRvYy5vbmNsaWNrID0gZnVuY3Rpb24gKGUpIHsKICAgICAgZXx8KGU9d2luZG93LmV2ZW50KTsKCiAgICAgIGlmICh3M2Nfc2xpZHkuc2VsZWN0ZWRfdGV4dF9sZW4gPD0gMCkKICAgICAgICAgdzNjX3NsaWR5LmhpZGVfdGFibGVfb2ZfY29udGVudHModHJ1ZSk7CgogICAgICB3M2Nfc2xpZHkuc3RvcF9wcm9wYWdhdGlvbihlKTsKICAgIAogICAgICBpZiAoZS5jYW5jZWwgIT0gdW5kZWZpbmVkKQogICAgICAgIGUuY2FuY2VsID0gdHJ1ZTsKICAgICAgCiAgICAgIGlmIChlLnJldHVyblZhbHVlICE9IHVuZGVmaW5lZCkKICAgICAgICBlLnJldHVyblZhbHVlID0gZmFsc2U7CiAgICAgIAogICAgICByZXR1cm4gZmFsc2U7CiAgICB9OwoKICAgIGRvY3VtZW50LmJvZHkuaW5zZXJ0QmVmb3JlKHRvYywgZG9jdW1lbnQuYm9keS5maXJzdENoaWxkKTsKICAgIHJldHVybiB0b2M7CiAgfSwKCiAgaXNfc2hvd25fdG9jOiBmdW5jdGlvbiAoKSB7CiAgICByZXR1cm4gIXczY19zbGlkeS5oYXNfY2xhc3ModzNjX3NsaWR5LnRvYywgImhpZGRlbiIpOwogIH0sCgogIHNob3dfdGFibGVfb2ZfY29udGVudHM6IGZ1bmN0aW9uICgpIHsKICAgIHczY19zbGlkeS5yZW1vdmVfY2xhc3ModzNjX3NsaWR5LnRvYywgImhpZGRlbiIpOwogICAgdmFyIHRvYyA9IHczY19zbGlkeS50b2M7CiAgICB0b2MuZm9jdXMoKTsKCiAgICBpZiAodzNjX3NsaWR5LmllNyAmJiB3M2Nfc2xpZHkuc2xpZGVfbnVtYmVyID09IDApCiAgICAgIHNldFRpbWVvdXQodzNjX3NsaWR5LmllX2hhY2ssIDEwMCk7CiAgfSwKCiAgaGlkZV90YWJsZV9vZl9jb250ZW50czogZnVuY3Rpb24gKGZvY3VzKSB7CiAgICB3M2Nfc2xpZHkuYWRkX2NsYXNzKHczY19zbGlkeS50b2MsICJoaWRkZW4iKTsKCiAgICBpZiAoZm9jdXMgJiYgIXczY19zbGlkeS5vcGVyYSAmJgogICAgICAgICF3M2Nfc2xpZHkuaGFzX2NsYXNzKHczY19zbGlkeS50b2MsICJoaWRkZW4iKSkKICAgICAgdzNjX3NsaWR5LnNldF9mb2N1cygpOwogIH0sCgogIHRvZ2dsZV90YWJsZV9vZl9jb250ZW50czogZnVuY3Rpb24gKCkgewogICAgaWYgKHczY19zbGlkeS5pc19zaG93bl90b2MoKSkKICAgICAgdzNjX3NsaWR5LmhpZGVfdGFibGVfb2ZfY29udGVudHModHJ1ZSk7CiAgICBlbHNlCiAgICAgIHczY19zbGlkeS5zaG93X3RhYmxlX29mX2NvbnRlbnRzKCk7CiAgfSwKCiAgLy8gY2FsbGVkIG9uIGNsaWNraW5nIHRvYyBlbnRyeQogIHRvY19jbGljazogZnVuY3Rpb24gKGUpIHsKICAgIGlmICghZSkKICAgICAgZSA9IHdpbmRvdy5ldmVudDsKCiAgICB2YXIgdGFyZ2V0ID0gdzNjX3NsaWR5LmdldF90YXJnZXQoZSk7CgogICAgaWYgKHRhcmdldCAmJiB0YXJnZXQubm9kZVR5cGUgPT0gMSkKICAgIHsKICAgICAgdmFyIHVyaSA9IHRhcmdldC5nZXRBdHRyaWJ1dGUoImhyZWYiKTsKCiAgICAgIGlmICh1cmkpCiAgICAgIHsKICAgICAgICAvL2FsZXJ0KCJnb2luZyB0byAiICsgdXJpKTsKICAgICAgICB2YXIgc2xpZGUgPSB3M2Nfc2xpZHkuc2xpZGVzW3czY19zbGlkeS5zbGlkZV9udW1iZXJdOwogICAgICAgIHczY19zbGlkeS5oaWRlX3NsaWRlKHNsaWRlKTsKICAgICAgICB3M2Nfc2xpZHkuc2xpZGVfbnVtYmVyID0gdzNjX3NsaWR5LmZpbmRfc2xpZGVfbnVtYmVyKHVyaSk7CiAgICAgICAgc2xpZGUgPSB3M2Nfc2xpZHkuc2xpZGVzW3czY19zbGlkeS5zbGlkZV9udW1iZXJdOwogICAgICAgIHczY19zbGlkeS5sYXN0X3Nob3duID0gbnVsbDsKICAgICAgICB3M2Nfc2xpZHkuc2V0X2xvY2F0aW9uKCk7CiAgICAgICAgdzNjX3NsaWR5LnNldF92aXNpYmlsaXR5X2FsbF9pbmNyZW1lbnRhbCgiaGlkZGVuIik7CiAgICAgICAgdzNjX3NsaWR5LnNldF9lb3Nfc3RhdHVzKCF3M2Nfc2xpZHkubmV4dF9pbmNyZW1lbnRhbF9pdGVtKHczY19zbGlkeS5sYXN0X3Nob3duKSk7CiAgICAgICAgdzNjX3NsaWR5LnNob3dfc2xpZGUoc2xpZGUpOwogICAgICAgIC8vdGFyZ2V0LmZvY3VzKCk7CgogICAgICAgIHRyeQogICAgICAgIHsKICAgICAgICAgIGlmICghdzNjX3NsaWR5Lm9wZXJhKQogICAgICAgICAgICB3M2Nfc2xpZHkuc2V0X2ZvY3VzKCk7CiAgICAgICAgfQogICAgICAgIGNhdGNoIChlKQogICAgICAgIHsKICAgICAgICB9CiAgICAgIH0KICAgIH0KCiAgICB3M2Nfc2xpZHkuaGlkZV90YWJsZV9vZl9jb250ZW50cyh0cnVlKTsKICAgIGlmICh3M2Nfc2xpZHkuaWU3KSB3M2Nfc2xpZHkuaWVfaGFjaygpOwogICAgdzNjX3NsaWR5LnN0b3BfcHJvcGFnYXRpb24oZSk7CiAgICByZXR1cm4gdzNjX3NsaWR5LmNhbmNlbChlKTsKICB9LAoKICAvLyBjYWxsZWQgb25rZXlkb3duIGZvciB0b2MgZW50cnkKICB0b2Nfa2V5X2Rvd246IGZ1bmN0aW9uIChldmVudCkgewogICAgdmFyIGtleTsKCiAgICBpZiAoIWV2ZW50KQogICAgICB2YXIgZXZlbnQgPSB3aW5kb3cuZXZlbnQ7CgogICAgLy8ga2x1ZGdlIGFyb3VuZCBOUy9JRSBkaWZmZXJlbmNlcyAKICAgIGlmICh3aW5kb3cuZXZlbnQpCiAgICAgIGtleSA9IHdpbmRvdy5ldmVudC5rZXlDb2RlOwogICAgZWxzZSBpZiAoZXZlbnQud2hpY2gpCiAgICAgIGtleSA9IGV2ZW50LndoaWNoOwogICAgZWxzZQogICAgICByZXR1cm4gdHJ1ZTsgLy8gWWlrZXMhIHVua25vd24gYnJvd3NlcgoKICAgIC8vIGlnbm9yZSBldmVudCBpZiBrZXkgdmFsdWUgaXMgemVybwogICAgLy8gYXMgZm9yIGFsdCBvbiBPcGVyYSBhbmQgS29ucXVlcm9yCiAgICBpZiAoIWtleSkKICAgICAgcmV0dXJuIHRydWU7CgogICAgLy8gY2hlY2sgZm9yIGNvbmN1cnJlbnQgY29udHJvbC9jb21tYW5kL2FsdCBrZXkKICAgIC8vIGJ1dCBhcmUgdGhlc2Ugb25seSBwcmVzZW50IG9uIG1vdXNlIGV2ZW50cz8KCiAgICBpZiAoZXZlbnQuY3RybEtleSB8fCBldmVudC5hbHRLZXkpCiAgICAgIHJldHVybiB0cnVlOwoKICAgIGlmIChrZXkgPT0gMTMpCiAgICB7CiAgICAgIHZhciB1cmkgPSB0aGlzLmdldEF0dHJpYnV0ZSgiaHJlZiIpOwoKICAgICAgaWYgKHVyaSkKICAgICAgewogICAgICAgIC8vYWxlcnQoImdvaW5nIHRvICIgKyB1cmkpOwogICAgICAgdmFyIHNsaWRlID0gdzNjX3NsaWR5LnNsaWRlc1t3M2Nfc2xpZHkuc2xpZGVfbnVtYmVyXTsKICAgICAgICB3M2Nfc2xpZHkuaGlkZV9zbGlkZShzbGlkZSk7CiAgICAgICAgdzNjX3NsaWR5LnNsaWRlX251bWJlciA9IHczY19zbGlkeS5maW5kX3NsaWRlX251bWJlcih1cmkpOwogICAgICAgIHNsaWRlID0gdzNjX3NsaWR5LnNsaWRlc1t3M2Nfc2xpZHkuc2xpZGVfbnVtYmVyXTsKICAgICAgICB3M2Nfc2xpZHkubGFzdF9zaG93biA9IG51bGw7CiAgICAgICAgdzNjX3NsaWR5LnNldF9sb2NhdGlvbigpOwogICAgICAgIHczY19zbGlkeS5zZXRfdmlzaWJpbGl0eV9hbGxfaW5jcmVtZW50YWwoImhpZGRlbiIpOwogICAgICAgIHczY19zbGlkeS5zZXRfZW9zX3N0YXR1cyghdzNjX3NsaWR5Lm5leHRfaW5jcmVtZW50YWxfaXRlbSh3M2Nfc2xpZHkubGFzdF9zaG93bikpOwogICAgICAgIHczY19zbGlkeS5zaG93X3NsaWRlKHNsaWRlKTsKICAgICAgICAvL3RhcmdldC5mb2N1cygpOwoKICAgICAgICB0cnkKICAgICAgICB7CiAgICAgICAgICBpZiAoIXczY19zbGlkeS5vcGVyYSkKICAgICAgICAgICAgdzNjX3NsaWR5LnNldF9mb2N1cygpOwogICAgICAgIH0KICAgICAgICBjYXRjaCAoZSkKICAgICAgICB7CiAgICAgICAgfQogICAgICB9CgogICAgICB3M2Nfc2xpZHkuaGlkZV90YWJsZV9vZl9jb250ZW50cyh0cnVlKTsKCiAgICAgIGlmIChzZWxmLmllNykKICAgICAgIHczY19zbGlkeS5pZV9oYWNrKCk7CgogICAgICByZXR1cm4gdzNjX3NsaWR5LmNhbmNlbChldmVudCk7CiAgICB9CgogICAgaWYgKGtleSA9PSA0MCAmJiB0aGlzLm5leHQpCiAgICB7CiAgICAgIHRoaXMubmV4dC5mb2N1cygpOwogICAgICByZXR1cm4gdzNjX3NsaWR5LmNhbmNlbChldmVudCk7CiAgICB9CgogICAgaWYgKGtleSA9PSAzOCAmJiB0aGlzLnByZXZpb3VzKQogICAgewogICAgICB0aGlzLnByZXZpb3VzLmZvY3VzKCk7CiAgICAgIHJldHVybiB3M2Nfc2xpZHkuY2FuY2VsKGV2ZW50KTsKICAgIH0KCiAgICByZXR1cm4gdHJ1ZTsKICB9LAoKICB0b3VjaHN0YXJ0OiBmdW5jdGlvbiAoZSkKICB7CiAgICAvLyBhIGRvdWJsZSB0b3VjaCBvZnRlbiBzdGFydHMgd2l0aCBhCiAgICAvLyBzaW5nbGUgdG91Y2ggZHVlIHRvIGZpbmdlcnMgdG91Y2hpbmcKICAgIC8vIGRvd24gYXQgc2xpZ2h0bHkgZGlmZmVyZW50IHRpbWVzCiAgICAvLyB0aHVzIGF2b2lkIGNhbGxpbmcgcHJldmVudERlZmF1bHQgaGVyZQogICAgdGhpcy5wcmV2X3RhcCA9IHRoaXMubGFzdF90YXA7CiAgICB0aGlzLmxhc3RfdGFwID0gKG5ldyBEYXRlKS5nZXRUaW1lKCk7CgogICAgdmFyIHRhcF9kZWxheSA9IHRoaXMubGFzdF90YXAgLSB0aGlzLnByZXZfdGFwOwoKICAgIGlmICh0YXBfZGVsYXkgPD0gMjAwKQogICAgewogICAgICAvLyBkb3VibGUgdGFwCiAgICB9CgogICAgdmFyIHRvdWNoID0gZS50b3VjaGVzWzBdOwoKICAgIHRoaXMucGFnZVggPSB0b3VjaC5wYWdlWDsKICAgIHRoaXMucGFnZVkgPSB0b3VjaC5wYWdlWTsKICAgIHRoaXMuc2NyZWVuWCA9IHRvdWNoLnNjcmVlblg7CiAgICB0aGlzLnNjcmVlblkgPSB0b3VjaC5zY3JlZW5ZOwogICAgdGhpcy5jbGllbnRYID0gdG91Y2guY2xpZW50WDsKICAgIHRoaXMuY2xpZW50WSA9IHRvdWNoLmNsaWVudFk7CgogICAgdGhpcy5kZWx0YV94ID0gdGhpcy5kZWx0YV95ID0gMDsKICB9LAoKICB0b3VjaG1vdmU6IGZ1bmN0aW9uIChlKQogIHsKICAgIC8vIG92ZXJyaWRlIG5hdGl2ZSBnZXN0dXJlcyBmb3Igc2luZ2xlIHRvdWNoCiAgICBpZiAoZS50b3VjaGVzLmxlbmd0aCA+IDEpCiAgICAgIHJldHVybjsKCiAgICBlLnByZXZlbnREZWZhdWx0KCk7CiAgICB2YXIgdG91Y2ggPSBlLnRvdWNoZXNbMF07CiAgICB0aGlzLmRlbHRhX3ggPSB0b3VjaC5wYWdlWCAtIHRoaXMucGFnZVg7CiAgICB0aGlzLmRlbHRhX3kgPSB0b3VjaC5wYWdlWSAtIHRoaXMucGFnZVk7CiAgfSwKCiAgdG91Y2hlbmQ6IGZ1bmN0aW9uIChlKQogIHsKICAgIC8vIGRlZmF1bHQgYmVoYXZpb3IgZm9yIG11bHRpLXRvdWNoCiAgICBpZiAoZS50b3VjaGVzLmxlbmd0aCA+IDEpCiAgICAgIHJldHVybjsKCiAgICB2YXIgZGVsYXkgPSAobmV3IERhdGUpLmdldFRpbWUoKSAtIHRoaXMubGFzdF90YXA7CiAgICB2YXIgZHggPSB0aGlzLmRlbHRhX3g7CiAgICB2YXIgZHkgPSB0aGlzLmRlbHRhX3k7CiAgICB2YXIgYWJzX2R4ID0gTWF0aC5hYnMoZHgpOwogICAgdmFyIGFic19keSA9IE1hdGguYWJzKGR5KTsKCiAgICBpZiAoZGVsYXkgPCA1MDAgJiYgKGFic19keCA+IDEwMCB8fCBhYnNfZHkgPiAxMDApKQogICAgewogICAgICBpZiAoYWJzX2R4ID4gMC41ICogYWJzX2R5KQogICAgICB7CiAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpOwoKICAgICAgICBpZiAoZHggPCAwKQogICAgICAgICAgdzNjX3NsaWR5Lm5leHRfc2xpZGUodHJ1ZSk7CiAgICAgICAgZWxzZQogICAgICAgICAgdzNjX3NsaWR5LnByZXZpb3VzX3NsaWRlKHRydWUpOwogICAgICB9CiAgICAgIGVsc2UgaWYgKGFic19keSA+IDIgKiBhYnNfZHgpCiAgICAgIHsKICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7CiAgICAgICAgdzNjX3NsaWR5LnRvZ2dsZV90YWJsZV9vZl9jb250ZW50cygpOwogICAgICB9CiAgICB9CiAgfSwKCiAgLy8gIyMjIE9CU09MRVRFICMjIwogIGJlZm9yZV9wcmludDogZnVuY3Rpb24gKCkgewogICAgdGhpcy5zaG93X2FsbF9zbGlkZXMoKTsKICAgIHRoaXMuaGlkZV90b29sYmFyKCk7CiAgICBhbGVydCgiYmVmb3JlIHByaW50Iik7CiAgfSwKCiAgLy8gIyMjIE9CU09MRVRFICMjIwogIGFmdGVyX3ByaW50OiBmdW5jdGlvbiAoKSB7CiAgICBpZiAoIXRoaXMudmlld19hbGwpCiAgICB7CiAgICAgIHRoaXMuc2luZ2xlX3NsaWRlX3ZpZXcoKTsKICAgICAgdGhpcy5zaG93X3Rvb2xiYXIoKTsKICAgIH0KICAgIGFsZXJ0KCJhZnRlciBwcmludCIpOwogIH0sCgogIC8vICMjIyBPQlNPTEVURSAjIyMKICBwcmludF9zbGlkZXM6IGZ1bmN0aW9uICgpIHsKICAgIHRoaXMuYmVmb3JlX3ByaW50KCk7CiAgICB3aW5kb3cucHJpbnQoKTsKICAgIHRoaXMuYWZ0ZXJfcHJpbnQoKTsKICB9LAoKICAvLyAjIyMgT0JTT0xFVEUgPz8gIyMjCiAgdG9nZ2xlX3ZpZXc6IGZ1bmN0aW9uICgpIHsKICAgIGlmICh0aGlzLnZpZXdfYWxsKQogICAgewogICAgICB0aGlzLnNpbmdsZV9zbGlkZV92aWV3KCk7CiAgICAgIHRoaXMuc2hvd190b29sYmFyKCk7CiAgICAgIHRoaXMudmlld19hbGwgPSAwOwogICAgfQogICAgZWxzZQogICAgewogICAgICB0aGlzLnNob3dfYWxsX3NsaWRlcygpOwogICAgICB0aGlzLmhpZGVfdG9vbGJhcigpOwogICAgICB0aGlzLnZpZXdfYWxsID0gMTsKICAgIH0KICB9LAoKICAvLyBwcmVwYXJlIGZvciBwcmludGluZyAgIyMjIE9CU09MRVRFICMjIwogIHNob3dfYWxsX3NsaWRlczogZnVuY3Rpb24gKCkgewogICAgdGhpcy5yZW1vdmVfY2xhc3MoZG9jdW1lbnQuYm9keSwgInNpbmdsZV9zbGlkZSIpOwogICAgdGhpcy5zZXRfdmlzaWJpbGl0eV9hbGxfaW5jcmVtZW50YWwoInZpc2libGUiKTsKICB9LAoKICAvLyByZXN0b3JlIGFmdGVyIHByaW50aW5nICAjIyMgT0JTT0xFVEUgIyMjCiAgc2luZ2xlX3NsaWRlX3ZpZXc6IGZ1bmN0aW9uICgpIHsKICAgIHRoaXMuYWRkX2NsYXNzKGRvY3VtZW50LmJvZHksICJzaW5nbGVfc2xpZGUiKTsKICAgIHRoaXMuc2V0X3Zpc2liaWxpdHlfYWxsX2luY3JlbWVudGFsKCJ2aXNpYmxlIik7CiAgICB0aGlzLmxhc3Rfc2hvd24gPSB0aGlzLnByZXZpb3VzX2luY3JlbWVudGFsX2l0ZW0obnVsbCk7CiAgfSwKCiAgLy8gc3VwcHJlc3MgSUUncyBpbWFnZSB0b29sYmFyIHBvcCB1cAogIGhpZGVfaW1hZ2VfdG9vbGJhcjogZnVuY3Rpb24gKCkgewogICAgaWYgKCF0aGlzLm5zX3BvcykKICAgIHsKICAgICAgdmFyIGltYWdlcyA9IGRvY3VtZW50LmdldEVsZW1lbnRzQnlUYWdOYW1lKCJJTUciKTsKCiAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgaW1hZ2VzLmxlbmd0aDsgKytpKQogICAgICAgIGltYWdlc1tpXS5zZXRBdHRyaWJ1dGUoImdhbGxlcnlpbWciLCAibm8iKTsKICAgIH0KICB9LAoKICB1bmxvYWRlZDogZnVuY3Rpb24gKGUpIHsKICAgIC8vYWxlcnQoInVubG9hZGVkIik7CiAgfSwKCiAgLy8gU2FmYXJpIGFuZCBLb25xdWVyb3IgZG9uJ3QgeWV0IHN1cHBvcnQgZ2V0Q29tcHV0ZWRTdHlsZSgpCiAgLy8gYW5kIHRoZXkgYWx3YXlzIHJlbG9hZCBwYWdlIHdoZW4gbG9jYXRpb24uaHJlZiBpcyB1cGRhdGVkCiAgaXNfS0hUTUw6IGZ1bmN0aW9uICgpIHsKICAgIHZhciBhZ2VudCA9IG5hdmlnYXRvci51c2VyQWdlbnQ7CiAgICByZXR1cm4gKGFnZW50LmluZGV4T2YoIktIVE1MIikgPj0gMCA/IHRydWUgOiBmYWxzZSk7CiAgfSwKCiAgLy8gZmluZCBzbGlkZSBuYW1lIGZyb20gZmlyc3QgaDEgZWxlbWVudAogIC8vIGRlZmF1bHQgdG8gZG9jdW1lbnQgdGl0bGUgKyBzbGlkZSBudW1iZXIKICBzbGlkZV9uYW1lOiBmdW5jdGlvbiAoaW5kZXgpIHsKICAgIHZhciBuYW1lID0gbnVsbDsKICAgIHZhciBzbGlkZSA9IHRoaXMuc2xpZGVzW2luZGV4XTsKCiAgICB2YXIgaGVhZGluZyA9IHRoaXMuZmluZF9oZWFkaW5nKHNsaWRlKTsKCiAgICBpZiAoaGVhZGluZykKICAgICAgbmFtZSA9IHRoaXMuZXh0cmFjdF90ZXh0KGhlYWRpbmcpOwoKICAgIGlmICghbmFtZSkKICAgICAgbmFtZSA9IHRoaXMudGl0bGUgKyAiKCIgKyAoaW5kZXggKyAxKSArICIpIjsKCiAgICBuYW1lLnJlcGxhY2UoL1wmL2csICImYW1wOyIpOwogICAgbmFtZS5yZXBsYWNlKC9cPC9nLCAiJmx0OyIpOwogICAgbmFtZS5yZXBsYWNlKC9cPi9nLCAiJmd0OyIpOwoKICAgIHJldHVybiBuYW1lOwogIH0sCgogIC8vIGZpbmQgZmlyc3QgaDEgZWxlbWVudCBpbiBET00gdHJlZQogIGZpbmRfaGVhZGluZzogZnVuY3Rpb24gKG5vZGUpIHsKICAgIGlmICghbm9kZSB8fCBub2RlLm5vZGVUeXBlICE9IDEpCiAgICAgIHJldHVybiBudWxsOwoKICAgIGlmIChub2RlLm5vZGVOYW1lID09ICJIMSIgfHwgbm9kZS5ub2RlTmFtZSA9PSAiaDEiKQogICAgICByZXR1cm4gbm9kZTsKCiAgICB2YXIgY2hpbGQgPSBub2RlLmZpcnN0Q2hpbGQ7CgogICAgd2hpbGUgKGNoaWxkKQogICAgewogICAgICBub2RlID0gdGhpcy5maW5kX2hlYWRpbmcoY2hpbGQpOwoKICAgICAgaWYgKG5vZGUpCiAgICAgICAgcmV0dXJuIG5vZGU7CgogICAgICBjaGlsZCA9IGNoaWxkLm5leHRTaWJsaW5nOwogICAgfQoKICAgIHJldHVybiBudWxsOwogIH0sCgogIC8vIHJlY3Vyc2l2ZWx5IGV4dHJhY3QgdGV4dCBmcm9tIERPTSB0cmVlCiAgZXh0cmFjdF90ZXh0OiBmdW5jdGlvbiAobm9kZSkgewogICAgaWYgKCFub2RlKQogICAgICByZXR1cm4gIiI7CgogICAgLy8gdGV4dCBub2RlcwogICAgaWYgKG5vZGUubm9kZVR5cGUgPT0gMykKICAgICAgcmV0dXJuIG5vZGUubm9kZVZhbHVlOwoKICAgIC8vIGVsZW1lbnRzCiAgICBpZiAobm9kZS5ub2RlVHlwZSA9PSAxKQogICAgewogICAgICBub2RlID0gbm9kZS5maXJzdENoaWxkOwogICAgICB2YXIgdGV4dCA9ICIiOwoKICAgICAgd2hpbGUgKG5vZGUpCiAgICAgIHsKICAgICAgICB0ZXh0ID0gdGV4dCArIHRoaXMuZXh0cmFjdF90ZXh0KG5vZGUpOwogICAgICAgIG5vZGUgPSBub2RlLm5leHRTaWJsaW5nOwogICAgICB9CgogICAgICByZXR1cm4gdGV4dDsKICAgIH0KCiAgICByZXR1cm4gIiI7CiAgfSwKCiAgLy8gZmluZCBjb3B5cmlnaHQgdGV4dCBmcm9tIG1ldGEgZWxlbWVudAogIGZpbmRfY29weXJpZ2h0OiBmdW5jdGlvbiAoKSB7CiAgICB2YXIgbmFtZSwgY29udGVudDsKICAgIHZhciBtZXRhID0gZG9jdW1lbnQuZ2V0RWxlbWVudHNCeVRhZ05hbWUoIm1ldGEiKTsKCiAgICBmb3IgKHZhciBpID0gMDsgaSA8IG1ldGEubGVuZ3RoOyArK2kpCiAgICB7CiAgICAgIG5hbWUgPSBtZXRhW2ldLmdldEF0dHJpYnV0ZSgibmFtZSIpOwogICAgICBjb250ZW50ID0gbWV0YVtpXS5nZXRBdHRyaWJ1dGUoImNvbnRlbnQiKTsKCiAgICAgIGlmIChuYW1lID09ICJjb3B5cmlnaHQiKQogICAgICAgIHJldHVybiBjb250ZW50OwogICAgfQoKICAgIHJldHVybiBudWxsOwogIH0sCgogIGZpbmRfc2l6ZV9hZGp1c3Q6IGZ1bmN0aW9uICgpIHsKICAgIHZhciBuYW1lLCBjb250ZW50LCBvZmZzZXQ7CiAgICB2YXIgbWV0YSA9IGRvY3VtZW50LmdldEVsZW1lbnRzQnlUYWdOYW1lKCJtZXRhIik7CgogICAgZm9yICh2YXIgaSA9IDA7IGkgPCBtZXRhLmxlbmd0aDsgKytpKQogICAgewogICAgICBuYW1lID0gbWV0YVtpXS5nZXRBdHRyaWJ1dGUoIm5hbWUiKTsKICAgICAgY29udGVudCA9IG1ldGFbaV0uZ2V0QXR0cmlidXRlKCJjb250ZW50Iik7CgogICAgICBpZiAobmFtZSA9PSAiZm9udC1zaXplLWFkanVzdG1lbnQiKQogICAgICAgIHJldHVybiAxICogY29udGVudDsKICAgIH0KCiAgICByZXR1cm4gMTsKICB9LAoKICAvLyA8bWV0YSBuYW1lPSJkdXJhdGlvbiIgY29udGVudD0iMjAiIC8+ICBmb3IgMjAgbWludXRlcwogIGZpbmRfZHVyYXRpb246IGZ1bmN0aW9uICgpIHsKICAgIHZhciBuYW1lLCBjb250ZW50LCBvZmZzZXQ7CiAgICB2YXIgbWV0YSA9IGRvY3VtZW50LmdldEVsZW1lbnRzQnlUYWdOYW1lKCJtZXRhIik7CgogICAgZm9yICh2YXIgaSA9IDA7IGkgPCBtZXRhLmxlbmd0aDsgKytpKQogICAgewogICAgICBuYW1lID0gbWV0YVtpXS5nZXRBdHRyaWJ1dGUoIm5hbWUiKTsKICAgICAgY29udGVudCA9IG1ldGFbaV0uZ2V0QXR0cmlidXRlKCJjb250ZW50Iik7CgogICAgICBpZiAobmFtZSA9PSAiZHVyYXRpb24iKQogICAgICAgIHJldHVybiA2MDAwMCAqIGNvbnRlbnQ7CiAgICB9CgogICAgcmV0dXJuIG51bGw7CiAgfSwKCiAgcmVwbGFjZV9ieV9ub25fYnJlYWtpbmdfc3BhY2U6IGZ1bmN0aW9uIChzdHIpIHsKICAgIGZvciAodmFyIGkgPSAwOyBpIDwgc3RyLmxlbmd0aDsgKytpKQogICAgICBzdHJbaV0gPSAxNjA7CiAgfSwKCiAgLy8gIyMjIENIRUNLIE1FICMjIyBpcyB1c2Ugb2YgImxpIiBva2F5IGZvciB0ZXh0L2h0bWw/CiAgLy8gZm9yIFhIVE1MIGRvIHdlIGFsc28gbmVlZCB0byBzcGVjaWZ5IG5hbWVzcGFjZT8KICBpbml0X291dGxpbmVyOiBmdW5jdGlvbiAoKSB7CiAgICB2YXIgaXRlbXMgPSBkb2N1bWVudC5nZXRFbGVtZW50c0J5VGFnTmFtZSgibGkiKTsKCiAgICBmb3IgKHZhciBpID0gMDsgaSA8IGl0ZW1zLmxlbmd0aDsgKytpKQogICAgewogICAgICB2YXIgdGFyZ2V0ID0gaXRlbXNbaV07CgogICAgICBpZiAoIXRoaXMuaGFzX2NsYXNzKHRhcmdldC5wYXJlbnROb2RlLCAib3V0bGluZSIpKQogICAgICAgIGNvbnRpbnVlOwoKICAgICAgdGFyZ2V0Lm9uY2xpY2sgPSB0aGlzLm91dGxpbmVfY2xpY2s7Ci8qICMjIyBtb3JlIHdvcmsgbmVlZGVkIGZvciBJRTYKICAgICAgaWYgKCF0aGlzLm5zX3BvcykKICAgICAgewogICAgICAgIHRhcmdldC5vbm1vdXNlb3ZlciA9IHRoaXMuaG92ZXJfb3V0bGluZTsKICAgICAgICB0YXJnZXQub25tb3VzZW91dCA9IHRoaXMudW5ob3Zlcl9vdXRsaW5lOwogICAgICB9CiovCiAgICAgIGlmICh0aGlzLmZvbGRhYmxlKHRhcmdldCkpCiAgICAgIHsKICAgICAgICB0YXJnZXQuZm9sZGFibGUgPSB0cnVlOwogICAgICAgIHRhcmdldC5vbmZvY3VzID0gZnVuY3Rpb24gKCkge3czY19zbGlkeS5vdXRsaW5lID0gdGhpczt9OwogICAgICAgIHRhcmdldC5vbmJsdXIgPSBmdW5jdGlvbiAoKSB7dzNjX3NsaWR5Lm91dGxpbmUgPSBudWxsO307CgogICAgICAgIGlmICghdGFyZ2V0LmdldEF0dHJpYnV0ZSgidGFiaW5kZXgiKSkKICAgICAgICAgIHRhcmdldC5zZXRBdHRyaWJ1dGUoInRhYmluZGV4IiwgIjAiKTsKCiAgICAgICAgaWYgKHRoaXMuaGFzX2NsYXNzKHRhcmdldCwgImV4cGFuZCIpKQogICAgICAgICAgdGhpcy51bmZvbGQodGFyZ2V0KTsKICAgICAgICBlbHNlCiAgICAgICAgICB0aGlzLmZvbGQodGFyZ2V0KTsKICAgICAgfQogICAgICBlbHNlCiAgICAgIHsKICAgICAgICB0aGlzLmFkZF9jbGFzcyh0YXJnZXQsICJub2ZvbGQiKTsKICAgICAgICB0YXJnZXQudmlzaWJsZSA9IHRydWU7CiAgICAgICAgdGFyZ2V0LmZvbGRhYmxlID0gZmFsc2U7CiAgICAgIH0KICAgIH0KICB9LAoKICBmb2xkYWJsZTogZnVuY3Rpb24gKGl0ZW0pIHsKICAgIGlmICghaXRlbSB8fCBpdGVtLm5vZGVUeXBlICE9IDEpCiAgICAgIHJldHVybiBmYWxzZTsKCiAgICB2YXIgbm9kZSA9IGl0ZW0uZmlyc3RDaGlsZDsKCiAgICB3aGlsZSAobm9kZSkKICAgIHsKICAgICAgaWYgKG5vZGUubm9kZVR5cGUgPT0gMSAmJiB0aGlzLmlzX2Jsb2NrKG5vZGUpKQogICAgICAgIHJldHVybiB0cnVlOwoKICAgICAgbm9kZSA9IG5vZGUubmV4dFNpYmxpbmc7CiAgICB9CgogICAgcmV0dXJuIGZhbHNlOwogIH0sCgogIC8vICMjIyBDSEVDSyBNRSAjIyMgc3dpdGNoIHRvIGFkZC9yZW1vdmUgImhpZGRlbiIgY2xhc3MKICBmb2xkOiBmdW5jdGlvbiAoaXRlbSkgewogICAgaWYgKGl0ZW0pCiAgICB7CiAgICAgIHRoaXMucmVtb3ZlX2NsYXNzKGl0ZW0sICJ1bmZvbGRlZCIpOwogICAgICB0aGlzLmFkZF9jbGFzcyhpdGVtLCAiZm9sZGVkIik7CiAgICB9CgogICAgdmFyIG5vZGUgPSBpdGVtID8gaXRlbS5maXJzdENoaWxkIDogbnVsbDsKCiAgICB3aGlsZSAobm9kZSkKICAgIHsKICAgICAgaWYgKG5vZGUubm9kZVR5cGUgPT0gMSAmJiB0aGlzLmlzX2Jsb2NrKG5vZGUpKSAvLyBlbGVtZW50CiAgICAgIHsKICAgICAgICAgdzNjX3NsaWR5LmFkZF9jbGFzcyhub2RlLCAiaGlkZGVuIik7CiAgICAgIH0KCiAgICAgIG5vZGUgPSBub2RlLm5leHRTaWJsaW5nOwogICAgfQoKICAgIGl0ZW0udmlzaWJsZSA9IGZhbHNlOwogIH0sCgogIC8vICMjIyBDSEVDSyBNRSAjIyMgc3dpdGNoIHRvIGFkZC9yZW1vdmUgImhpZGRlbiIgY2xhc3MKICB1bmZvbGQ6IGZ1bmN0aW9uIChpdGVtKSB7CiAgICBpZiAoaXRlbSkKICAgIHsKICAgICAgdGhpcy5hZGRfY2xhc3MoaXRlbSwgInVuZm9sZGVkIik7CiAgICAgIHRoaXMucmVtb3ZlX2NsYXNzKGl0ZW0sICJmb2xkZWQiKTsKICAgIH0KCiAgICB2YXIgbm9kZSA9IGl0ZW0gPyBpdGVtLmZpcnN0Q2hpbGQgOiBudWxsOwoKICAgIHdoaWxlIChub2RlKQogICAgewogICAgICBpZiAobm9kZS5ub2RlVHlwZSA9PSAxICYmIHRoaXMuaXNfYmxvY2sobm9kZSkpIC8vIGVsZW1lbnQKICAgICAgewogICAgICAgIHczY19zbGlkeS5yZW1vdmVfY2xhc3Mobm9kZSwgImhpZGRlbiIpOwogICAgICB9CgogICAgICBub2RlID0gbm9kZS5uZXh0U2libGluZzsKICAgIH0KCiAgICBpdGVtLnZpc2libGUgPSB0cnVlOwogIH0sCgogIG91dGxpbmVfY2xpY2s6IGZ1bmN0aW9uIChlKSB7CiAgICBpZiAoIWUpCiAgICAgIGUgPSB3aW5kb3cuZXZlbnQ7CgogICAgdmFyIHJpZ2h0Y2xpY2sgPSBmYWxzZTsKICAgIHZhciB0YXJnZXQgPSB3M2Nfc2xpZHkuZ2V0X3RhcmdldChlKTsKCiAgICB3aGlsZSAodGFyZ2V0ICYmIHRhcmdldC52aXNpYmxlID09IHVuZGVmaW5lZCkKICAgICAgdGFyZ2V0ID0gdGFyZ2V0LnBhcmVudE5vZGU7CgogICAgaWYgKCF0YXJnZXQpCiAgICAgIHJldHVybiB0cnVlOwoKICAgIGlmIChlLndoaWNoKQogICAgICByaWdodGNsaWNrID0gKGUud2hpY2ggPT0gMyk7CiAgICBlbHNlIGlmIChlLmJ1dHRvbikKICAgICAgcmlnaHRjbGljayA9IChlLmJ1dHRvbiA9PSAyKTsKCiAgICBpZiAoIXJpZ2h0Y2xpY2sgJiYgdGFyZ2V0LnZpc2libGUgIT0gdW5kZWZpbmVkKQogICAgewogICAgICBpZiAodGFyZ2V0LmZvbGRhYmxlKQogICAgICB7CiAgICAgICAgaWYgKHRhcmdldC52aXNpYmxlKQogICAgICAgICAgdzNjX3NsaWR5LmZvbGQodGFyZ2V0KTsKICAgICAgICBlbHNlCiAgICAgICAgICB3M2Nfc2xpZHkudW5mb2xkKHRhcmdldCk7CiAgICAgIH0KCiAgICAgIHczY19zbGlkeS5zdG9wX3Byb3BhZ2F0aW9uKGUpOwogICAgICBlLmNhbmNlbCA9IHRydWU7CiAgICAgIGUucmV0dXJuVmFsdWUgPSBmYWxzZTsKICAgIH0KCiAgICByZXR1cm4gZmFsc2U7CiAgfSwKCiAgYWRkX2luaXRpYWxfcHJvbXB0OiBmdW5jdGlvbiAoKSB7CiAgICB2YXIgcHJvbXB0ID0gdGhpcy5jcmVhdGVfZWxlbWVudCgiZGl2Iik7CiAgICBwcm9tcHQuc2V0QXR0cmlidXRlKCJjbGFzcyIsICJpbml0aWFsX3Byb21wdCIpOwoKICAgIHZhciBwMSA9IHRoaXMuY3JlYXRlX2VsZW1lbnQoInAiKTsKICAgIHByb21wdC5hcHBlbmRDaGlsZChwMSk7CiAgICBwMS5zZXRBdHRyaWJ1dGUoImNsYXNzIiwgImhlbHAiKTsKCiAgICBpZiAodGhpcy5rZXlib2FyZGxlc3MpCiAgICAgIHAxLmlubmVySFRNTCA9ICJzd2lwZSBsZWZ0IHRvIG1vdmUgdG8gbmV4dCBzbGlkZSI7CiAgICBlbHNlCiAgICAgIHAxLmlubmVySFRNTCA9ICJTcGFjZSwgUmlnaHQgQXJyb3cgb3Igc3dpcGUgbGVmdCB0byBtb3ZlIHRvICIgKwogICAgICAgICAgICAgICAgICAgICAibmV4dCBzbGlkZSwgY2xpY2sgaGVscCBiZWxvdyBmb3IgbW9yZSBkZXRhaWxzIjsKCiAgICB0aGlzLmFkZF9saXN0ZW5lcihwcm9tcHQsICJjbGljayIsIGZ1bmN0aW9uIChlKSB7CiAgICAgIGRvY3VtZW50LmJvZHkucmVtb3ZlQ2hpbGQocHJvbXB0KTsKICAgICAgdzNjX3NsaWR5LnN0b3BfcHJvcGFnYXRpb24oZSk7CiAgICAKICAgICAgaWYgKGUuY2FuY2VsICE9IHVuZGVmaW5lZCkKICAgICAgICBlLmNhbmNlbCA9IHRydWU7CiAgICAgIAogICAgICBpZiAoZS5yZXR1cm5WYWx1ZSAhPSB1bmRlZmluZWQpCiAgICAgICAgZS5yZXR1cm5WYWx1ZSA9IGZhbHNlOwogICAgICAKICAgICAgcmV0dXJuIGZhbHNlOwogICAgfSk7CgogICAgZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZChwcm9tcHQpOwogICAgdGhpcy5pbml0aWFsX3Byb21wdCA9IHByb21wdDsKICAgIHNldFRpbWVvdXQoZnVuY3Rpb24oKSB7ZG9jdW1lbnQuYm9keS5yZW1vdmVDaGlsZChwcm9tcHQpO30sIDUwMDApOwogIH0sCgogIGFkZF90b29sYmFyOiBmdW5jdGlvbiAoKSB7CiAgICB2YXIgY291bnRlciwgcGFnZTsKCiAgICAgdGhpcy50b29sYmFyID0gdGhpcy5jcmVhdGVfZWxlbWVudCgiZGl2Iik7CiAgICAgdGhpcy50b29sYmFyLnNldEF0dHJpYnV0ZSgiY2xhc3MiLCAidG9vbGJhciIpOwoKICAgICAvLyBhIHJlYXNvbmFibHkgYmVoYXZlZCBicm93c2VyCiAgICAgaWYgKHRoaXMubnNfcG9zIHx8ICF0aGlzLmllNikKICAgICB7CiAgICAgICB2YXIgcmlnaHQgPSB0aGlzLmNyZWF0ZV9lbGVtZW50KCJkaXYiKTsKICAgICAgIHJpZ2h0LnNldEF0dHJpYnV0ZSgic3R5bGUiLCAiZmxvYXQ6IHJpZ2h0OyB0ZXh0LWFsaWduOiByaWdodCIpOwoKICAgICAgIGNvdW50ZXIgPSB0aGlzLmNyZWF0ZV9lbGVtZW50KCJzcGFuIikKICAgICAgIGNvdW50ZXIuaW5uZXJIVE1MID0gdGhpcy5sb2NhbGl6ZSgic2xpZGUiKSArICIgbi9tIjsKICAgICAgIHJpZ2h0LmFwcGVuZENoaWxkKGNvdW50ZXIpOwogICAgICAgdGhpcy50b29sYmFyLmFwcGVuZENoaWxkKHJpZ2h0KTsKCiAgICAgICB2YXIgbGVmdCA9IHRoaXMuY3JlYXRlX2VsZW1lbnQoImRpdiIpOwogICAgICAgbGVmdC5zZXRBdHRyaWJ1dGUoInN0eWxlIiwgInRleHQtYWxpZ246IGxlZnQiKTsKCiAgICAgICAvLyBnbG9iYWwgZW5kIG9mIHNsaWRlIGluZGljYXRvcgogICAgICAgdGhpcy5lb3MgPSB0aGlzLmNyZWF0ZV9lbGVtZW50KCJzcGFuIik7CiAgICAgICB0aGlzLmVvcy5pbm5lckhUTUwgPSAiKiAiOwogICAgICAgbGVmdC5hcHBlbmRDaGlsZCh0aGlzLmVvcyk7CgogICAgICAgdmFyIGhlbHAgPSB0aGlzLmNyZWF0ZV9lbGVtZW50KCJhIik7CiAgICAgICBoZWxwLnNldEF0dHJpYnV0ZSgiaHJlZiIsIHRoaXMuaGVscF9wYWdlKTsKICAgICAgIGhlbHAuc2V0QXR0cmlidXRlKCJ0aXRsZSIsIHRoaXMubG9jYWxpemUodGhpcy5oZWxwX3RleHQpKTsKICAgICAgIGhlbHAuaW5uZXJIVE1MID0gdGhpcy5sb2NhbGl6ZSgiaGVscD8iKTsKICAgICAgIGxlZnQuYXBwZW5kQ2hpbGQoaGVscCk7CiAgICAgICBoZWxwLnN0eWxlLmRpc3BsYXk9Im5vbmUiOyAKICAgICAgIHRoaXMuaGVscF9hbmNob3IgPSBoZWxwOyAgLy8gc2F2ZSBmb3IgZm9jdXMgaGFjawoKICAgICAgIHZhciBnYXAxID0gZG9jdW1lbnQuY3JlYXRlVGV4dE5vZGUoIiAiKTsKICAgICAgIGxlZnQuYXBwZW5kQ2hpbGQoZ2FwMSk7CgogICAgICAgdmFyIGNvbnRlbnRzID0gdGhpcy5jcmVhdGVfZWxlbWVudCgiYSIpOwogICAgICAgY29udGVudHMuc2V0QXR0cmlidXRlKCJocmVmIiwgImphdmFzY3JpcHQ6dzNjX3NsaWR5LnRvZ2dsZV90YWJsZV9vZl9jb250ZW50cygpIik7CiAgICAgICBjb250ZW50cy5zZXRBdHRyaWJ1dGUoInRpdGxlIiwgdGhpcy5sb2NhbGl6ZSgidGFibGUgb2YgY29udGVudHMiKSk7CiAgICAgICBjb250ZW50cy5pbm5lckhUTUwgPSB0aGlzLmxvY2FsaXplKCJDb250ZW50cyIpOwogICAgICAgbGVmdC5hcHBlbmRDaGlsZChjb250ZW50cyk7CgogICAgICAgdmFyIGdhcDIgPSBkb2N1bWVudC5jcmVhdGVUZXh0Tm9kZSgiICIpOwogICAgICAgbGVmdC5hcHBlbmRDaGlsZChnYXAyKTsKCiAgICAgICB2YXIgY29weXJpZ2h0ID0gdGhpcy5maW5kX2NvcHlyaWdodCgpOwoKICAgICAgIGlmIChjb3B5cmlnaHQpCiAgICAgICB7CiAgICAgICAgIHZhciBzcGFuID0gdGhpcy5jcmVhdGVfZWxlbWVudCgic3BhbiIpOwogICAgICAgICBzcGFuLmNsYXNzTmFtZSA9ICJjb3B5cmlnaHQiOwogICAgICAgICBzcGFuLmlubmVySFRNTCA9IGNvcHlyaWdodDsKICAgICAgICAgbGVmdC5hcHBlbmRDaGlsZChzcGFuKTsKICAgICAgIH0KCiAgICAgICB0aGlzLnRvb2xiYXIuc2V0QXR0cmlidXRlKCJ0YWJpbmRleCIsICIwIik7CiAgICAgICB0aGlzLnRvb2xiYXIuYXBwZW5kQ2hpbGQobGVmdCk7CiAgICAgfQogICAgIGVsc2UgLy8gSUU2IHNvIG5lZWQgdG8gd29yayBhcm91bmQgaXRzIHBvb3IgQ1NTIHN1cHBvcnQKICAgICB7CiAgICAgICB0aGlzLnRvb2xiYXIuc3R5bGUucG9zaXRpb24gPSAodGhpcy5pZTcgPyAiZml4ZWQiIDogImFic29sdXRlIik7CiAgICAgICB0aGlzLnRvb2xiYXIuc3R5bGUuekluZGV4ID0gIjIwMCI7CiAgICAgICB0aGlzLnRvb2xiYXIuc3R5bGUud2lkdGggPSAiOTkuOSUiOwogICAgICAgdGhpcy50b29sYmFyLnN0eWxlLmhlaWdodCA9ICIxLjJlbSI7CiAgICAgICB0aGlzLnRvb2xiYXIuc3R5bGUudG9wID0gImF1dG8iOwogICAgICAgdGhpcy50b29sYmFyLnN0eWxlLmJvdHRvbSA9ICIwIjsKICAgICAgIHRoaXMudG9vbGJhci5zdHlsZS5sZWZ0ID0gIjAiOwogICAgICAgdGhpcy50b29sYmFyLnN0eWxlLnJpZ2h0ID0gIjAiOwogICAgICAgdGhpcy50b29sYmFyLnN0eWxlLnRleHRBbGlnbiA9ICJsZWZ0IjsKICAgICAgIHRoaXMudG9vbGJhci5zdHlsZS5mb250U2l6ZSA9ICI2MCUiOwogICAgICAgdGhpcy50b29sYmFyLnN0eWxlLmNvbG9yID0gInJlZCI7CiAgICAgICB0aGlzLnRvb2xiYXIuYm9yZGVyV2lkdGggPSAwOwogICAgICAgdGhpcy50b29sYmFyLmNsYXNzTmFtZSA9ICJ0b29sYmFyIjsKICAgICAgIHRoaXMudG9vbGJhci5zdHlsZS5iYWNrZ3JvdW5kID0gInJnYigyNDAsMjQwLDI0MCkiOwoKICAgICAgIC8vIHdvdWxkIGxpa2UgdG8gaGF2ZSBoZWxwIHRleHQgbGVmdCBhbGlnbmVkCiAgICAgICAvLyBhbmQgcGFnZSBjb3VudGVyIHJpZ2h0IGFsaWduZWQsIGZsb2F0aW5nCiAgICAgICAvLyBkaXYncyBkb24ndCB3b3JrLCBzbyBpbnN0ZWFkIHVzZSBuZXN0ZWQKICAgICAgIC8vIGFic29sdXRlbHkgcG9zaXRpb25lZCBkaXYncy4KCiAgICAgICB2YXIgc3AgPSB0aGlzLmNyZWF0ZV9lbGVtZW50KCJzcGFuIik7CiAgICAgICBzcC5pbm5lckhUTUwgPSAiJm5ic3A7Jm5ic3A7KiZuYnNwOyI7CiAgICAgICB0aGlzLnRvb2xiYXIuYXBwZW5kQ2hpbGQoc3ApOwogICAgICAgdGhpcy5lb3MgPSBzcDsgIC8vIGVuZCBvZiBzbGlkZSBpbmRpY2F0b3IKCiAgICAgICB2YXIgaGVscCA9IHRoaXMuY3JlYXRlX2VsZW1lbnQoImEiKTsKICAgICAgIGhlbHAuc2V0QXR0cmlidXRlKCJocmVmIiwgdGhpcy5oZWxwX3BhZ2UpOwogICAgICAgaGVscC5zZXRBdHRyaWJ1dGUoInRpdGxlIiwgdGhpcy5sb2NhbGl6ZSh0aGlzLmhlbHBfdGV4dCkpOwogICAgICAgaGVscC5pbm5lckhUTUwgPSB0aGlzLmxvY2FsaXplKCJoZWxwPyIpOwogICAgICAgdGhpcy50b29sYmFyLmFwcGVuZENoaWxkKGhlbHApOwogICAgICAgdGhpcy5oZWxwX2FuY2hvciA9IGhlbHA7ICAvLyBzYXZlIGZvciBmb2N1cyBoYWNrCgogICAgICAgdmFyIGdhcDEgPSBkb2N1bWVudC5jcmVhdGVUZXh0Tm9kZSgiICIpOwogICAgICAgdGhpcy50b29sYmFyLmFwcGVuZENoaWxkKGdhcDEpOwoKICAgICAgIHZhciBjb250ZW50cyA9IHRoaXMuY3JlYXRlX2VsZW1lbnQoImEiKTsKICAgICAgIGNvbnRlbnRzLnNldEF0dHJpYnV0ZSgiaHJlZiIsICJqYXZhc2NyaXB0OnRvZ2dsZVRhYmxlT2ZDb250ZW50cygpIik7CiAgICAgICBjb250ZW50cy5zZXRBdHRyaWJ1dGUoInRpdGxlIiwgdGhpcy5sb2NhbGl6ZSgidGFibGUgb2YgY29udGVudHMiLmxvY2FsaXplKSk7CiAgICAgICBjb250ZW50cy5pbm5lckhUTUwgPSB0aGlzLmxvY2FsaXplKCJjb250ZW50cz8iKTsKICAgICAgIHRoaXMudG9vbGJhci5hcHBlbmRDaGlsZChjb250ZW50cyk7CgogICAgICAgdmFyIGdhcDIgPSBkb2N1bWVudC5jcmVhdGVUZXh0Tm9kZSgiICIpOwogICAgICAgdGhpcy50b29sYmFyLmFwcGVuZENoaWxkKGdhcDIpOwoKICAgICAgIHZhciBjb3B5cmlnaHQgPSB0aGlzLmZpbmRfY29weXJpZ2h0KCk7CgogICAgICAgaWYgKGNvcHlyaWdodCkKICAgICAgIHsKICAgICAgICAgdmFyIHNwYW4gPSB0aGlzLmNyZWF0ZV9lbGVtZW50KCJzcGFuIik7CiAgICAgICAgIHNwYW4uaW5uZXJIVE1MID0gY29weXJpZ2h0OwogICAgICAgICBzcGFuLnN0eWxlLmNvbG9yID0gImJsYWNrIjsKICAgICAgICAgc3Bhbi5zdHlsZS5tYXJnaW5MZWZ0ID0gIjAuNWVtIjsKICAgICAgICAgdGhpcy50b29sYmFyLmFwcGVuZENoaWxkKHNwYW4pOwogICAgICAgfQoKICAgICAgIGNvdW50ZXIgPSB0aGlzLmNyZWF0ZV9lbGVtZW50KCJkaXYiKQogICAgICAgY291bnRlci5zdHlsZS5wb3NpdGlvbiA9ICJhYnNvbHV0ZSI7CiAgICAgICBjb3VudGVyLnN0eWxlLndpZHRoID0gImF1dG8iOyAvLyIyMCUiOwogICAgICAgY291bnRlci5zdHlsZS5oZWlnaHQgPSAiMS4yZW0iOwogICAgICAgY291bnRlci5zdHlsZS50b3AgPSAiYXV0byI7CiAgICAgICBjb3VudGVyLnN0eWxlLmJvdHRvbSA9IDA7CiAgICAgICBjb3VudGVyLnN0eWxlLnJpZ2h0ID0gIjAiOwogICAgICAgY291bnRlci5zdHlsZS50ZXh0QWxpZ24gPSAicmlnaHQiOwogICAgICAgY291bnRlci5zdHlsZS5jb2xvciA9ICJyZWQiOwogICAgICAgY291bnRlci5zdHlsZS5iYWNrZ3JvdW5kID0gInJnYigyNDAsMjQwLDI0MCkiOwoKICAgICAgIGNvdW50ZXIuaW5uZXJIVE1MID0gdGhpcy5sb2NhbGl6ZSgic2xpZGUiKSArICIgbi9tIjsKICAgICAgIHRoaXMudG9vbGJhci5hcHBlbmRDaGlsZChjb3VudGVyKTsKICAgICB9CgogICAgIC8vIGVuc3VyZSB0aGF0IGNsaWNrIGlzbid0IHBhc3NlZCB0aHJvdWdoIHRvIHRoZSBwYWdlCiAgICAgdGhpcy50b29sYmFyLm9uY2xpY2sgPQogICAgICAgICBmdW5jdGlvbiAoZSkgewogICAgICAgICAgIGlmICghZSkKICAgICAgICAgICAgIGUgPSB3aW5kb3cuZXZlbnQ7CgogICAgICAgICAgIHZhciB0YXJnZXQgPSBlLnRhcmdldDsKCiAgICAgICAgICAgaWYgKCF0YXJnZXQgJiYgZS5zcmNFbGVtZW50KQogICAgICAgICAgICAgdGFyZ2V0ID0gZS5zcmNFbGVtZW50OwoKICAgICAgICAgICAvLyB3b3JrIGFyb3VuZCBTYWZhcmkgYnVnCiAgICAgICAgICAgaWYgKHRhcmdldCAmJiB0YXJnZXQubm9kZVR5cGUgPT0gMykKICAgICAgICAgICAgIHRhcmdldCA9IHRhcmdldC5wYXJlbnROb2RlOwoKICAgICAgICAgICB3M2Nfc2xpZHkuc3RvcF9wcm9wYWdhdGlvbihlKTsKCiAgICAgICAgICAgaWYgKHRhcmdldCAmJiB0YXJnZXQubm9kZU5hbWUudG9Mb3dlckNhc2UoKSAhPSAiYSIpCiAgICAgICAgICAgICB3M2Nfc2xpZHkubW91c2VfYnV0dG9uX2NsaWNrKGUpOwogICAgICAgICB9OwoKICAgICB0aGlzLnNsaWRlX251bWJlcl9lbGVtZW50ID0gY291bnRlcjsKICAgICB0aGlzLnNldF9lb3Nfc3RhdHVzKGZhbHNlKTsKICAgICBkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKHRoaXMudG9vbGJhcik7CiAgfSwKCiAgLy8gd3lzaXd5ZyBlZGl0b3JzIG1ha2UgaXQgaGFyZCB0byB1c2UgZGl2IGVsZW1lbnRzCiAgLy8gZS5nLiBhbWF5YSBsb3NlcyB0aGUgZGl2IHdoZW4geW91IGNvcHkgYW5kIHBhc3RlCiAgLy8gdGhpcyBmdW5jdGlvbiB3cmFwcyBkaXYgZWxlbWVudHMgYXJvdW5kIGltcGxpY2l0CiAgLy8gc2xpZGVzIHdoaWNoIHN0YXJ0IHdpdGggYW4gaDEgZWxlbWVudCBhbmQgY29udGludWUKICAvLyB1cCB0byB0aGUgbmV4dCBoZWFkaW5nIG9yIGRpdiBlbGVtZW50CiAgd3JhcF9pbXBsaWNpdF9zbGlkZXM6IGZ1bmN0aW9uICgpIHsKICAgIHZhciBpLCBoZWFkaW5nLCBub2RlLCBuZXh0LCBkaXY7CiAgICB2YXIgaGVhZGluZ3MgPSBkb2N1bWVudC5nZXRFbGVtZW50c0J5VGFnTmFtZSgiaDEiKTsKCiAgICBpZiAoIWhlYWRpbmdzKQogICAgICByZXR1cm47CgogICAgZm9yIChpID0gMDsgaSA8IGhlYWRpbmdzLmxlbmd0aDsgKytpKQogICAgewogICAgICBoZWFkaW5nID0gaGVhZGluZ3NbaV07CgogICAgICBpZiAoaGVhZGluZy5wYXJlbnROb2RlICE9IGRvY3VtZW50LmJvZHkpCiAgICAgICAgY29udGludWU7CgogICAgICBub2RlID0gaGVhZGluZy5uZXh0U2libGluZzsKCiAgICAgIGRpdiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImRpdiIpOwogICAgICB0aGlzLmFkZF9jbGFzcyhkaXYsICJzbGlkZSIpOwogICAgICBkb2N1bWVudC5ib2R5LnJlcGxhY2VDaGlsZChkaXYsIGhlYWRpbmcpOwogICAgICBkaXYuYXBwZW5kQ2hpbGQoaGVhZGluZyk7CgogICAgICB3aGlsZSAobm9kZSkKICAgICAgewogICAgICAgIGlmIChub2RlLm5vZGVUeXBlID09IDEpIC8vIGFuIGVsZW1lbnQKICAgICAgICB7CiAgICAgICAgICAgaWYgKG5vZGUubm9kZU5hbWUgPT0gIkgxIiB8fCBub2RlLm5vZGVOYW1lID09ICJoMSIpCiAgICAgICAgICAgICBicmVhazsKCiAgICAgICAgICAgaWYgKG5vZGUubm9kZU5hbWUgPT0gIkRJViIgfHwgbm9kZS5ub2RlTmFtZSA9PSAiZGl2IikKICAgICAgICAgICB7CiAgICAgICAgICAgICBpZiAodGhpcy5oYXNfY2xhc3Mobm9kZSwgInNsaWRlIikpCiAgICAgICAgICAgICAgIGJyZWFrOwoKICAgICAgICAgICAgIGlmICh0aGlzLmhhc19jbGFzcyhub2RlLCAiaGFuZG91dCIpKQogICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICB9CiAgICAgICAgfQoKICAgICAgICBuZXh0ID0gbm9kZS5uZXh0U2libGluZzsKICAgICAgICBub2RlID0gZG9jdW1lbnQuYm9keS5yZW1vdmVDaGlsZChub2RlKTsKICAgICAgICBkaXYuYXBwZW5kQ2hpbGQobm9kZSk7CiAgICAgICAgbm9kZSA9IG5leHQ7CiAgICAgIH0gCiAgICB9CiAgfSwKCiAgYXR0YWNoX3RvdWNoX2hhbmRlcnM6IGZ1bmN0aW9uKHNsaWRlcykKICB7CiAgICB2YXIgaSwgc2xpZGU7CgogICAgZm9yIChpID0gMDsgaSA8IHNsaWRlcy5sZW5ndGg7ICsraSkKICAgIHsKICAgICAgc2xpZGUgPSBzbGlkZXNbaV07CiAgICAgIHRoaXMuYWRkX2xpc3RlbmVyKHNsaWRlLCAidG91Y2hzdGFydCIsIHRoaXMudG91Y2hzdGFydCk7CiAgICAgIHRoaXMuYWRkX2xpc3RlbmVyKHNsaWRlLCAidG91Y2htb3ZlIiwgdGhpcy50b3VjaG1vdmUpOwogICAgICB0aGlzLmFkZF9saXN0ZW5lcihzbGlkZSwgInRvdWNoZW5kIiwgdGhpcy50b3VjaGVuZCk7CiAgICB9CiAgfSwKCi8vIHJldHVybiBuZXcgYXJyYXkgb2YgYWxsIHNsaWRlcwogIGNvbGxlY3Rfc2xpZGVzOiBmdW5jdGlvbiAoKSB7CiAgICB2YXIgc2xpZGVzID0gbmV3IEFycmF5KCk7CiAgICB2YXIgZGl2cyA9IGRvY3VtZW50LmJvZHkuZ2V0RWxlbWVudHNCeVRhZ05hbWUoImRpdiIpOwoKICAgIGZvciAodmFyIGkgPSAwOyBpIDwgZGl2cy5sZW5ndGg7ICsraSkKICAgIHsKICAgICAgZGl2ID0gZGl2cy5pdGVtKGkpOwoKICAgICAgaWYgKHRoaXMuaGFzX2NsYXNzKGRpdiwgInNsaWRlIikpCiAgICAgIHsKICAgICAgICAvLyBhZGQgc2xpZGUgdG8gY29sbGVjdGlvbgogICAgICAgIHNsaWRlc1tzbGlkZXMubGVuZ3RoXSA9IGRpdjsKCiAgICAgICAgLy8gaGlkZSBlYWNoIHNsaWRlIGFzIGl0IGlzIGZvdW5kCiAgICAgICAgdGhpcy5hZGRfY2xhc3MoZGl2LCAiaGlkZGVuIik7CgogICAgICAgIC8vIGFkZCBkdW1teSA8YnIvPiBhdCBlbmQgZm9yIHNjcm9sbGluZyBoYWNrCiAgICAgICAgdmFyIG5vZGUxID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiYnIiKTsKICAgICAgICBkaXYuYXBwZW5kQ2hpbGQobm9kZTEpOwogICAgICAgIHZhciBub2RlMiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImJyIik7CiAgICAgICAgZGl2LmFwcGVuZENoaWxkKG5vZGUyKTsKICAgICAgfQogICAgICBlbHNlIGlmICh0aGlzLmhhc19jbGFzcyhkaXYsICJiYWNrZ3JvdW5kIikpCiAgICAgIHsgIC8vIHdvcmsgYXJvdW5kIGZvciBGaXJlZm94IFNWRyByZWxvYWQgYnVnCiAgICAgICAgLy8gd2hpY2ggb3RoZXJ3aXNlIHJlcGxhY2VzIDFzdCBTVkcgZ3JhcGhpYyB3aXRoIDJuZAogICAgICAgIGRpdi5zdHlsZS5kaXNwbGF5ID0gImJsb2NrIjsKICAgICAgfQogICAgfQoKICAgIHRoaXMuc2xpZGVzID0gc2xpZGVzOwogIH0sCgogIC8vIHJldHVybiBuZXcgYXJyYXkgb2YgYWxsIDxkaXYgY2xhc3M9ImhhbmRvdXQiPgogIGNvbGxlY3Rfbm90ZXM6IGZ1bmN0aW9uICgpIHsKICAgIHZhciBub3RlcyA9IG5ldyBBcnJheSgpOwogICAgdmFyIGRpdnMgPSBkb2N1bWVudC5ib2R5LmdldEVsZW1lbnRzQnlUYWdOYW1lKCJkaXYiKTsKCiAgICBmb3IgKHZhciBpID0gMDsgaSA8IGRpdnMubGVuZ3RoOyArK2kpCiAgICB7CiAgICAgIGRpdiA9IGRpdnMuaXRlbShpKTsKCiAgICAgIGlmICh0aGlzLmhhc19jbGFzcyhkaXYsICJoYW5kb3V0IikpCiAgICAgIHsKICAgICAgICAvLyBhZGQgbm90ZSB0byBjb2xsZWN0aW9uCiAgICAgICAgbm90ZXNbbm90ZXMubGVuZ3RoXSA9IGRpdjsKCiAgICAgICAgLy8gYW5kIGhpZGUgaXQKICAgICAgICB0aGlzLmFkZF9jbGFzcyhkaXYsICJoaWRkZW4iKTsKICAgICAgfQogICAgfQoKICAgIHRoaXMubm90ZXMgPSBub3RlczsKICB9LAoKICAvLyByZXR1cm4gbmV3IGFycmF5IG9mIGFsbCA8ZGl2IGNsYXNzPSJiYWNrZ3JvdW5kIj4KICAvLyBpbmNsdWRpbmcgbmFtZWQgYmFja2dyb3VuZHMgZS5nLiBjbGFzcz0iYmFja2dyb3VuZCB0aXRsZXBhZ2UiCiAgY29sbGVjdF9iYWNrZ3JvdW5kczogZnVuY3Rpb24gKCkgewogICAgdmFyIGJhY2tncm91bmRzID0gbmV3IEFycmF5KCk7CiAgICB2YXIgZGl2cyA9IGRvY3VtZW50LmJvZHkuZ2V0RWxlbWVudHNCeVRhZ05hbWUoImRpdiIpOwoKICAgIGZvciAodmFyIGkgPSAwOyBpIDwgZGl2cy5sZW5ndGg7ICsraSkKICAgIHsKICAgICAgZGl2ID0gZGl2cy5pdGVtKGkpOwoKICAgICAgaWYgKHRoaXMuaGFzX2NsYXNzKGRpdiwgImJhY2tncm91bmQiKSkKICAgICAgewogICAgICAgIC8vIGFkZCBiYWNrZ3JvdW5kIHRvIGNvbGxlY3Rpb24KICAgICAgICBiYWNrZ3JvdW5kc1tiYWNrZ3JvdW5kcy5sZW5ndGhdID0gZGl2OwoKICAgICAgICAvLyBhbmQgaGlkZSBpdAogICAgICAgIHRoaXMuYWRkX2NsYXNzKGRpdiwgImhpZGRlbiIpOwogICAgICB9CiAgICB9CgogICAgdGhpcy5iYWNrZ3JvdW5kcyA9IGJhY2tncm91bmRzOwogIH0sCgogIC8vIHNldCBjbGljayBoYW5kbGVycyBvbiBhbGwgYW5jaG9ycwogIHBhdGNoX2FuY2hvcnM6IGZ1bmN0aW9uICgpIHsKICAgIHZhciBzZWxmID0gdzNjX3NsaWR5OwogICAgdmFyIGhhbmRsZXIgPSBmdW5jdGlvbiAoZXZlbnQpIHsKICAgICAgLy8gY29tcGFyZSB0aGlzLmhyZWYgd2l0aCBsb2NhdGlvbi5ocmVmCiAgICAgIC8vIGZvciBsaW5rIHRvIGFub3RoZXIgc2xpZGUgaW4gdGhpcyBkb2MKCiAgICAgIGlmIChzZWxmLnBhZ2VfYWRkcmVzcyh0aGlzLmhyZWYpID09IHNlbGYucGFnZV9hZGRyZXNzKGxvY2F0aW9uLmhyZWYpKQogICAgICB7CiAgICAgICAgLy8geWVzLCBzbyBmaW5kIG5ldyBzbGlkZSBudW1iZXIKICAgICAgICB2YXIgbmV3c2xpZGVudW0gPSBzZWxmLmZpbmRfc2xpZGVfbnVtYmVyKHRoaXMuaHJlZik7CgogICAgICAgIGlmIChuZXdzbGlkZW51bSAhPSBzZWxmLnNsaWRlX251bWJlcikKICAgICAgICB7CiAgICAgICAgICB2YXIgc2xpZGUgPSBzZWxmLnNsaWRlc1tzZWxmLnNsaWRlX251bWJlcl07CiAgICAgICAgICBzZWxmLmhpZGVfc2xpZGUoc2xpZGUpOwogICAgICAgICAgc2VsZi5zbGlkZV9udW1iZXIgPSBuZXdzbGlkZW51bTsKICAgICAgICAgIHNsaWRlID0gc2VsZi5zbGlkZXNbc2VsZi5zbGlkZV9udW1iZXJdOwogICAgICAgICAgc2VsZi5zaG93X3NsaWRlKHNsaWRlKTsKICAgICAgICAgIHNlbGYuc2V0X2xvY2F0aW9uKCk7CiAgICAgICAgfQogICAgICB9CiAgICAgIGVsc2UKICAgICAgICB3M2Nfc2xpZHkuc3RvcF9wcm9wYWdhdGlvbihldmVudCk7CgovLyAgICAgIGVsc2UgaWYgKHRoaXMudGFyZ2V0ID09IG51bGwpCi8vICAgICAgICBsb2NhdGlvbi5ocmVmID0gdGhpcy5ocmVmOwoKICAgICAgdGhpcy5ibHVyKCk7CiAgICAgIHNlbGYuZGlzYWJsZV9zbGlkZV9jbGljayA9IHRydWU7CiAgICB9OwoKICAgIHZhciBhbmNob3JzID0gZG9jdW1lbnQuYm9keS5nZXRFbGVtZW50c0J5VGFnTmFtZSgiYSIpOwoKICAgIGZvciAodmFyIGkgPSAwOyBpIDwgYW5jaG9ycy5sZW5ndGg7ICsraSkKICAgIHsKICAgICAgaWYgKHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKQogICAgICAgIGFuY2hvcnNbaV0uYWRkRXZlbnRMaXN0ZW5lcigiY2xpY2siLCBoYW5kbGVyLCBmYWxzZSk7CiAgICAgIGVsc2UKICAgICAgICBhbmNob3JzW2ldLmF0dGFjaEV2ZW50KCJvbmNsaWNrIiwgaGFuZGxlcik7CiAgICB9CiAgfSwKCiAgLy8gIyMjIENIRUNLIE1FICMjIyBzZWUgd2hpY2ggZnVuY3Rpb25zIGFyZSBpbnZva2VkIHZpYSBzZXRUaW1lb3V0CiAgLy8gZWl0aGVyIGRpcmVjdGx5IG9yIGluZGlyZWN0bHkgZm9yIHVzZSBvZiB3M2Nfc2xpZHkgdnMgdGhpcwogIHNob3dfc2xpZGVfbnVtYmVyOiBmdW5jdGlvbiAoKSB7CiAgICB2YXIgdGltZXIgPSB3M2Nfc2xpZHkuZ2V0X3RpbWVyKCk7CiAgICB3M2Nfc2xpZHkuc2xpZGVfbnVtYmVyX2VsZW1lbnQuaW5uZXJIVE1MID0gdGltZXIgKyB3M2Nfc2xpZHkubG9jYWxpemUoInNsaWRlIikgKyAiICIgKwogICAgICAgICAgICh3M2Nfc2xpZHkuc2xpZGVfbnVtYmVyICsgMSkgKyAiLyIgKyB3M2Nfc2xpZHkuc2xpZGVzLmxlbmd0aDsKICB9LAoKICAvLyBldmVyeSAyMDBtUyBjaGVjayBpZiB0aGUgbG9jYXRpb24gaGFzIGJlZW4gY2hhbmdlZCBhcyBhCiAgLy8gcmVzdWx0IG9mIHRoZSB1c2VyIGFjdGl2YXRpbmcgdGhlIEJhY2sgYnV0dG9uL21lbnUgaXRlbQogIC8vIGRvZXNuJ3Qgd29yayBmb3IgT3BlcmEgPCA5LjUKICBjaGVja19sb2NhdGlvbjogZnVuY3Rpb24gKCkgewogICAgdmFyIGhhc2ggPSBsb2NhdGlvbi5oYXNoOwoKICAgIGlmICh3M2Nfc2xpZHkuc2xpZGVfbnVtYmVyID4gMCAmJiAoaGFzaCA9PSAiIiB8fCBoYXNoID09ICIjIikpCiAgICAgIHczY19zbGlkeS5nb3RvX3NsaWRlKDApOwogICAgZWxzZSBpZiAoaGFzaC5sZW5ndGggPiAyICYmIGhhc2ggIT0gIiMoIisodzNjX3NsaWR5LnNsaWRlX251bWJlcisxKSsiKSIpCiAgICB7CiAgICAgIHZhciBudW0gPSBwYXJzZUludChsb2NhdGlvbi5oYXNoLnN1YnN0cigyKSk7CgogICAgICBpZiAoIWlzTmFOKG51bSkpCiAgICAgICAgdzNjX3NsaWR5LmdvdG9fc2xpZGUobnVtLTEpOwogICAgfQoKICAgIGlmICh3M2Nfc2xpZHkudGltZV9sZWZ0ICYmIHczY19zbGlkeS5zbGlkZV9udW1iZXIgPiAwKQogICAgewogICAgICB3M2Nfc2xpZHkuc2hvd19zbGlkZV9udW1iZXIoKTsKCiAgICAgIGlmICh3M2Nfc2xpZHkudGltZV9sZWZ0ID4gMCkKICAgICAgICB3M2Nfc2xpZHkudGltZV9sZWZ0IC09IDIwMDsKICAgIH0gCiAgfSwKCiAgZ2V0X3RpbWVyOiBmdW5jdGlvbiAoKSB7CiAgICB2YXIgdGltZXIgPSAiIjsKICAgIGlmICh3M2Nfc2xpZHkudGltZV9sZWZ0KQogICAgewogICAgICB2YXIgbWlucywgc2VjczsKICAgICAgc2VjcyA9IE1hdGguZmxvb3IodzNjX3NsaWR5LnRpbWVfbGVmdC8xMDAwKTsKICAgICAgbWlucyA9IE1hdGguZmxvb3Ioc2VjcyAvIDYwKTsKICAgICAgc2VjcyA9IHNlY3MgJSA2MDsKICAgICAgdGltZXIgPSAobWlucyA/IG1pbnMrIm0iIDogIiIpICsgc2VjcyArICJzICI7CiAgICB9CgogICAgcmV0dXJuIHRpbWVyOwogIH0sCgogIC8vIHRoaXMgZG9lc24ndCBwdXNoIGxvY2F0aW9uIG9udG8gaGlzdG9yeSBzdGFjayBmb3IgSUUKICAvLyBmb3Igd2hpY2ggYSBoaWRkZW4gaWZyYW1lIGhhY2sgaXMgbmVlZGVkOiBsb2FkIHBhZ2UgaW50bwogIC8vIHRoZSBpZnJhbWUgd2l0aCBzY3JpcHQgdGhhdCBzZXQncyBwYXJlbnQncyBsb2NhdGlvbi5oYXNoCiAgLy8gYnV0IHRoYXQgd29uJ3Qgd29yayBmb3Igc3RhbmRhbG9uZSB1c2UgdW5sZXNzIHdlIGNhbgogIC8vIGNyZWF0ZSB0aGUgcGFnZSBkeW5hbWljYWxseSB2aWEgYSBqYXZhc2NyaXB0OiBVUkwKICAvLyAjIyMgdXNlIGhpc3RvcnkucHVzaFN0YXRlIGlmIGF2YWlsYWJsZQogIHNldF9sb2NhdGlvbjogZnVuY3Rpb24gKCkgewogICAgIHZhciB1cmkgPSB3M2Nfc2xpZHkucGFnZV9hZGRyZXNzKGxvY2F0aW9uLmhyZWYpOwogICAgIHZhciBoYXNoID0gIiMoIiArICh3M2Nfc2xpZHkuc2xpZGVfbnVtYmVyKzEpICsgIikiOwoKICAgICBpZiAodzNjX3NsaWR5LnNsaWRlX251bWJlciA+PSAwKQogICAgICAgdXJpID0gdXJpICsgaGFzaDsKCiAgICAgaWYgKHR5cGVvZihoaXN0b3J5LnB1c2hTdGF0ZSkgIT0gInVuZGVmaW5lZCIgJiYgbG9jYXRpb24ucHJvdG9jb2wgIT09ICJmaWxlOiIpCiAgICAgewogICAgICAgZG9jdW1lbnQudGl0bGUgPSB3M2Nfc2xpZHkudGl0bGUgKyAiICgiICsgKHczY19zbGlkeS5zbGlkZV9udW1iZXIrMSkgKyAiKSI7CiAgICAgICBoaXN0b3J5LnB1c2hTdGF0ZSgwLCBkb2N1bWVudC50aXRsZSwgaGFzaCk7CiAgICAgICB3M2Nfc2xpZHkuc2hvd19zbGlkZV9udW1iZXIoKTsKICAgICAgIHczY19zbGlkeS5ub3RpZnlfb2JzZXJ2ZXJzKCk7CiAgICAgICByZXR1cm47CiAgICAgfQoKICAgICBpZiAodzNjX3NsaWR5LmllICYmICh3M2Nfc2xpZHkuaWU2IHx8IHczY19zbGlkeS5pZTcpKQogICAgICAgdzNjX3NsaWR5LnB1c2hfaGFzaChoYXNoKTsKCiAgICAgaWYgKHVyaSAhPSBsb2NhdGlvbi5ocmVmKSAvLyAmJiAha2h0bWwKICAgICAgICBsb2NhdGlvbi5ocmVmID0gdXJpOwoKICAgICBpZiAodGhpcy5raHRtbCkKICAgICAgICBoYXNoID0gIigiICsgKHczY19zbGlkeS5zbGlkZV9udW1iZXIrMSkgKyAiKSI7CgogICAgIGlmICghdGhpcy5pZSAmJiBsb2NhdGlvbi5oYXNoICE9IGhhc2ggJiYgbG9jYXRpb24uaGFzaCAhPSAiIikKICAgICAgIGxvY2F0aW9uLmhhc2ggPSBoYXNoOwoKICAgICBkb2N1bWVudC50aXRsZSA9IHczY19zbGlkeS50aXRsZSArICIgKCIgKyAodzNjX3NsaWR5LnNsaWRlX251bWJlcisxKSArICIpIjsKICAgICB3M2Nfc2xpZHkuc2hvd19zbGlkZV9udW1iZXIoKTsKICAgICB3M2Nfc2xpZHkubm90aWZ5X29ic2VydmVycygpOwogIH0sCgogIG5vdGlmeV9vYnNlcnZlcnM6IGZ1bmN0aW9uICgpCiAgewogICAgdmFyIHNsaWRlID0gdGhpcy5zbGlkZXNbdGhpcy5zbGlkZV9udW1iZXJdOwoKICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdGhpcy5vYnNlcnZlcnMubGVuZ3RoOyArK2kpCiAgICAgIHRoaXMub2JzZXJ2ZXJzW2ldKHRoaXMuc2xpZGVfbnVtYmVyKzEsIHRoaXMuZmluZF9oZWFkaW5nKHNsaWRlKS5pbm5lclRleHQsIGxvY2F0aW9uLmhyZWYpOwogIH0sCgogIGFkZF9vYnNlcnZlcjogZnVuY3Rpb24gKG9ic2VydmVyKQogIHsKICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdGhpcy5vYnNlcnZlcnMubGVuZ3RoOyArK2kpCiAgICB7CiAgICAgIGlmIChvYnNlcnZlciA9PSB0aGlzLm9ic2VydmVyc1tpXSkKICAgICAgICByZXR1cm47CiAgICB9CgogICAgdGhpcy5vYnNlcnZlcnMucHVzaChvYnNlcnZlcik7CiAgfSwKCiAgcmVtb3ZlX29ic2VydmVyOiBmdW5jdGlvbiAobykKICB7CiAgICBmb3IgKHZhciBpID0gMDsgaSA8IHRoaXMub2JzZXJ2ZXJzLmxlbmd0aDsgKytpKQogICAgewogICAgICBpZiAob2JzZXJ2ZXIgPT0gdGhpcy5vYnNlcnZlcnNbaV0pCiAgICAgIHsKICAgICAgICB0aGlzLm9ic2VydmVycy5zcGxpY2UoaSwxKTsKICAgICAgICBicmVhazsKICAgICAgfQogICAgfQogIH0sCgogIHBhZ2VfYWRkcmVzczogZnVuY3Rpb24gKHVyaSkgewogICAgdmFyIGkgPSB1cmkuaW5kZXhPZigiIyIpOwoKICAgIGlmIChpIDwgMCkKICAgICAgaSA9IHVyaS5pbmRleE9mKCIlMjMiKTsKCiAgICAvLyBjaGVjayBpZiBhbmNob3IgaXMgZW50aXJlIHBhZ2UKCiAgICBpZiAoaSA8IDApCiAgICAgIHJldHVybiB1cmk7ICAvLyB5ZXMKCiAgICByZXR1cm4gdXJpLnN1YnN0cigwLCBpKTsKICB9LAoKICAvLyBvbmx5IHVzZWQgZm9yIElFNiBhbmQgSUU3CiAgb25fZnJhbWVfbG9hZGVkOiBmdW5jdGlvbiAoaGFzaCkgewogICAgbG9jYXRpb24uaGFzaCA9IGhhc2g7CiAgICB2YXIgdXJpID0gdzNjX3NsaWR5LnBhZ2VfYWRkcmVzcyhsb2NhdGlvbi5ocmVmKTsKICAgIGxvY2F0aW9uLmhyZWYgPSB1cmkgKyBoYXNoOwogIH0sCgogIC8vIGhpc3RvcnkgaGFjayB3aXRoIHRoYW5rcyB0byBCZXJ0cmFuZCBMZSBSb3kKICBwdXNoX2hhc2g6IGZ1bmN0aW9uIChoYXNoKSB7CiAgICBpZiAoaGFzaCA9PSAiIikgaGFzaCA9ICIjKDEpIjsKICAgICAgd2luZG93LmxvY2F0aW9uLmhhc2ggPSBoYXNoOwoKICAgIHZhciBkb2MgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgiaGlzdG9yeUZyYW1lIikuY29udGVudFdpbmRvdy5kb2N1bWVudDsKICAgIGRvYy5vcGVuKCJqYXZhc2NyaXB0Oic8aHRtbD48L2h0bWw+JyIpOwogICAgZG9jLndyaXRlKCI8aHRtbD48aGVhZD48c2NyaXB0IHR5cGU9XCJ0ZXh0L2phdmFzY3JpcHRcIj53aW5kb3cucGFyZW50LnczY19zbGlkeS5vbl9mcmFtZV9sb2FkZWQoJyIrCiAgICAgIChoYXNoKSArICInKTs8L3NjcmlwdD48L2hlYWQ+PGJvZHk+aGVsbG8gbXVtPC9ib2R5PjwvaHRtbD4iKTsKICAgICAgZG9jLmNsb3NlKCk7CiAgfSwKCiAgLy8gZmluZCBjdXJyZW50IHNsaWRlIGJhc2VkIHVwb24gbG9jYXRpb24KICAvLyBmaXJzdCBmaW5kIHRhcmdldCBhbmNob3IgYW5kIHRoZW4gbG9vawogIC8vIGZvciBhc3NvY2lhdGVkIGRpdiBlbGVtZW50IGVuY2xvc2luZyBpdAogIC8vIGZpbmFsbHkgbWFwIHRoYXQgdG8gc2xpZGUgbnVtYmVyCiAgZmluZF9zbGlkZV9udW1iZXI6IGZ1bmN0aW9uICh1cmkpIHsKICAgIC8vIGZpcnN0IGdldCBhbmNob3IgZnJvbSBwYWdlIGxvY2F0aW9uCgogICAgdmFyIGkgPSB1cmkuaW5kZXhPZigiIyIpOwoKICAgIC8vIGNoZWNrIGlmIGFuY2hvciBpcyBlbnRpcmUgcGFnZQogICAgaWYgKGkgPCAwKQogICAgICByZXR1cm4gMDsgIC8vIHllcwoKICAgIHZhciBhbmNob3IgPSB1bmVzY2FwZSh1cmkuc3Vic3RyKGkrMSkpOwoKICAgIC8vIG5vdyB1c2UgYW5jaG9yIGFzIFhNTCBJRCB0byBmaW5kIHRhcmdldAogICAgdmFyIHRhcmdldCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGFuY2hvcik7CgogICAgaWYgKCF0YXJnZXQpCiAgICB7CiAgICAgIC8vIGRvZXMgYW5jaG9yIGxvb2sgbGlrZSAiKDIpIiBmb3Igc2xpZGUgMiA/PwogICAgICAvLyB3aGVyZSBmaXJzdCBzbGlkZSBpcyAoMSkKICAgICAgdmFyIHJlID0gL1woKFxkKStcKS87CgogICAgICBpZiAoYW5jaG9yLm1hdGNoKHJlKSkKICAgICAgewogICAgICAgIHZhciBudW0gPSBwYXJzZUludChhbmNob3Iuc3Vic3RyaW5nKDEsIGFuY2hvci5sZW5ndGgtMSkpOwoKICAgICAgICBpZiAobnVtID4gdGhpcy5zbGlkZXMubGVuZ3RoKQogICAgICAgICAgbnVtID0gMTsKCiAgICAgICAgaWYgKC0tbnVtIDwgMCkKICAgICAgICAgIG51bSA9IDA7CgogICAgICAgIHJldHVybiBudW07CiAgICAgIH0KCiAgICAgIC8vIGFjY2VwdCBbMl0gZm9yIGJhY2t3YXJkcyBjb21wYXRpYmlsaXR5CiAgICAgIHJlID0gL1xbKFxkKStcXS87CgogICAgICBpZiAoYW5jaG9yLm1hdGNoKHJlKSkKICAgICAgewogICAgICAgICB2YXIgbnVtID0gcGFyc2VJbnQoYW5jaG9yLnN1YnN0cmluZygxLCBhbmNob3IubGVuZ3RoLTEpKTsKCiAgICAgICAgIGlmIChudW0gPiB0aGlzLnNsaWRlcy5sZW5ndGgpCiAgICAgICAgICAgIG51bSA9IDE7CgogICAgICAgICBpZiAoLS1udW0gPCAwKQogICAgICAgICAgICBudW0gPSAwOwoKICAgICAgICAgcmV0dXJuIG51bTsKICAgICAgfQoKICAgICAgLy8gb2ggZGVhciB1bmtub3duIGFuY2hvcgogICAgICByZXR1cm4gMDsKICAgIH0KCiAgICAvLyBzZWFyY2ggZm9yIGVuY2xvc2luZyBzbGlkZQoKICAgIHdoaWxlICh0cnVlKQogICAgewogICAgICAvLyBicm93c2VyIGNvZXJjZXMgaHRtbCBlbGVtZW50cyB0byB1cHBlcmNhc2UhCiAgICAgIGlmICh0YXJnZXQubm9kZU5hbWUudG9Mb3dlckNhc2UoKSA9PSAiZGl2IiAmJgogICAgICAgICAgICB0aGlzLmhhc19jbGFzcyh0YXJnZXQsICJzbGlkZSIpKQogICAgICB7CiAgICAgICAgLy8gZm91bmQgdGhlIHNsaWRlIGVsZW1lbnQKICAgICAgICBicmVhazsKICAgICAgfQoKICAgICAgLy8gb3RoZXJ3aXNlIHRyeSBwYXJlbnQgZWxlbWVudCBpZiBhbnkKCiAgICAgIHRhcmdldCA9IHRhcmdldC5wYXJlbnROb2RlOwoKICAgICAgaWYgKCF0YXJnZXQpCiAgICAgIHsKICAgICAgICByZXR1cm4gMDsgICAvLyBubyBsdWNrIQogICAgICB9CiAgICB9OwoKICAgIGZvciAoaSA9IDA7IGkgPCBzbGlkZXMubGVuZ3RoOyArK2kpCiAgICB7CiAgICAgIGlmIChzbGlkZXNbaV0gPT0gdGFyZ2V0KQogICAgICAgIHJldHVybiBpOyAgLy8gc3VjY2VzcwogICAgfQoKICAgIC8vIG9oIGRlYXIgc3RpbGwgbm8gbHVjawogICAgcmV0dXJuIDA7CiAgfSwKCiAgcHJldmlvdXNfc2xpZGU6IGZ1bmN0aW9uIChpbmNyZW1lbnRhbCkgewogICAgaWYgKCF3M2Nfc2xpZHkudmlld19hbGwpCiAgICB7CiAgICAgIHZhciBzbGlkZTsKCiAgICAgIGlmICgoaW5jcmVtZW50YWwgfHwgdzNjX3NsaWR5LnNsaWRlX251bWJlciA9PSAwKSAmJiB3M2Nfc2xpZHkubGFzdF9zaG93biAhPSBudWxsKQogICAgICB7CiAgICAgICAgdzNjX3NsaWR5Lmxhc3Rfc2hvd24gPSB3M2Nfc2xpZHkuaGlkZV9wcmV2aW91c19pdGVtKHczY19zbGlkeS5sYXN0X3Nob3duKTsKICAgICAgICB3M2Nfc2xpZHkuc2V0X2Vvc19zdGF0dXMoZmFsc2UpOwogICAgICB9CiAgICAgIGVsc2UgaWYgKHczY19zbGlkeS5zbGlkZV9udW1iZXIgPiAwKQogICAgICB7CiAgICAgICAgc2xpZGUgPSB3M2Nfc2xpZHkuc2xpZGVzW3czY19zbGlkeS5zbGlkZV9udW1iZXJdOwogICAgICAgIHczY19zbGlkeS5oaWRlX3NsaWRlKHNsaWRlKTsKCiAgICAgICAgdzNjX3NsaWR5LnNsaWRlX251bWJlciA9IHczY19zbGlkeS5zbGlkZV9udW1iZXIgLSAxOwogICAgICAgIHNsaWRlID0gdzNjX3NsaWR5LnNsaWRlc1t3M2Nfc2xpZHkuc2xpZGVfbnVtYmVyXTsKICAgICAgICB3M2Nfc2xpZHkuc2V0X3Zpc2liaWxpdHlfYWxsX2luY3JlbWVudGFsKCJ2aXNpYmxlIik7CiAgICAgICAgdzNjX3NsaWR5Lmxhc3Rfc2hvd24gPSB3M2Nfc2xpZHkucHJldmlvdXNfaW5jcmVtZW50YWxfaXRlbShudWxsKTsKICAgICAgICB3M2Nfc2xpZHkuc2V0X2Vvc19zdGF0dXModHJ1ZSk7CiAgICAgICAgdzNjX3NsaWR5LnNob3dfc2xpZGUoc2xpZGUpOwogICAgICB9CgogICAgICB3M2Nfc2xpZHkuc2V0X2xvY2F0aW9uKCk7CgogICAgICBpZiAoIXczY19zbGlkeS5uc19wb3MpCiAgICAgICAgdzNjX3NsaWR5LnJlZnJlc2hfdG9vbGJhcigyMDApOwogICAgfQogIH0sCgogIG5leHRfc2xpZGU6IGZ1bmN0aW9uIChpbmNyZW1lbnRhbCkgewogICAgaWYgKCF3M2Nfc2xpZHkudmlld19hbGwpCiAgICB7CiAgICAgIHZhciBzbGlkZSwgbGFzdCA9IHczY19zbGlkeS5sYXN0X3Nob3duOwoKICAgICAgaWYgKGluY3JlbWVudGFsIHx8IHczY19zbGlkeS5zbGlkZV9udW1iZXIgPT0gdzNjX3NsaWR5LnNsaWRlcy5sZW5ndGggLSAxKQogICAgICAgICB3M2Nfc2xpZHkubGFzdF9zaG93biA9IHczY19zbGlkeS5yZXZlYWxfbmV4dF9pdGVtKHczY19zbGlkeS5sYXN0X3Nob3duKTsKCiAgICAgIGlmICgoIWluY3JlbWVudGFsIHx8IHczY19zbGlkeS5sYXN0X3Nob3duID09IG51bGwpICYmCiAgICAgICAgICAgICB3M2Nfc2xpZHkuc2xpZGVfbnVtYmVyIDwgdzNjX3NsaWR5LnNsaWRlcy5sZW5ndGggLSAxKQogICAgICB7CiAgICAgICAgIHNsaWRlID0gdzNjX3NsaWR5LnNsaWRlc1t3M2Nfc2xpZHkuc2xpZGVfbnVtYmVyXTsKICAgICAgICAgdzNjX3NsaWR5LmhpZGVfc2xpZGUoc2xpZGUpOwoKICAgICAgICAgdzNjX3NsaWR5LnNsaWRlX251bWJlciA9IHczY19zbGlkeS5zbGlkZV9udW1iZXIgKyAxOwogICAgICAgICBzbGlkZSA9IHczY19zbGlkeS5zbGlkZXNbdzNjX3NsaWR5LnNsaWRlX251bWJlcl07CiAgICAgICAgIHczY19zbGlkeS5sYXN0X3Nob3duID0gbnVsbDsKICAgICAgICAgdzNjX3NsaWR5LnNldF92aXNpYmlsaXR5X2FsbF9pbmNyZW1lbnRhbCgiaGlkZGVuIik7CiAgICAgICAgIHczY19zbGlkeS5zaG93X3NsaWRlKHNsaWRlKTsKICAgICAgfQogICAgICBlbHNlIGlmICghdzNjX3NsaWR5Lmxhc3Rfc2hvd24pCiAgICAgIHsKICAgICAgICAgaWYgKGxhc3QgJiYgaW5jcmVtZW50YWwpCiAgICAgICAgICAgdzNjX3NsaWR5Lmxhc3Rfc2hvd24gPSBsYXN0OwogICAgICB9CgogICAgICB3M2Nfc2xpZHkuc2V0X2xvY2F0aW9uKCk7CgogICAgICB3M2Nfc2xpZHkuc2V0X2Vvc19zdGF0dXMoIXczY19zbGlkeS5uZXh0X2luY3JlbWVudGFsX2l0ZW0odzNjX3NsaWR5Lmxhc3Rfc2hvd24pKTsKCiAgICAgIGlmICghdzNjX3NsaWR5Lm5zX3BvcykKICAgICAgICAgdzNjX3NsaWR5LnJlZnJlc2hfdG9vbGJhcigyMDApOwogICAgIH0KICB9LAoKICAvLyB0byBmaXJzdCBzbGlkZSB3aXRoIG5vdGhpbmcgcmV2ZWFsZWQKICAvLyBpLmUuIHN0YXRlIGF0IHN0YXJ0IG9mIHByZXNlbnRhdGlvbgogIGZpcnN0X3NsaWRlOiBmdW5jdGlvbiAoKSB7CiAgICAgaWYgKCF3M2Nfc2xpZHkudmlld19hbGwpCiAgICAgewogICAgICAgdmFyIHNsaWRlOwoKICAgICAgIGlmICh3M2Nfc2xpZHkuc2xpZGVfbnVtYmVyICE9IDApCiAgICAgICB7CiAgICAgICAgIHNsaWRlID0gdzNjX3NsaWR5LnNsaWRlc1t3M2Nfc2xpZHkuc2xpZGVfbnVtYmVyXTsKICAgICAgICAgdzNjX3NsaWR5LmhpZGVfc2xpZGUoc2xpZGUpOwoKICAgICAgICAgdzNjX3NsaWR5LnNsaWRlX251bWJlciA9IDA7CiAgICAgICAgIHNsaWRlID0gdzNjX3NsaWR5LnNsaWRlc1t3M2Nfc2xpZHkuc2xpZGVfbnVtYmVyXTsKICAgICAgICAgdzNjX3NsaWR5Lmxhc3Rfc2hvd24gPSBudWxsOwogICAgICAgICB3M2Nfc2xpZHkuc2V0X3Zpc2liaWxpdHlfYWxsX2luY3JlbWVudGFsKCJoaWRkZW4iKTsKICAgICAgICAgdzNjX3NsaWR5LnNob3dfc2xpZGUoc2xpZGUpOwogICAgICAgfQoKICAgICAgIHczY19zbGlkeS5zZXRfZW9zX3N0YXR1cygKICAgICAgICAgIXczY19zbGlkeS5uZXh0X2luY3JlbWVudGFsX2l0ZW0odzNjX3NsaWR5Lmxhc3Rfc2hvd24pKTsKICAgICAgIHczY19zbGlkeS5zZXRfbG9jYXRpb24oKTsKICAgICB9CiAgfSwKCiAgLy8gZ290byBsYXN0IHNsaWRlIHdpdGggZXZlcnl0aGluZyByZXZlYWxlZAogIC8vIGkuZS4gc3RhdGUgYXQgZW5kIG9mIHByZXNlbnRhdGlvbgogIGxhc3Rfc2xpZGU6IGZ1bmN0aW9uICgpIHsKICAgIGlmICghdzNjX3NsaWR5LnZpZXdfYWxsKQogICAgewogICAgICB2YXIgc2xpZGU7CgogICAgICB3M2Nfc2xpZHkubGFzdF9zaG93biA9IG51bGw7IC8vcmV2ZWFsTmV4dEl0ZW0obGFzdFNob3duKTsKCiAgICAgIGlmICh3M2Nfc2xpZHkubGFzdF9zaG93biA9PSBudWxsICYmCiAgICAgICAgICB3M2Nfc2xpZHkuc2xpZGVfbnVtYmVyIDwgdzNjX3NsaWR5LnNsaWRlcy5sZW5ndGggLSAxKQogICAgICB7CiAgICAgICAgIHNsaWRlID0gdzNjX3NsaWR5LnNsaWRlc1t3M2Nfc2xpZHkuc2xpZGVfbnVtYmVyXTsKICAgICAgICAgdzNjX3NsaWR5LmhpZGVfc2xpZGUoc2xpZGUpOwogICAgICAgICB3M2Nfc2xpZHkuc2xpZGVfbnVtYmVyID0gdzNjX3NsaWR5LnNsaWRlcy5sZW5ndGggLSAxOwogICAgICAgICBzbGlkZSA9IHczY19zbGlkeS5zbGlkZXNbdzNjX3NsaWR5LnNsaWRlX251bWJlcl07CiAgICAgICAgIHczY19zbGlkeS5zZXRfdmlzaWJpbGl0eV9hbGxfaW5jcmVtZW50YWwoInZpc2libGUiKTsKICAgICAgICAgdzNjX3NsaWR5Lmxhc3Rfc2hvd24gPSB3M2Nfc2xpZHkucHJldmlvdXNfaW5jcmVtZW50YWxfaXRlbShudWxsKTsKCiAgICAgICAgIHczY19zbGlkeS5zaG93X3NsaWRlKHNsaWRlKTsKICAgICAgfQogICAgICBlbHNlCiAgICAgIHsKICAgICAgICAgdzNjX3NsaWR5LnNldF92aXNpYmlsaXR5X2FsbF9pbmNyZW1lbnRhbCgidmlzaWJsZSIpOwogICAgICAgICB3M2Nfc2xpZHkubGFzdF9zaG93biA9IHczY19zbGlkeS5wcmV2aW91c19pbmNyZW1lbnRhbF9pdGVtKG51bGwpOwogICAgICB9CgogICAgICB3M2Nfc2xpZHkuc2V0X2Vvc19zdGF0dXModHJ1ZSk7CiAgICAgIHczY19zbGlkeS5zZXRfbG9jYXRpb24oKTsKICAgIH0KICB9LAoKCiAgLy8gIyMjIGNoZWNrIHRoaXMgYW5kIGNvbnNpZGVyIGFkZC9yZW1vdmUgY2xhc3MKICBzZXRfZW9zX3N0YXR1czogZnVuY3Rpb24gKHN0YXRlKSB7CiAgICBpZiAodGhpcy5lb3MpCiAgICAgIHRoaXMuZW9zLnN0eWxlLmNvbG9yID0gKHN0YXRlID8gInJnYigyNDAsMjQwLDI0MCkiIDogInJlZCIpOwogIH0sCgogIC8vIGZpcnN0IHNsaWRlIGlzIDAKICBnb3RvX3NsaWRlOiBmdW5jdGlvbiAobnVtKSB7CiAgICAvL2FsZXJ0KCJnb2luZyB0byBzbGlkZSAiICsgKG51bSsxKSk7CiAgICB2YXIgc2xpZGUgPSB3M2Nfc2xpZHkuc2xpZGVzW3czY19zbGlkeS5zbGlkZV9udW1iZXJdOwogICAgdzNjX3NsaWR5LmhpZGVfc2xpZGUoc2xpZGUpOwogICAgdzNjX3NsaWR5LnNsaWRlX251bWJlciA9IG51bTsKICAgIHNsaWRlID0gdzNjX3NsaWR5LnNsaWRlc1t3M2Nfc2xpZHkuc2xpZGVfbnVtYmVyXTsKICAgIHczY19zbGlkeS5sYXN0X3Nob3duID0gbnVsbDsKICAgIHczY19zbGlkeS5zZXRfdmlzaWJpbGl0eV9hbGxfaW5jcmVtZW50YWwoImhpZGRlbiIpOwogICAgdzNjX3NsaWR5LnNldF9lb3Nfc3RhdHVzKCF3M2Nfc2xpZHkubmV4dF9pbmNyZW1lbnRhbF9pdGVtKHczY19zbGlkeS5sYXN0X3Nob3duKSk7CiAgICBkb2N1bWVudC50aXRsZSA9IHczY19zbGlkeS50aXRsZSArICIgKCIgKyAodzNjX3NsaWR5LnNsaWRlX251bWJlcisxKSArICIpIjsKICAgIHczY19zbGlkeS5zaG93X3NsaWRlKHNsaWRlKTsKICAgIHczY19zbGlkeS5zaG93X3NsaWRlX251bWJlcigpOwogIH0sCgoKICBzaG93X3NsaWRlOiBmdW5jdGlvbiAoc2xpZGUpIHsKICAgIHRoaXMuc3luY19iYWNrZ3JvdW5kKHNsaWRlKTsKICAgIHRoaXMucmVtb3ZlX2NsYXNzKHNsaWRlLCAiaGlkZGVuIik7CgogICAgLy8gd29yayBhcm91bmQgSUU5IG9iamVjdCByZW5kZXJpbmcgYnVnCiAgICBzZXRUaW1lb3V0KCJ3aW5kb3cuc2Nyb2xsVG8oMCwwKTsiLCAxKTsKICB9LAoKICBoaWRlX3NsaWRlOiBmdW5jdGlvbiAoc2xpZGUpIHsKICAgIHRoaXMuYWRkX2NsYXNzKHNsaWRlLCAiaGlkZGVuIik7CiAgfSwKCiAgc2V0X2ZvY3VzOiBmdW5jdGlvbiAoZWxlbWVudCkKICB7CiAgICBpZiAoZWxlbWVudCkKICAgICAgZWxlbWVudC5mb2N1cygpOwogICAgZWxzZQogICAgewogICAgICB3M2Nfc2xpZHkuaGVscF9hbmNob3IuZm9jdXMoKTsKCiAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24oKSB7CiAgICAgICAgdzNjX3NsaWR5LmhlbHBfYW5jaG9yLmJsdXIoKTsKICAgICAgfSwgMSk7CiAgICB9CiAgfSwKCiAgLy8gc2hvdyBqdXN0IHRoZSBiYWNrZ3JvdW5kcyBwZXJ0aW5lbnQgdG8gdGhpcyBzbGlkZQogIC8vIHdoZW4gc2xpZGUgYmFja2dyb3VuZC1jb2xvciBpcyB0cmFuc3BhcmVudAogIC8vIHRoaXMgc2hvdWxkIG5vdyB3b3JrIHdpdGggcmdiYSBjb2xvciB2YWx1ZXMKICBzeW5jX2JhY2tncm91bmQ6IGZ1bmN0aW9uIChzbGlkZSkgewogICAgdmFyIGJhY2tncm91bmQ7CiAgICB2YXIgYmdDb2xvcjsKCiAgICBpZiAoc2xpZGUuY3VycmVudFN0eWxlKQogICAgICBiZ0NvbG9yID0gc2xpZGUuY3VycmVudFN0eWxlWyJiYWNrZ3JvdW5kQ29sb3IiXTsKICAgIGVsc2UgaWYgKGRvY3VtZW50LmRlZmF1bHRWaWV3KQogICAgewogICAgICB2YXIgc3R5bGVzID0gZG9jdW1lbnQuZGVmYXVsdFZpZXcuZ2V0Q29tcHV0ZWRTdHlsZShzbGlkZSxudWxsKTsKCiAgICAgIGlmIChzdHlsZXMpCiAgICAgICAgYmdDb2xvciA9IHN0eWxlcy5nZXRQcm9wZXJ0eVZhbHVlKCJiYWNrZ3JvdW5kLWNvbG9yIik7CiAgICAgIGVsc2UgLy8gYnJva2VuIGltcGxlbWVudGF0aW9uIHByb2JhYmx5IGR1ZSBTYWZhcmkgb3IgS29ucXVlcm9yCiAgICAgIHsKICAgICAgICAvL2FsZXJ0KCJkZWZlY3RpdmUgaW1wbGVtZW50YXRpb24gb2YgZ2V0Q29tcHV0ZWRTdHlsZSgpIik7CiAgICAgICAgYmdDb2xvciA9ICJ0cmFuc3BhcmVudCI7CiAgICAgIH0KICAgIH0KICAgIGVsc2UKICAgICAgYmdDb2xvciA9PSAidHJhbnNwYXJlbnQiOwoKICAgIGlmIChiZ0NvbG9yID09ICJ0cmFuc3BhcmVudCIgfHwKICAgICAgICBiZ0NvbG9yLmluZGV4T2YoInJnYmEiKSA+PSAwIHx8CiAgICAgICAgYmdDb2xvci5pbmRleE9mKCJvcGFjaXR5IikgPj0gMCkKICAgIHsKICAgICAgdmFyIHNsaWRlQ2xhc3MgPSB0aGlzLmdldF9jbGFzc19saXN0KHNsaWRlKTsKCiAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdGhpcy5iYWNrZ3JvdW5kcy5sZW5ndGg7IGkrKykKICAgICAgewogICAgICAgIGJhY2tncm91bmQgPSB0aGlzLmJhY2tncm91bmRzW2ldOwoKICAgICAgICB2YXIgYmdDbGFzcyA9IHRoaXMuZ2V0X2NsYXNzX2xpc3QoYmFja2dyb3VuZCk7CgogICAgICAgIGlmICh0aGlzLm1hdGNoaW5nX2JhY2tncm91bmQoc2xpZGVDbGFzcywgYmdDbGFzcykpCiAgICAgICAgICB0aGlzLnJlbW92ZV9jbGFzcyhiYWNrZ3JvdW5kLCAiaGlkZGVuIik7CiAgICAgICAgZWxzZQogICAgICAgICAgdGhpcy5hZGRfY2xhc3MoYmFja2dyb3VuZCwgImhpZGRlbiIpOwogICAgICB9CiAgICB9CiAgICBlbHNlIC8vIGZvcmNpYmx5IGhpZGUgYWxsIGJhY2tncm91bmRzCiAgICAgIHRoaXMuaGlkZV9iYWNrZ3JvdW5kcygpOwogIH0sCgogIGhpZGVfYmFja2dyb3VuZHM6IGZ1bmN0aW9uICgpIHsKICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdGhpcy5iYWNrZ3JvdW5kcy5sZW5ndGg7IGkrKykKICAgIHsKICAgICAgYmFja2dyb3VuZCA9IHRoaXMuYmFja2dyb3VuZHNbaV07CiAgICAgIHRoaXMuYWRkX2NsYXNzKGJhY2tncm91bmQsICJoaWRkZW4iKTsKICAgIH0KICB9LAoKICAvLyBjb21wYXJlIGNsYXNzZXMgZm9yIHNsaWRlIGFuZCBiYWNrZ3JvdW5kCiAgbWF0Y2hpbmdfYmFja2dyb3VuZDogZnVuY3Rpb24gKHNsaWRlQ2xhc3MsIGJnQ2xhc3MpIHsKICAgIHZhciBpLCBjb3VudCwgcGF0dGVybiwgcmVzdWx0OwoKICAgIC8vIGRlZmluZSBwYXR0ZXJuIGFzIHJlZ3VsYXIgZXhwcmVzc2lvbgogICAgcGF0dGVybiA9IC9cdysvZzsKCiAgICAvLyBjaGVjayBiYWNrZ3JvdW5kIGNsYXNzIG5hbWVzCiAgICByZXN1bHQgPSBiZ0NsYXNzLm1hdGNoKHBhdHRlcm4pOwoKICAgIGZvciAoaSA9IGNvdW50ID0gMDsgaSA8IHJlc3VsdC5sZW5ndGg7IGkrKykKICAgIHsKICAgICAgaWYgKHJlc3VsdFtpXSA9PSAiaGlkZGVuIikKICAgICAgICBjb250aW51ZTsKCiAgICAgIGlmIChyZXN1bHRbaV0gPT0gImJhY2tncm91bmQiKQoJY29udGludWU7CgogICAgICArK2NvdW50OwogICAgfQoKICAgIGlmIChjb3VudCA9PSAwKSAgLy8gZGVmYXVsdCBtYXRjaAogICAgICByZXR1cm4gdHJ1ZTsKCiAgICAvLyBjaGVjayBmb3IgbWF0Y2hlcyBhbmQgcGxhY2UgcmVzdWx0IGluIGFycmF5CiAgICByZXN1bHQgPSBzbGlkZUNsYXNzLm1hdGNoKHBhdHRlcm4pOwoKICAgIC8vIG5vdyBjaGVjayBpZiBkZXNpcmVkIG5hbWUgaXMgcHJlc2VudCBmb3IgYmFja2dyb3VuZAogICAgZm9yIChpID0gY291bnQgPSAwOyBpIDwgcmVzdWx0Lmxlbmd0aDsgaSsrKQogICAgewogICAgICBpZiAocmVzdWx0W2ldID09ICJoaWRkZW4iKQogICAgICAgIGNvbnRpbnVlOwoKICAgICAgaWYgKHRoaXMuaGFzX3Rva2VuKGJnQ2xhc3MsIHJlc3VsdFtpXSkpCiAgICAgICAgcmV0dXJuIHRydWU7CiAgICB9CgogICAgcmV0dXJuIGZhbHNlOwogIH0sCgogIHJlc2l6ZWQ6IGZ1bmN0aW9uICgpIHsKICAgICB2YXIgd2lkdGggPSAwOwoKICAgICBpZiAoIHR5cGVvZiggd2luZG93LmlubmVyV2lkdGggKSA9PSAnbnVtYmVyJyApCiAgICAgICB3aWR0aCA9IHdpbmRvdy5pbm5lcldpZHRoOyAgLy8gTm9uIElFIGJyb3dzZXIKICAgICBlbHNlIGlmIChkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQgJiYgZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LmNsaWVudFdpZHRoKQogICAgICAgd2lkdGggPSBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuY2xpZW50V2lkdGg7ICAvLyBJRTYKICAgICBlbHNlIGlmIChkb2N1bWVudC5ib2R5ICYmIGRvY3VtZW50LmJvZHkuY2xpZW50V2lkdGgpCiAgICAgICB3aWR0aCA9IGRvY3VtZW50LmJvZHkuY2xpZW50V2lkdGg7IC8vIElFNAoKICAgICB2YXIgaGVpZ2h0ID0gMDsKCiAgICAgaWYgKCB0eXBlb2YoIHdpbmRvdy5pbm5lckhlaWdodCApID09ICdudW1iZXInICkKICAgICAgIGhlaWdodCA9IHdpbmRvdy5pbm5lckhlaWdodDsgIC8vIE5vbiBJRSBicm93c2VyCiAgICAgZWxzZSBpZiAoZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50ICYmIGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5jbGllbnRIZWlnaHQpCiAgICAgICBoZWlnaHQgPSBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuY2xpZW50SGVpZ2h0OyAgLy8gSUU2CiAgICAgZWxzZSBpZiAoZG9jdW1lbnQuYm9keSAmJiBkb2N1bWVudC5ib2R5LmNsaWVudEhlaWdodCkKICAgICAgIGhlaWdodCA9IGRvY3VtZW50LmJvZHkuY2xpZW50SGVpZ2h0OyAvLyBJRTQKCiAgICAgaWYgKGhlaWdodCAmJiAod2lkdGgvaGVpZ2h0ID4gMS4wNSoxMDI0Lzc2OCkpCiAgICAgewogICAgICAgd2lkdGggPSBoZWlnaHQgKiAxMDI0LjAvNzY4OwogICAgIH0KCiAgICAgLy8gSUUgZmlyZXMgb25yZXNpemUgZXZlbiB3aGVuIG9ubHkgZm9udCBzaXplIGlzIGNoYW5nZWQhCiAgICAgLy8gc28gd2UgZG8gYSBjaGVjayB0byBhdm9pZCBibG9ja2luZyA8IGFuZCA+IGFjdGlvbnMKICAgICBpZiAod2lkdGggIT0gdzNjX3NsaWR5Lmxhc3Rfd2lkdGggfHwgaGVpZ2h0ICE9IHczY19zbGlkeS5sYXN0X2hlaWdodCkKICAgICB7CiAgICAgICBpZiAod2lkdGggPj0gMTEwMCkKICAgICAgICAgdzNjX3NsaWR5LnNpemVfaW5kZXggPSA1OyAgICAvLyA0CiAgICAgICBlbHNlIGlmICh3aWR0aCA+PSAxMDAwKQogICAgICAgICB3M2Nfc2xpZHkuc2l6ZV9pbmRleCA9IDQ7ICAgIC8vIDMKICAgICAgIGVsc2UgaWYgKHdpZHRoID49IDgwMCkKICAgICAgICAgdzNjX3NsaWR5LnNpemVfaW5kZXggPSAzOyAgICAvLyAyCiAgICAgICBlbHNlIGlmICh3aWR0aCA+PSA2MDApCiAgICAgICAgIHczY19zbGlkeS5zaXplX2luZGV4ID0gMjsgICAgLy8gMQogICAgICAgZWxzZSBpZiAod2lkdGgpCiAgICAgICAgIHczY19zbGlkeS5zaXplX2luZGV4ID0gMDsKCiAgICAgICAvLyBhZGQgaW4gZm9udCBzaXplIGFkanVzdG1lbnQgZnJvbSBtZXRhIGVsZW1lbnQgZS5nLgogICAgICAgLy8gPG1ldGEgbmFtZT0iZm9udC1zaXplLWFkanVzdG1lbnQiIGNvbnRlbnQ9Ii0yIiAvPgogICAgICAgLy8gdXNlZnVsIHdoZW4gc2xpZGVzIGhhdmUgdG9vIG11Y2ggY29udGVudCA7LSkKCiAgICAgICBpZiAoMCA8PSB3M2Nfc2xpZHkuc2l6ZV9pbmRleCArIHczY19zbGlkeS5zaXplX2FkanVzdG1lbnQgJiYKICAgICAgICAgICAgIHczY19zbGlkeS5zaXplX2luZGV4ICsgdzNjX3NsaWR5LnNpemVfYWRqdXN0bWVudCA8IHczY19zbGlkeS5zaXplcy5sZW5ndGgpCiAgICAgICAgIHczY19zbGlkeS5zaXplX2luZGV4ID0gdzNjX3NsaWR5LnNpemVfaW5kZXggKyB3M2Nfc2xpZHkuc2l6ZV9hZGp1c3RtZW50OwoKICAgICAgIC8vIGVuYWJsZXMgY3Jvc3MgYnJvd3NlciB1c2Ugb2YgcmVsYXRpdmUgd2lkdGgvaGVpZ2h0CiAgICAgICAvLyBvbiBvYmplY3QgZWxlbWVudHMgZm9yIHVzZSB3aXRoIFNWRyBhbmQgRmxhc2ggbWVkaWEKICAgICAgIHczY19zbGlkeS5hZGp1c3Rfb2JqZWN0X2RpbWVuc2lvbnMod2lkdGgsIGhlaWdodCk7CgogICAgICAgaWYgKGRvY3VtZW50LmJvZHkuc3R5bGUuZm9udFNpemUgIT0gdzNjX3NsaWR5LnNpemVzW3czY19zbGlkeS5zaXplX2luZGV4XSkKICAgICAgIHsKICAgICAgICAgZG9jdW1lbnQuYm9keS5zdHlsZS5mb250U2l6ZSA9IHczY19zbGlkeS5zaXplc1t3M2Nfc2xpZHkuc2l6ZV9pbmRleF07CiAgICAgICB9CgogICAgICAgdzNjX3NsaWR5Lmxhc3Rfd2lkdGggPSB3aWR0aDsKICAgICAgIHczY19zbGlkeS5sYXN0X2hlaWdodCA9IGhlaWdodDsKCiAgICAgICAvLyBmb3JjZSByZWZsb3cgdG8gd29yayBhcm91bmQgTW96aWxsYSBidWcKICAgICAgIGlmICh3M2Nfc2xpZHkubnNfcG9zKQogICAgICAgewogICAgICAgICB2YXIgc2xpZGUgPSB3M2Nfc2xpZHkuc2xpZGVzW3czY19zbGlkeS5zbGlkZV9udW1iZXJdOwogICAgICAgICB3M2Nfc2xpZHkuaGlkZV9zbGlkZShzbGlkZSk7CiAgICAgICAgIHczY19zbGlkeS5zaG93X3NsaWRlKHNsaWRlKTsKICAgICAgIH0KCiAgICAgICAvLyBmb3JjZSBjb3JyZWN0IHBvc2l0aW9uaW5nIG9mIHRvb2xiYXIKICAgICAgIHczY19zbGlkeS5yZWZyZXNoX3Rvb2xiYXIoMjAwKTsKICAgICB9CiAgfSwKCiAgc2Nyb2xsZWQ6IGZ1bmN0aW9uICgpIHsKICAgIGlmICh3M2Nfc2xpZHkudG9vbGJhciAmJiAhdzNjX3NsaWR5Lm5zX3BvcyAmJiAhdzNjX3NsaWR5LmllNykKICAgIHsKICAgICAgdzNjX3NsaWR5LmhhY2tfb2Zmc2V0ID0gdzNjX3NsaWR5LnNjcm9sbF94X29mZnNldCgpOwogICAgICAvLyBoaWRlIHRvb2xiYXIKICAgICAgdzNjX3NsaWR5LnRvb2xiYXIuc3R5bGUuZGlzcGxheSA9ICJub25lIjsKCiAgICAgIC8vIG1ha2UgaXQgcmVhcHBlYXIgbGF0ZXIKICAgICAgaWYgKHczY19zbGlkeS5zY3JvbGxoYWNrID09IDAgJiYgIXczY19zbGlkeS52aWV3X2FsbCkKICAgICAgewogICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkge3czY19zbGlkeS5zaG93X3Rvb2xiYXIoKTsgfSwgMTAwMCk7CiAgICAgICAgdzNjX3NsaWR5LnNjcm9sbGhhY2sgPSAxOwogICAgICB9CiAgICB9CiAgfSwKCiAgaGlkZV90b29sYmFyOiBmdW5jdGlvbiAoKSB7CiAgICB3M2Nfc2xpZHkuYWRkX2NsYXNzKHczY19zbGlkeS50b29sYmFyLCAiaGlkZGVuIik7CiAgICB3aW5kb3cuZm9jdXMoKTsKICB9LAoKICAvLyB1c2VkIHRvIGVuc3VyZSBJRSByZWZyZXNoZXMgdG9vbGJhciBpbiBjb3JyZWN0IHBvc2l0aW9uCiAgcmVmcmVzaF90b29sYmFyOiBmdW5jdGlvbiAoaW50ZXJ2YWwpIHsKICAgIGlmICghdzNjX3NsaWR5Lm5zX3BvcyAmJiAhdzNjX3NsaWR5LmllNykKICAgIHsKICAgICAgdzNjX3NsaWR5LmhpZGVfdG9vbGJhcigpOwogICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHt3M2Nfc2xpZHkuc2hvd190b29sYmFyKCk7fSwgaW50ZXJ2YWwpOwogICAgfQogIH0sCgogIC8vIHJlc3RvcmVzIHRvb2xiYXIgYWZ0ZXIgc2hvcnQgZGVsYXkKICBzaG93X3Rvb2xiYXI6IGZ1bmN0aW9uICgpIHsKICAgIGlmICh3M2Nfc2xpZHkud2FudF90b29sYmFyKQogICAgewogICAgICB3M2Nfc2xpZHkudG9vbGJhci5zdHlsZS5kaXNwbGF5ID0gImJsb2NrIjsKCiAgICAgIGlmICghdzNjX3NsaWR5Lm5zX3BvcykKICAgICAgewogICAgICAgIC8vIGFkanVzdCBwb3NpdGlvbiB0byBhbGxvdyBmb3Igc2Nyb2xsaW5nCiAgICAgICAgdmFyIHhvZmZzZXQgPSB3M2Nfc2xpZHkuc2Nyb2xsX3hfb2Zmc2V0KCk7CiAgICAgICAgdzNjX3NsaWR5LnRvb2xiYXIuc3R5bGUubGVmdCA9IHhvZmZzZXQ7CiAgICAgICAgdzNjX3NsaWR5LnRvb2xiYXIuc3R5bGUucmlnaHQgPSB4b2Zmc2V0OwoKICAgICAgICAvLyBkZXRlcm1pbmUgdmVydGljYWwgc2Nyb2xsIG9mZnNldAogICAgICAgIC8vdmFyIHlvZmZzZXQgPSBzY3JvbGxZT2Zmc2V0KCk7CgogICAgICAgIC8vIGJvdHRvbSBpcyBkb2MgaGVpZ2h0IC0gd2luZG93IGhlaWdodCAtIHNjcm9sbCBvZmZzZXQKICAgICAgICAvL3ZhciBib3R0b20gPSBkb2N1bWVudEhlaWdodCgpIC0gbGFzdEhlaWdodCAtIHlvZmZzZXQKCiAgICAgICAgLy9pZiAoeW9mZnNldCA+IDAgfHwgZG9jdW1lbnRIZWlnaHQoKSA+IGxhc3RIZWlnaHQpCiAgICAgICAgLy8gICBib3R0b20gKz0gMTY7ICAvLyBhbGxvdyBmb3IgaGVpZ2h0IG9mIHNjcm9sbGJhcgoKICAgICAgICB3M2Nfc2xpZHkudG9vbGJhci5zdHlsZS5ib3R0b20gPSAwOyAvL2JvdHRvbTsKICAgICAgfQoKICAgICAgdzNjX3NsaWR5LnJlbW92ZV9jbGFzcyh3M2Nfc2xpZHkudG9vbGJhciwgImhpZGRlbiIpOwogICAgfQoKICAgIHczY19zbGlkeS5zY3JvbGxoYWNrID0gMDsKCgogICAgLy8gc2V0IHRoZSBrZXlib2FyZCBmb2N1cyB0byB0aGUgaGVscCBsaW5rIG9uIHRoZQogICAgLy8gdG9vbGJhciB0byBlbnN1cmUgdGhhdCBkb2N1bWVudCBoYXMgdGhlIGZvY3VzCiAgICAvLyBJRSBkb2Vzbid0IGFsd2F5cyB3b3JrIHdpdGggd2luZG93LmZvY3VzKCkKICAgIC8vIGFuZCB0aGlzIGhhY2sgaGFzIGJlbmVmaXQgb2YgRW50ZXIgZm9yIGhlbHAKCiAgICB0cnkKICAgIHsKICAgICAgaWYgKCF3M2Nfc2xpZHkub3BlcmEpCiAgICAgICAgdzNjX3NsaWR5LnNldF9mb2N1cygpOwogICAgfQogICAgY2F0Y2ggKGUpCiAgICB7CiAgICB9CiAgfSwKCi8vIGludm9rZWQgdmlhIEYga2V5CiAgdG9nZ2xlX3Rvb2xiYXI6IGZ1bmN0aW9uICgpIHsKICAgIGlmICghdzNjX3NsaWR5LnZpZXdfYWxsKQogICAgewogICAgICBpZiAodzNjX3NsaWR5Lmhhc19jbGFzcyh3M2Nfc2xpZHkudG9vbGJhciwgImhpZGRlbiIpKQogICAgICB7CiAgICAgICAgdzNjX3NsaWR5LnJlbW92ZV9jbGFzcyh3M2Nfc2xpZHkudG9vbGJhciwgImhpZGRlbiIpCiAgICAgICAgdzNjX3NsaWR5LndhbnRfdG9vbGJhciA9IDE7CiAgICAgIH0KICAgICAgZWxzZQogICAgICB7CiAgICAgICAgdzNjX3NsaWR5LmFkZF9jbGFzcyh3M2Nfc2xpZHkudG9vbGJhciwgImhpZGRlbiIpCiAgICAgICAgdzNjX3NsaWR5LndhbnRfdG9vbGJhciA9IDA7CiAgICAgIH0KICAgIH0KICB9LAoKICBzY3JvbGxfeF9vZmZzZXQ6IGZ1bmN0aW9uICgpIHsKICAgIGlmICh3aW5kb3cucGFnZVhPZmZzZXQpCiAgICAgIHJldHVybiBzZWxmLnBhZ2VYT2Zmc2V0OwoKICAgIGlmIChkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQgJiYgCiAgICAgICAgICAgICBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuc2Nyb2xsTGVmdCkKICAgICAgcmV0dXJuIGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5zY3JvbGxMZWZ0OwoKICAgIGlmIChkb2N1bWVudC5ib2R5KQogICAgICByZXR1cm4gZG9jdW1lbnQuYm9keS5zY3JvbGxMZWZ0OwoKICAgIHJldHVybiAwOwogIH0sCgogIHNjcm9sbF95X29mZnNldDogZnVuY3Rpb24gKCkgewogICAgaWYgKHdpbmRvdy5wYWdlWU9mZnNldCkKICAgICAgcmV0dXJuIHNlbGYucGFnZVlPZmZzZXQ7CgogICAgaWYgKGRvY3VtZW50LmRvY3VtZW50RWxlbWVudCAmJiAKICAgICAgICAgICAgIGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5zY3JvbGxUb3ApCiAgICAgIHJldHVybiBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuc2Nyb2xsVG9wOwoKICAgIGlmIChkb2N1bWVudC5ib2R5KQogICAgICByZXR1cm4gZG9jdW1lbnQuYm9keS5zY3JvbGxUb3A7CgogICAgcmV0dXJuIDA7CiAgfSwKCiAgLy8gbG9va2luZyBmb3IgYSB3YXkgdG8gZGV0ZXJtaW5lIGhlaWdodCBvZiBzbGlkZSBjb250ZW50CiAgLy8gdGhlIHNsaWRlIGl0c2VsZiBpcyBzZXQgdG8gdGhlIGhlaWdodCBvZiB0aGUgd2luZG93CiAgb3B0aW1pemVfZm9udF9zaXplOiBmdW5jdGlvbiAoKSB7CiAgICB2YXIgc2xpZGUgPSB3M2Nfc2xpZHkuc2xpZGVzW3czY19zbGlkeS5zbGlkZV9udW1iZXJdOwoKICAgIC8vdmFyIGRoID0gZG9jdW1lbnRIZWlnaHQoKTsgLy9nZXREb2NIZWlnaHQoZG9jdW1lbnQpOwogICAgdmFyIGRoID0gc2xpZGUuc2Nyb2xsSGVpZ2h0OwogICAgdmFyIHdoID0gZ2V0V2luZG93SGVpZ2h0KCk7CiAgICB2YXIgdSA9IDEwMCAqIGRoIC8gd2g7CgogICAgYWxlcnQoIndpbmRvdyB1dGlsaXphdGlvbiA9ICIgKyB1ICsgIiUgKGRvYyAiCiAgICAgICsgZGggKyAiIHdpbiAiICsgd2ggKyAiKSIpOwogIH0sCgogIC8vIGZyb20gZG9jdW1lbnQgb2JqZWN0CiAgZ2V0X2RvY19oZWlnaHQ6IGZ1bmN0aW9uIChkb2MpIHsKICAgIGlmICghZG9jKQogICAgICBkb2MgPSBkb2N1bWVudDsKCiAgICBpZiAoZG9jICYmIGRvYy5ib2R5ICYmIGRvYy5ib2R5Lm9mZnNldEhlaWdodCkKICAgICAgcmV0dXJuIGRvYy5ib2R5Lm9mZnNldEhlaWdodDsgIC8vIG5zL2dlY2tvIHN5bnRheAoKICAgIGlmIChkb2MgJiYgZG9jLmJvZHkgJiYgZG9jLmJvZHkuc2Nyb2xsSGVpZ2h0KQogICAgICByZXR1cm4gZG9jLmJvZHkuc2Nyb2xsSGVpZ2h0OwoKICAgIGFsZXJ0KCJjb3VsZG4ndCBkZXRlcm1pbmUgZG9jdW1lbnQgaGVpZ2h0Iik7CiAgfSwKCiAgZ2V0X3dpbmRvd19oZWlnaHQ6IGZ1bmN0aW9uICgpIHsKICAgIGlmICggdHlwZW9mKCB3aW5kb3cuaW5uZXJIZWlnaHQgKSA9PSAnbnVtYmVyJyApCiAgICAgIHJldHVybiB3aW5kb3cuaW5uZXJIZWlnaHQ7ICAvLyBOb24gSUUgYnJvd3NlcgoKICAgIGlmIChkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQgJiYgZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LmNsaWVudEhlaWdodCkKICAgICAgcmV0dXJuIGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5jbGllbnRIZWlnaHQ7ICAvLyBJRTYKCiAgICBpZiAoZG9jdW1lbnQuYm9keSAmJiBkb2N1bWVudC5ib2R5LmNsaWVudEhlaWdodCkKICAgICAgcmV0dXJuIGRvY3VtZW50LmJvZHkuY2xpZW50SGVpZ2h0OyAvLyBJRTQKICB9LAoKICBkb2N1bWVudF9oZWlnaHQ6IGZ1bmN0aW9uICgpIHsKICAgIHZhciBzaCwgb2g7CgogICAgc2ggPSBkb2N1bWVudC5ib2R5LnNjcm9sbEhlaWdodDsKICAgIG9oID0gZG9jdW1lbnQuYm9keS5vZmZzZXRIZWlnaHQ7CgogICAgaWYgKHNoICYmIG9oKQogICAgewogICAgICByZXR1cm4gKHNoID4gb2ggPyBzaCA6IG9oKTsKICAgIH0KCiAgICAvLyBubyBpZGVhIQogICAgcmV0dXJuIDA7CiAgfSwKCiAgc21hbGxlcjogZnVuY3Rpb24gKCkgewogICAgaWYgKHczY19zbGlkeS5zaXplX2luZGV4ID4gMCkKICAgIHsKICAgICAgLS13M2Nfc2xpZHkuc2l6ZV9pbmRleDsKICAgIH0KCiAgICB3M2Nfc2xpZHkudG9vbGJhci5zdHlsZS5kaXNwbGF5ID0gIm5vbmUiOwogICAgZG9jdW1lbnQuYm9keS5zdHlsZS5mb250U2l6ZSA9IHczY19zbGlkeS5zaXplc1t3M2Nfc2xpZHkuc2l6ZV9pbmRleF07CiAgICB2YXIgc2xpZGUgPSB3M2Nfc2xpZHkuc2xpZGVzW3czY19zbGlkeS5zbGlkZV9udW1iZXJdOwogICAgdzNjX3NsaWR5LmhpZGVfc2xpZGUoc2xpZGUpOwogICAgdzNjX3NsaWR5LnNob3dfc2xpZGUoc2xpZGUpOwogICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7dzNjX3NsaWR5LnNob3dfdG9vbGJhcigpOyB9LCA1MCk7CiAgfSwKCiAgYmlnZ2VyOiBmdW5jdGlvbiAoKSB7CiAgICBpZiAodzNjX3NsaWR5LnNpemVfaW5kZXggPCB3M2Nfc2xpZHkuc2l6ZXMubGVuZ3RoIC0gMSkKICAgIHsKICAgICAgKyt3M2Nfc2xpZHkuc2l6ZV9pbmRleDsKICAgIH0KCiAgICB3M2Nfc2xpZHkudG9vbGJhci5zdHlsZS5kaXNwbGF5ID0gIm5vbmUiOwogICAgZG9jdW1lbnQuYm9keS5zdHlsZS5mb250U2l6ZSA9IHczY19zbGlkeS5zaXplc1t3M2Nfc2xpZHkuc2l6ZV9pbmRleF07CiAgICB2YXIgc2xpZGUgPSB3M2Nfc2xpZHkuc2xpZGVzW3czY19zbGlkeS5zbGlkZV9udW1iZXJdOwogICAgdzNjX3NsaWR5LmhpZGVfc2xpZGUoc2xpZGUpOwogICAgdzNjX3NsaWR5LnNob3dfc2xpZGUoc2xpZGUpOwogICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7dzNjX3NsaWR5LnNob3dfdG9vbGJhcigpOyB9LCA1MCk7CiAgfSwKCiAgLy8gZW5hYmxlcyBjcm9zcyBicm93c2VyIHVzZSBvZiByZWxhdGl2ZSB3aWR0aC9oZWlnaHQKICAvLyBvbiBvYmplY3QgZWxlbWVudHMgZm9yIHVzZSB3aXRoIFNWRyBhbmQgRmxhc2ggbWVkaWEKICAvLyB3aXRoIHRoYW5rcyB0byBJdmFuIEhlcm1hbiBmb3IgdGhlIHN1Z2dlc3Rpb24KICBhZGp1c3Rfb2JqZWN0X2RpbWVuc2lvbnM6IGZ1bmN0aW9uICh3aWR0aCwgaGVpZ2h0KSB7CiAgICBmb3IoIHZhciBpID0gMDsgaSA8IHczY19zbGlkeS5vYmplY3RzLmxlbmd0aDsgaSsrICkKICAgIHsKICAgICAgdmFyIG9iaiA9IHRoaXMub2JqZWN0c1tpXTsKICAgICAgdmFyIG1pbWVUeXBlID0gb2JqLmdldEF0dHJpYnV0ZSgidHlwZSIpOwoKICAgICAgaWYgKG1pbWVUeXBlID09ICJpbWFnZS9zdmcreG1sIiB8fCBtaW1lVHlwZSA9PSAiYXBwbGljYXRpb24veC1zaG9ja3dhdmUtZmxhc2giKQogICAgICB7CiAgICAgICAgaWYgKCAhb2JqLmluaXRpYWxXaWR0aCApIAogICAgICAgICAgb2JqLmluaXRpYWxXaWR0aCA9IG9iai5nZXRBdHRyaWJ1dGUoIndpZHRoIik7CgogICAgICAgIGlmICggIW9iai5pbml0aWFsSGVpZ2h0ICkgCiAgICAgICAgICBvYmouaW5pdGlhbEhlaWdodCA9IG9iai5nZXRBdHRyaWJ1dGUoImhlaWdodCIpOwoKICAgICAgICBpZiAoIG9iai5pbml0aWFsV2lkdGggJiYgb2JqLmluaXRpYWxXaWR0aC5jaGFyQXQob2JqLmluaXRpYWxXaWR0aC5sZW5ndGgtMSkgPT0gIiUiICkKICAgICAgICB7CiAgICAgICAgICB2YXIgdyA9IHBhcnNlSW50KG9iai5pbml0aWFsV2lkdGguc2xpY2UoMCwgb2JqLmluaXRpYWxXaWR0aC5sZW5ndGgtMSkpOwogICAgICAgICAgdmFyIG5ld1cgPSB3aWR0aCAqICh3LzEwMC4wKTsKICAgICAgICAgIG9iai5zZXRBdHRyaWJ1dGUoIndpZHRoIixuZXdXKTsKICAgICAgICB9CgogICAgICAgIGlmICggb2JqLmluaXRpYWxIZWlnaHQgJiYKICAgICAgICAgICAgIG9iai5pbml0aWFsSGVpZ2h0LmNoYXJBdChvYmouaW5pdGlhbEhlaWdodC5sZW5ndGgtMSkgPT0gIiUiICkKICAgICAgICB7CiAgICAgICAgICB2YXIgaCA9IHBhcnNlSW50KG9iai5pbml0aWFsSGVpZ2h0LnNsaWNlKDAsIG9iai5pbml0aWFsSGVpZ2h0Lmxlbmd0aC0xKSk7CiAgICAgICAgICB2YXIgbmV3SCA9IGhlaWdodCAqIChoLzEwMC4wKTsKICAgICAgICAgIG9iai5zZXRBdHRyaWJ1dGUoImhlaWdodCIsIG5ld0gpOwogICAgICAgIH0KICAgICAgfQogICAgfQogIH0sCgogIC8vIG5lZWRlZCBmb3IgT3BlcmEgdG8gaW5oaWJpdCBkZWZhdWx0IGJlaGF2aW9yCiAgLy8gc2luY2UgT3BlcmEgZGVsaXZlcnMga2V5UHJlc3MgZXZlbiBpZiBrZXlEb3duCiAgLy8gd2FzIGNhbmNlbGxlZAogIGtleV9wcmVzczogZnVuY3Rpb24gKGV2ZW50KSB7CiAgICBpZiAoIWV2ZW50KQogICAgICBldmVudCA9IHdpbmRvdy5ldmVudDsKCiAgICBpZiAoIXczY19zbGlkeS5rZXlfd2FudGVkKQogICAgICByZXR1cm4gdzNjX3NsaWR5LmNhbmNlbChldmVudCk7CgogICAgcmV0dXJuIHRydWU7CiAgfSwKCiAgLy8gIFNlZSBlLmcuIGh0dHA6Ly93d3cucXVpcmtzbW9kZS5vcmcvanMvZXZlbnRzL2tleXMuaHRtbCBmb3Iga2V5Y29kZXMKICBrZXlfZG93bjogZnVuY3Rpb24gKGV2ZW50KSB7CiAgICB2YXIga2V5LCB0YXJnZXQsIHRhZzsKCiAgICB3M2Nfc2xpZHkua2V5X3dhbnRlZCA9IHRydWU7CgogICAgaWYgKCFldmVudCkKICAgICAgZXZlbnQgPSB3aW5kb3cuZXZlbnQ7CgogICAgLy8ga2x1ZGdlIGFyb3VuZCBOUy9JRSBkaWZmZXJlbmNlcyAKICAgIGlmICh3aW5kb3cuZXZlbnQpCiAgICB7CiAgICAgIGtleSA9IHdpbmRvdy5ldmVudC5rZXlDb2RlOwogICAgICB0YXJnZXQgPSB3aW5kb3cuZXZlbnQuc3JjRWxlbWVudDsKICAgIH0KICAgIGVsc2UgaWYgKGV2ZW50LndoaWNoKQogICAgewogICAgICBrZXkgPSBldmVudC53aGljaDsKICAgICAgdGFyZ2V0ID0gZXZlbnQudGFyZ2V0OwogICAgfQogICAgZWxzZQogICAgICByZXR1cm4gdHJ1ZTsgLy8gWWlrZXMhIHVua25vd24gYnJvd3NlcgoKICAgIC8vIGlnbm9yZSBldmVudCBpZiBrZXkgdmFsdWUgaXMgemVybwogICAgLy8gYXMgZm9yIGFsdCBvbiBPcGVyYSBhbmQgS29ucXVlcm9yCiAgICBpZiAoIWtleSkKICAgICAgIHJldHVybiB0cnVlOwoKICAgIC8vIGF2b2lkIGludGVyZmVyaW5nIHdpdGgga2V5c3Ryb2tlCiAgICAvLyBiZWhhdmlvciBmb3Igbm9uLXNsaWR5IGNocm9tZSBlbGVtZW50cwogICAgaWYgKCF3M2Nfc2xpZHkuc2xpZHlfY2hyb21lKHRhcmdldCkgJiYKICAgICAgICB3M2Nfc2xpZHkuc3BlY2lhbF9lbGVtZW50KHRhcmdldCkpCiAgICAgIHJldHVybiB0cnVlOwoKICAgIC8vIGNoZWNrIGZvciBjb25jdXJyZW50IGNvbnRyb2wvY29tbWFuZC9hbHQga2V5CiAgICAvLyBidXQgYXJlIHRoZXNlIG9ubHkgcHJlc2VudCBvbiBtb3VzZSBldmVudHM/CgogICAgaWYgKGV2ZW50LmN0cmxLZXkgfHwgZXZlbnQuYWx0S2V5IHx8IGV2ZW50Lm1ldGFLZXkpCiAgICAgICByZXR1cm4gdHJ1ZTsKCiAgICAvLyBkaXNtaXNzIHRhYmxlIG9mIGNvbnRlbnRzIGlmIHZpc2libGUKICAgIGlmICh3M2Nfc2xpZHkuaXNfc2hvd25fdG9jKCkgJiYga2V5ICE9IDkgJiYga2V5ICE9IDE2ICYmIGtleSAhPSAzOCAmJiBrZXkgIT0gNDApCiAgICB7CiAgICAgIHczY19zbGlkeS5oaWRlX3RhYmxlX29mX2NvbnRlbnRzKHRydWUpOwoKICAgICAgaWYgKGtleSA9PSAyNyB8fCBrZXkgPT0gODQgfHwga2V5ID09IDY3KQogICAgICAgIHJldHVybiB3M2Nfc2xpZHkuY2FuY2VsKGV2ZW50KTsKICAgIH0KCiAgICBpZiAoa2V5ID09IDM0KSAvLyBQYWdlIERvd24KICAgIHsKICAgICAgaWYgKHczY19zbGlkeS52aWV3X2FsbCkKICAgICAgICByZXR1cm4gdHJ1ZTsKCiAgICAgIHczY19zbGlkeS5uZXh0X3NsaWRlKGZhbHNlKTsKICAgICAgcmV0dXJuIHczY19zbGlkeS5jYW5jZWwoZXZlbnQpOwogICAgfQogICAgZWxzZSBpZiAoa2V5ID09IDMzKSAvLyBQYWdlIFVwCiAgICB7CiAgICAgIGlmICh3M2Nfc2xpZHkudmlld19hbGwpCiAgICAgICAgcmV0dXJuIHRydWU7CgogICAgICB3M2Nfc2xpZHkucHJldmlvdXNfc2xpZGUoZmFsc2UpOwogICAgICByZXR1cm4gdzNjX3NsaWR5LmNhbmNlbChldmVudCk7CiAgICB9CiAgICBlbHNlIGlmIChrZXkgPT0gMzIpIC8vIHNwYWNlIGJhcgogICAgewogICAgICB3M2Nfc2xpZHkubmV4dF9zbGlkZSh0cnVlKTsKICAgICAgcmV0dXJuIHczY19zbGlkeS5jYW5jZWwoZXZlbnQpOwogICAgfQogICAgZWxzZSBpZiAoa2V5ID09IDM3KSAvLyBMZWZ0IGFycm93CiAgICB7CiAgICAgIHczY19zbGlkeS5wcmV2aW91c19zbGlkZSghZXZlbnQuc2hpZnRLZXkpOwogICAgICByZXR1cm4gdzNjX3NsaWR5LmNhbmNlbChldmVudCk7CiAgICB9CiAgICBlbHNlIGlmIChrZXkgPT0gMzYpIC8vIEhvbWUKICAgIHsKICAgICAgdzNjX3NsaWR5LmZpcnN0X3NsaWRlKCk7CiAgICAgIHJldHVybiB3M2Nfc2xpZHkuY2FuY2VsKGV2ZW50KTsKICAgIH0KICAgIGVsc2UgaWYgKGtleSA9PSAzNSkgLy8gRW5kCiAgICB7CiAgICAgIHczY19zbGlkeS5sYXN0X3NsaWRlKCk7CiAgICAgIHJldHVybiB3M2Nfc2xpZHkuY2FuY2VsKGV2ZW50KTsKICAgIH0KICAgIGVsc2UgaWYgKGtleSA9PSAzOSkgLy8gUmlnaHQgYXJyb3cKICAgIHsKICAgICAgdzNjX3NsaWR5Lm5leHRfc2xpZGUoIWV2ZW50LnNoaWZ0S2V5KTsKICAgICAgcmV0dXJuIHczY19zbGlkeS5jYW5jZWwoZXZlbnQpOwogICAgfQogICAgZWxzZSBpZiAoa2V5ID09IDEzKSAvLyBFbnRlcgogICAgewogICAgICBpZiAodzNjX3NsaWR5Lm91dGxpbmUpCiAgICAgIHsKICAgICAgICBpZiAodzNjX3NsaWR5Lm91dGxpbmUudmlzaWJsZSkKICAgICAgICAgIHczY19zbGlkeS5mb2xkKHczY19zbGlkeS5vdXRsaW5lKTsKICAgICAgICBlbHNlCiAgICAgICAgICB3M2Nfc2xpZHkudW5mb2xkKHczY19zbGlkeS5vdXRsaW5lKTsKICAgICAgICAgIAogICAgICAgcmV0dXJuIHczY19zbGlkeS5jYW5jZWwoZXZlbnQpOwogICAgICB9CiAgICB9CiAgICBlbHNlIGlmIChrZXkgPT0gMTg4KSAgLy8gPCBmb3Igc21hbGxlciBmb250cwogICAgewogICAgICB3M2Nfc2xpZHkuc21hbGxlcigpOwogICAgICByZXR1cm4gdzNjX3NsaWR5LmNhbmNlbChldmVudCk7CiAgICB9CiAgICBlbHNlIGlmIChrZXkgPT0gMTkwKSAgLy8gPiBmb3IgbGFyZ2VyIGZvbnRzCiAgICB7CiAgICAgIHczY19zbGlkeS5iaWdnZXIoKTsKICAgICAgcmV0dXJuIHczY19zbGlkeS5jYW5jZWwoZXZlbnQpOwogICAgfQogICAgZWxzZSBpZiAoa2V5ID09IDE4OSB8fCBrZXkgPT0gMTA5KSAgLy8gLSBmb3Igc21hbGxlciBmb250cwogICAgewogICAgICB3M2Nfc2xpZHkuc21hbGxlcigpOwogICAgICByZXR1cm4gdzNjX3NsaWR5LmNhbmNlbChldmVudCk7CiAgICB9CiAgICBlbHNlIGlmIChrZXkgPT0gMTg3IHx8IGtleSA9PSAxOTEgfHwga2V5ID09IDEwNykgIC8vID0gKyAgZm9yIGxhcmdlciBmb250cwogICAgewogICAgICB3M2Nfc2xpZHkuYmlnZ2VyKCk7CiAgICAgIHJldHVybiB3M2Nfc2xpZHkuY2FuY2VsKGV2ZW50KTsKICAgIH0KICAgIGVsc2UgaWYgKGtleSA9PSA4MykgIC8vIFMgZm9yIHNtYWxsZXIgZm9udHMKICAgIHsKICAgICAgdzNjX3NsaWR5LnNtYWxsZXIoKTsKICAgICAgcmV0dXJuIHczY19zbGlkeS5jYW5jZWwoZXZlbnQpOwogICAgfQogICAgZWxzZSBpZiAoa2V5ID09IDY2KSAgLy8gQiBmb3IgbGFyZ2VyIGZvbnRzCiAgICB7CiAgICAgIHczY19zbGlkeS5iaWdnZXIoKTsKICAgICAgcmV0dXJuIHczY19zbGlkeS5jYW5jZWwoZXZlbnQpOwogICAgfQogICAgZWxzZSBpZiAoa2V5ID09IDkwKSAgLy8gWiBmb3IgbGFzdCBzbGlkZQogICAgewogICAgICB3M2Nfc2xpZHkubGFzdF9zbGlkZSgpOwogICAgICByZXR1cm4gdzNjX3NsaWR5LmNhbmNlbChldmVudCk7CiAgICB9CiAgICBlbHNlIGlmIChrZXkgPT0gNzApICAvLyBGIGZvciB0b2dnbGUgdG9vbGJhcgogICAgewogICAgICB3M2Nfc2xpZHkudG9nZ2xlX3Rvb2xiYXIoKTsKICAgICAgcmV0dXJuIHczY19zbGlkeS5jYW5jZWwoZXZlbnQpOwogICAgfQogICAgZWxzZSBpZiAoa2V5ID09IDY1KSAgLy8gQSBmb3IgdG9nZ2xlIHZpZXcgc2luZ2xlL2FsbCBzbGlkZXMKICAgIHsKICAgICAgdzNjX3NsaWR5LnRvZ2dsZV92aWV3KCk7CiAgICAgIHJldHVybiB3M2Nfc2xpZHkuY2FuY2VsKGV2ZW50KTsKICAgIH0KICAgIGVsc2UgaWYgKGtleSA9PSA3NSkgIC8vIHRvZ2dsZSBhY3Rpb24gb2YgbGVmdCBjbGljayBmb3IgbmV4dCBwYWdlCiAgICB7CiAgICAgIHczY19zbGlkeS5tb3VzZV9jbGlja19lbmFibGVkID0gIXczY19zbGlkeS5tb3VzZV9jbGlja19lbmFibGVkOwogICAgICB2YXIgYWxlcnRfbXNnID0gKHczY19zbGlkeS5tb3VzZV9jbGlja19lbmFibGVkID8KICAgICAgICAgICAgICAgICJlbmFibGVkIiA6ICJkaXNhYmxlZCIpICsgICIgbW91c2UgY2xpY2sgYWR2YW5jZSI7CgogICAgICBhbGVydCh3M2Nfc2xpZHkubG9jYWxpemUoYWxlcnRfbXNnKSk7CiAgICAgIHJldHVybiB3M2Nfc2xpZHkuY2FuY2VsKGV2ZW50KTsKICAgIH0KICAgIGVsc2UgaWYgKGtleSA9PSA4NCB8fCBrZXkgPT0gNjcpICAvLyBUIG9yIEMgZm9yIHRhYmxlIG9mIGNvbnRlbnRzCiAgICB7CiAgICAgIGlmICh3M2Nfc2xpZHkudG9jKQogICAgICAgIHczY19zbGlkeS50b2dnbGVfdGFibGVfb2ZfY29udGVudHMoKTsKCiAgICAgIHJldHVybiB3M2Nfc2xpZHkuY2FuY2VsKGV2ZW50KTsKICAgIH0KICAgIGVsc2UgaWYgKGtleSA9PSA3MikgLy8gSCBmb3IgaGVscAogICAgewogICAgICB3aW5kb3cubG9jYXRpb24gPSB3M2Nfc2xpZHkuaGVscF9wYWdlOwogICAgICByZXR1cm4gdzNjX3NsaWR5LmNhbmNlbChldmVudCk7CiAgICB9CiAgICAvL2Vsc2UgYWxlcnQoImtleSBjb2RlIGlzICIrIGtleSk7CgogICAgcmV0dXJuIHRydWU7CiAgfSwKCiAgLy8gc2FmZSBmb3IgYm90aCB0ZXh0L2h0bWwgYW5kIGFwcGxpY2F0aW9uL3hodG1sK3htbAogIGNyZWF0ZV9lbGVtZW50OiBmdW5jdGlvbiAobmFtZSkgewogICAgaWYgKHRoaXMueGh0bWwgJiYgKHR5cGVvZiBkb2N1bWVudC5jcmVhdGVFbGVtZW50TlMgIT0gJ3VuZGVmaW5lZCcpKQogICAgICByZXR1cm4gZG9jdW1lbnQuY3JlYXRlRWxlbWVudE5TKCJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hodG1sIiwgbmFtZSkKCiAgICByZXR1cm4gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChuYW1lKTsKICB9LAoKICBnZXRfZWxlbWVudF9zdHlsZTogZnVuY3Rpb24gKGVsZW0sIElFU3R5bGVQcm9wLCBDU1NTdHlsZVByb3ApIHsKICAgIGlmIChlbGVtLmN1cnJlbnRTdHlsZSkKICAgIHsKICAgICAgcmV0dXJuIGVsZW0uY3VycmVudFN0eWxlW0lFU3R5bGVQcm9wXTsKICAgIH0KICAgIGVsc2UgaWYgKHdpbmRvdy5nZXRDb21wdXRlZFN0eWxlKQogICAgewogICAgICB2YXIgY29tcFN0eWxlID0gd2luZG93LmdldENvbXB1dGVkU3R5bGUoZWxlbSwgIiIpOwogICAgICByZXR1cm4gY29tcFN0eWxlLmdldFByb3BlcnR5VmFsdWUoQ1NTU3R5bGVQcm9wKTsKICAgIH0KICAgIHJldHVybiAiIjsKICB9LAoKICAvLyB0aGUgc3RyaW5nIHN0ciBpcyBhIHdoaXRlc3BhY2Ugc2VwYXJhdGVkIGxpc3Qgb2YgdG9rZW5zCiAgLy8gdGVzdCBpZiBzdHIgY29udGFpbnMgYSBwYXJ0aWN1bGFyIHRva2VuLCBlLmcuICJzbGlkZSIKICBoYXNfdG9rZW46IGZ1bmN0aW9uIChzdHIsIHRva2VuKSB7CiAgICBpZiAoc3RyKQogICAgewogICAgICAvLyBkZWZpbmUgcGF0dGVybiBhcyByZWd1bGFyIGV4cHJlc3Npb24KICAgICAgdmFyIHBhdHRlcm4gPSAvXHcrL2c7CgogICAgICAvLyBjaGVjayBmb3IgbWF0Y2hlcwogICAgICAvLyBwbGFjZSByZXN1bHQgaW4gYXJyYXkKICAgICAgdmFyIHJlc3VsdCA9IHN0ci5tYXRjaChwYXR0ZXJuKTsKCiAgICAgIC8vIG5vdyBjaGVjayBpZiBkZXNpcmVkIHRva2VuIGlzIHByZXNlbnQKICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCByZXN1bHQubGVuZ3RoOyBpKyspCiAgICAgIHsKICAgICAgICBpZiAocmVzdWx0W2ldID09IHRva2VuKQogICAgICAgICAgcmV0dXJuIHRydWU7CiAgICAgIH0KICAgIH0KCiAgICByZXR1cm4gZmFsc2U7CiAgfSwKCiAgZ2V0X2NsYXNzX2xpc3Q6IGZ1bmN0aW9uIChlbGVtZW50KSB7CiAgICBpZiAodHlwZW9mIGVsZW1lbnQuY2xhc3NOYW1lICE9ICd1bmRlZmluZWQnKQogICAgICByZXR1cm4gZWxlbWVudC5jbGFzc05hbWU7CgogICAgcmV0dXJuIGVsZW1lbnQuZ2V0QXR0cmlidXRlKCJjbGFzcyIpOwogIH0sCgogIGhhc19jbGFzczogZnVuY3Rpb24gKGVsZW1lbnQsIG5hbWUpIHsKICAgIGlmIChlbGVtZW50Lm5vZGVUeXBlICE9IDEpCiAgICAgIHJldHVybiBmYWxzZTsKCiAgICB2YXIgcmVnZXhwID0gbmV3IFJlZ0V4cCgiKF58ICkiICsgbmFtZSArICJcVyoiKTsKCiAgICBpZiAodHlwZW9mIGVsZW1lbnQuY2xhc3NOYW1lICE9ICd1bmRlZmluZWQnKQogICAgICByZXR1cm4gcmVnZXhwLnRlc3QoZWxlbWVudC5jbGFzc05hbWUpOwoKICAgIHJldHVybiByZWdleHAudGVzdChlbGVtZW50LmdldEF0dHJpYnV0ZSgiY2xhc3MiKSk7CiAgfSwKCiAgcmVtb3ZlX2NsYXNzOiBmdW5jdGlvbiAoZWxlbWVudCwgbmFtZSkgewogICAgdmFyIHJlZ2V4cCA9IG5ldyBSZWdFeHAoIihefCApIiArIG5hbWUgKyAiXFcqIik7CiAgICB2YXIgY2xzdmFsID0gIiI7CgogICAgaWYgKHR5cGVvZiBlbGVtZW50LmNsYXNzTmFtZSAhPSAndW5kZWZpbmVkJykKICAgIHsKICAgICAgY2xzdmFsID0gZWxlbWVudC5jbGFzc05hbWU7CgogICAgICBpZiAoY2xzdmFsKQogICAgICB7CiAgICAgICAgY2xzdmFsID0gY2xzdmFsLnJlcGxhY2UocmVnZXhwLCAiIik7CiAgICAgICAgZWxlbWVudC5jbGFzc05hbWUgPSBjbHN2YWw7CiAgICAgIH0KICAgIH0KICAgIGVsc2UKICAgIHsKICAgICAgY2xzdmFsID0gZWxlbWVudC5nZXRBdHRyaWJ1dGUoImNsYXNzIik7CgogICAgICBpZiAoY2xzdmFsKQogICAgICB7CiAgICAgICAgY2xzdmFsID0gY2xzdmFsLnJlcGxhY2UocmVnZXhwLCAiIik7CiAgICAgICAgZWxlbWVudC5zZXRBdHRyaWJ1dGUoImNsYXNzIiwgY2xzdmFsKTsKICAgICAgfQogICAgfQogIH0sCgogIGFkZF9jbGFzczogZnVuY3Rpb24gKGVsZW1lbnQsIG5hbWUpIHsKICAgIGlmICghdGhpcy5oYXNfY2xhc3MoZWxlbWVudCwgbmFtZSkpCiAgICB7CiAgICAgIGlmICh0eXBlb2YgZWxlbWVudC5jbGFzc05hbWUgIT0gJ3VuZGVmaW5lZCcpCiAgICAgICAgZWxlbWVudC5jbGFzc05hbWUgKz0gIiAiICsgbmFtZTsKICAgICAgZWxzZQogICAgICB7CiAgICAgICAgdmFyIGNsc3ZhbCA9IGVsZW1lbnQuZ2V0QXR0cmlidXRlKCJjbGFzcyIpOwogICAgICAgIGNsc3ZhbCA9IGNsc3ZhbCA/IGNsc3ZhbCArICIgIiArIG5hbWUgOiBuYW1lOwogICAgICAgIGVsZW1lbnQuc2V0QXR0cmlidXRlKCJjbGFzcyIsIGNsc3ZhbCk7CiAgICAgIH0KICAgIH0KICB9LAoKICAvLyBIVE1MIGVsZW1lbnRzIHRoYXQgY2FuIGJlIHVzZWQgd2l0aCBjbGFzcz0iaW5jcmVtZW50YWwiCiAgLy8gbm90ZSB0aGF0IHlvdSBjYW4gYWxzbyBwdXQgdGhlIGNsYXNzIG9uIGNvbnRhaW5lcnMgbGlrZQogIC8vIHVwLCBvbCwgZGwsIGFuZCBkaXYgdG8gbWFrZSB0aGVpciBjb250ZW50cyBhcHBlYXIKICAvLyBpbmNyZW1lbnRhbGx5LiBVcHBlciBjYXNlIGlzIHVzZWQgc2luY2UgdGhpcyBpcyB3aGF0CiAgLy8gYnJvd3NlcnMgcmVwb3J0IGZvciBIVE1MIG5vZGUgbmFtZXMgKHRleHQvaHRtbCkuCiAgaW5jcmVtZW50YWxfZWxlbWVudHM6IG51bGwsCiAgb2theV9mb3JfaW5jcmVtZW50YWw6IGZ1bmN0aW9uIChuYW1lKSB7CiAgICBpZiAoIXRoaXMuaW5jcmVtZW50YWxfZWxlbWVudHMpCiAgICB7CiAgICAgIHZhciBpbmNsaXN0ID0gbmV3IEFycmF5KCk7CiAgICAgIGluY2xpc3RbInAiXSA9IHRydWU7CiAgICAgIGluY2xpc3RbInByZSJdID0gdHJ1ZTsKICAgICAgaW5jbGlzdFsibGkiXSA9IHRydWU7CiAgICAgIGluY2xpc3RbImJsb2NrcXVvdGUiXSA9IHRydWU7CiAgICAgIGluY2xpc3RbImR0Il0gPSB0cnVlOwogICAgICBpbmNsaXN0WyJkZCJdID0gdHJ1ZTsKICAgICAgaW5jbGlzdFsiaDIiXSA9IHRydWU7CiAgICAgIGluY2xpc3RbImgzIl0gPSB0cnVlOwogICAgICBpbmNsaXN0WyJoNCJdID0gdHJ1ZTsKICAgICAgaW5jbGlzdFsiaDUiXSA9IHRydWU7CiAgICAgIGluY2xpc3RbImg2Il0gPSB0cnVlOwogICAgICBpbmNsaXN0WyJzcGFuIl0gPSB0cnVlOwogICAgICBpbmNsaXN0WyJhZGRyZXNzIl0gPSB0cnVlOwogICAgICBpbmNsaXN0WyJ0YWJsZSJdID0gdHJ1ZTsKICAgICAgaW5jbGlzdFsidHIiXSA9IHRydWU7CiAgICAgIGluY2xpc3RbInRoIl0gPSB0cnVlOwogICAgICBpbmNsaXN0WyJ0ZCJdID0gdHJ1ZTsKICAgICAgaW5jbGlzdFsiaW1nIl0gPSB0cnVlOwogICAgICBpbmNsaXN0WyJvYmplY3QiXSA9IHRydWU7CiAgICAgIHRoaXMuaW5jcmVtZW50YWxfZWxlbWVudHMgPSBpbmNsaXN0OwogICAgfQogICAgcmV0dXJuIHRoaXMuaW5jcmVtZW50YWxfZWxlbWVudHNbbmFtZS50b0xvd2VyQ2FzZSgpXTsKICB9LAoKICBuZXh0X2luY3JlbWVudGFsX2l0ZW06IGZ1bmN0aW9uIChub2RlKSB7CiAgICB2YXIgYnIgPSB0aGlzLmlzX3hodG1sID8gImJyIiA6ICJCUiI7CiAgICB2YXIgc2xpZGUgPSB3M2Nfc2xpZHkuc2xpZGVzW3czY19zbGlkeS5zbGlkZV9udW1iZXJdOwoKICAgIGZvciAoOzspCiAgICB7CiAgICAgIG5vZGUgPSB3M2Nfc2xpZHkubmV4dF9ub2RlKHNsaWRlLCBub2RlKTsKCiAgICAgIGlmIChub2RlID09IG51bGwgfHwgbm9kZS5wYXJlbnROb2RlID09IG51bGwpCiAgICAgICAgYnJlYWs7CgogICAgICBpZiAobm9kZS5ub2RlVHlwZSA9PSAxKSAgLy8gRUxFTUVOVAogICAgICB7CiAgICAgICAgaWYgKG5vZGUubm9kZU5hbWUgPT0gYnIpCiAgICAgICAgICBjb250aW51ZTsKCiAgICAgICAgaWYgKHczY19zbGlkeS5oYXNfY2xhc3Mobm9kZSwgImluY3JlbWVudGFsIikKICAgICAgICAgICAgICYmIHczY19zbGlkeS5va2F5X2Zvcl9pbmNyZW1lbnRhbChub2RlLm5vZGVOYW1lKSkKICAgICAgICAgIHJldHVybiBub2RlOwoKICAgICAgICBpZiAodzNjX3NsaWR5Lmhhc19jbGFzcyhub2RlLnBhcmVudE5vZGUsICJpbmNyZW1lbnRhbCIpCiAgICAgICAgICAgICAmJiAhdzNjX3NsaWR5Lmhhc19jbGFzcyhub2RlLCAibm9uLWluY3JlbWVudGFsIikpCiAgICAgICAgICByZXR1cm4gbm9kZTsKICAgICAgfQogICAgfQoKICAgIHJldHVybiBub2RlOwogIH0sCgogIHByZXZpb3VzX2luY3JlbWVudGFsX2l0ZW06IGZ1bmN0aW9uIChub2RlKSB7CiAgICB2YXIgYnIgPSB0aGlzLmlzX3hodG1sID8gImJyIiA6ICJCUiI7CiAgICB2YXIgc2xpZGUgPSB3M2Nfc2xpZHkuc2xpZGVzW3czY19zbGlkeS5zbGlkZV9udW1iZXJdOwoKICAgIGZvciAoOzspCiAgICB7CiAgICAgIG5vZGUgPSB3M2Nfc2xpZHkucHJldmlvdXNfbm9kZShzbGlkZSwgbm9kZSk7CgogICAgICBpZiAobm9kZSA9PSBudWxsIHx8IG5vZGUucGFyZW50Tm9kZSA9PSBudWxsKQogICAgICAgIGJyZWFrOwoKICAgICAgaWYgKG5vZGUubm9kZVR5cGUgPT0gMSkKICAgICAgewogICAgICAgIGlmIChub2RlLm5vZGVOYW1lID09IGJyKQogICAgICAgICAgY29udGludWU7CgogICAgICAgIGlmICh3M2Nfc2xpZHkuaGFzX2NsYXNzKG5vZGUsICJpbmNyZW1lbnRhbCIpCiAgICAgICAgICAgICAmJiB3M2Nfc2xpZHkub2theV9mb3JfaW5jcmVtZW50YWwobm9kZS5ub2RlTmFtZSkpCiAgICAgICAgICByZXR1cm4gbm9kZTsKCiAgICAgICAgaWYgKHczY19zbGlkeS5oYXNfY2xhc3Mobm9kZS5wYXJlbnROb2RlLCAiaW5jcmVtZW50YWwiKQogICAgICAgICAgICAgJiYgIXczY19zbGlkeS5oYXNfY2xhc3Mobm9kZSwgIm5vbi1pbmNyZW1lbnRhbCIpKQogICAgICAgICAgcmV0dXJuIG5vZGU7CiAgICAgIH0KICAgIH0KCiAgICByZXR1cm4gbm9kZTsKICB9LAoKICAvLyBzZXQgdmlzaWJpbGl0eSBmb3IgYWxsIGVsZW1lbnRzIG9uIGN1cnJlbnQgc2xpZGUgd2l0aAogIC8vIGEgcGFyZW50IGVsZW1lbnQgd2l0aCBhdHRyaWJ1dGUgY2xhc3M9ImluY3JlbWVudGFsIgogIHNldF92aXNpYmlsaXR5X2FsbF9pbmNyZW1lbnRhbDogZnVuY3Rpb24gKHZhbHVlKSB7CiAgICB2YXIgbm9kZSA9IHRoaXMubmV4dF9pbmNyZW1lbnRhbF9pdGVtKG51bGwpOwoKICAgIGlmICh2YWx1ZSA9PSAiaGlkZGVuIikKICAgIHsKICAgICAgd2hpbGUgKG5vZGUpCiAgICAgIHsKICAgICAgICB3M2Nfc2xpZHkuYWRkX2NsYXNzKG5vZGUsICJpbnZpc2libGUiKTsKICAgICAgICBub2RlID0gdzNjX3NsaWR5Lm5leHRfaW5jcmVtZW50YWxfaXRlbShub2RlKTsKICAgICAgfQogICAgfQogICAgZWxzZSAvLyB2YWx1ZSA9PSAidmlzaWJsZSIKICAgIHsKICAgICAgd2hpbGUgKG5vZGUpCiAgICAgIHsKICAgICAgICB3M2Nfc2xpZHkucmVtb3ZlX2NsYXNzKG5vZGUsICJpbnZpc2libGUiKTsKICAgICAgICBub2RlID0gdzNjX3NsaWR5Lm5leHRfaW5jcmVtZW50YWxfaXRlbShub2RlKTsKICAgICAgfQogICAgfQogIH0sCgogIC8vIHJldmVhbCB0aGUgbmV4dCBoaWRkZW4gaXRlbSBvbiB0aGUgc2xpZGUKICAvLyBub2RlIGlzIG51bGwgb3IgdGhlIG5vZGUgdGhhdCB3YXMgbGFzdCByZXZlYWxlZAogIHJldmVhbF9uZXh0X2l0ZW06IGZ1bmN0aW9uIChub2RlKSB7CiAgICBub2RlID0gdzNjX3NsaWR5Lm5leHRfaW5jcmVtZW50YWxfaXRlbShub2RlKTsKCiAgICBpZiAobm9kZSAmJiBub2RlLm5vZGVUeXBlID09IDEpICAvLyBhbiBlbGVtZW50CiAgICAgIHczY19zbGlkeS5yZW1vdmVfY2xhc3Mobm9kZSwgImludmlzaWJsZSIpOwoKICAgIHJldHVybiBub2RlOwogIH0sCgogIC8vIGV4YWN0IGludmVyc2Ugb2YgcmV2ZWFsTmV4dEl0ZW0obm9kZSkKICBoaWRlX3ByZXZpb3VzX2l0ZW06IGZ1bmN0aW9uIChub2RlKSB7CiAgICBpZiAobm9kZSAmJiBub2RlLm5vZGVUeXBlID09IDEpICAvLyBhbiBlbGVtZW50CiAgICAgIHczY19zbGlkeS5hZGRfY2xhc3Mobm9kZSwgImludmlzaWJsZSIpOwoKICAgIHJldHVybiB0aGlzLnByZXZpb3VzX2luY3JlbWVudGFsX2l0ZW0obm9kZSk7CiAgfSwKCiAgLy8gbGVmdCB0byByaWdodCB0cmF2ZXJzYWwgb2Ygcm9vdCdzIGNvbnRlbnQKICBuZXh0X25vZGU6IGZ1bmN0aW9uIChyb290LCBub2RlKSB7CiAgICBpZiAobm9kZSA9PSBudWxsKQogICAgICByZXR1cm4gcm9vdC5maXJzdENoaWxkOwoKICAgIGlmIChub2RlLmZpcnN0Q2hpbGQpCiAgICAgIHJldHVybiBub2RlLmZpcnN0Q2hpbGQ7CgogICAgaWYgKG5vZGUubmV4dFNpYmxpbmcpCiAgICAgIHJldHVybiBub2RlLm5leHRTaWJsaW5nOwoKICAgIGZvciAoOzspCiAgICB7CiAgICAgIG5vZGUgPSBub2RlLnBhcmVudE5vZGU7CgogICAgICBpZiAoIW5vZGUgfHwgbm9kZSA9PSByb290KQogICAgICAgIGJyZWFrOwoKICAgICAgaWYgKG5vZGUgJiYgbm9kZS5uZXh0U2libGluZykKICAgICAgICByZXR1cm4gbm9kZS5uZXh0U2libGluZzsKICAgIH0KCiAgICByZXR1cm4gbnVsbDsKICB9LAoKICAvLyByaWdodCB0byBsZWZ0IHRyYXZlcnNhbCBvZiByb290J3MgY29udGVudAogIHByZXZpb3VzX25vZGU6IGZ1bmN0aW9uIChyb290LCBub2RlKSB7CiAgICBpZiAobm9kZSA9PSBudWxsKQogICAgewogICAgICBub2RlID0gcm9vdC5sYXN0Q2hpbGQ7CgogICAgICBpZiAobm9kZSkKICAgICAgewogICAgICAgIHdoaWxlIChub2RlLmxhc3RDaGlsZCkKICAgICAgICAgIG5vZGUgPSBub2RlLmxhc3RDaGlsZDsKICAgICAgfQoKICAgICAgcmV0dXJuIG5vZGU7CiAgICB9CgogICAgaWYgKG5vZGUucHJldmlvdXNTaWJsaW5nKQogICAgewogICAgICBub2RlID0gbm9kZS5wcmV2aW91c1NpYmxpbmc7CgogICAgICB3aGlsZSAobm9kZS5sYXN0Q2hpbGQpCiAgICAgICAgbm9kZSA9IG5vZGUubGFzdENoaWxkOwoKICAgICAgcmV0dXJuIG5vZGU7CiAgICB9CgogICAgaWYgKG5vZGUucGFyZW50Tm9kZSAhPSByb290KQogICAgICByZXR1cm4gbm9kZS5wYXJlbnROb2RlOwoKICAgIHJldHVybiBudWxsOwogIH0sCgogIHByZXZpb3VzX3NpYmxpbmdfZWxlbWVudDogZnVuY3Rpb24gKGVsKSB7CiAgICBlbCA9IGVsLnByZXZpb3VzU2libGluZzsKCiAgICB3aGlsZSAoZWwgJiYgZWwubm9kZVR5cGUgIT0gMSkKICAgICAgZWwgPSBlbC5wcmV2aW91c1NpYmxpbmc7CgogICAgcmV0dXJuIGVsOwogIH0sCgogIG5leHRfc2libGluZ19lbGVtZW50OiBmdW5jdGlvbiAoZWwpIHsKICAgIGVsID0gZWwubmV4dFNpYmxpbmc7CgogICAgd2hpbGUgKGVsICYmIGVsLm5vZGVUeXBlICE9IDEpCiAgICAgIGVsID0gZWwubmV4dFNpYmxpbmc7CgogICAgcmV0dXJuIGVsOwogIH0sCgogIGZpcnN0X2NoaWxkX2VsZW1lbnQ6IGZ1bmN0aW9uIChlbCkgewogICAgdmFyIG5vZGU7CgogICAgZm9yIChub2RlID0gZWwuZmlyc3RDaGlsZDsgbm9kZTsgbm9kZSA9IG5vZGUubmV4dFNpYmxpbmcpCiAgICB7CiAgICAgIGlmIChub2RlLm5vZGVUeXBlID09IDEpCiAgICAgICAgYnJlYWs7CiAgICB9CgogICAgcmV0dXJuIG5vZGU7CiAgfSwKCiAgZmlyc3RfdGFnOiBmdW5jdGlvbiAoZWxlbWVudCwgdGFnKSB7CiAgICB2YXIgbm9kZTsKCiAgICBpZiAoIXRoaXMuaXNfeGh0bWwpCiAgICAgIHRhZyA9IHRhZy50b1VwcGVyQ2FzZSgpOwoKICAgIGZvciAobm9kZSA9IGVsZW1lbnQuZmlyc3RDaGlsZDsgbm9kZTsgbm9kZSA9IG5vZGUubmV4dFNpYmxpbmcpCiAgICB7CiAgICAgIGlmIChub2RlLm5vZGVUeXBlID09IDEgJiYgbm9kZS5ub2RlTmFtZSA9PSB0YWcpCiAgICAgICAgYnJlYWs7CiAgICB9CgogICAgcmV0dXJuIG5vZGU7CiAgfSwKCiAgaGlkZV9zZWxlY3Rpb246IGZ1bmN0aW9uICgpIHsKICAgIGlmICh3aW5kb3cuZ2V0U2VsZWN0aW9uKSAvLyBGaXJlZm94LCBDaHJvbWl1bSwgU2FmYXJpLCBPcGVyYQogICAgewogICAgICB2YXIgc2VsZWN0aW9uID0gd2luZG93LmdldFNlbGVjdGlvbigpOwoKICAgICAgaWYgKHNlbGVjdGlvbi5yYW5nZUNvdW50ID4gMCkKICAgICAgewogICAgICAgIHZhciByYW5nZSA9IHNlbGVjdGlvbi5nZXRSYW5nZUF0KDApOwogICAgICAgIHJhbmdlLmNvbGxhcHNlIChmYWxzZSk7CiAgICAgIH0KICAgIH0KICAgIGVsc2UgLy8gSW50ZXJuZXQgRXhwbG9yZXIKICAgIHsKICAgICAgdmFyIHRleHRSYW5nZSA9IGRvY3VtZW50LnNlbGVjdGlvbi5jcmVhdGVSYW5nZSAoKTsKICAgICAgdGV4dFJhbmdlLmNvbGxhcHNlIChmYWxzZSk7CiAgICB9CiAgfSwKCiAgZ2V0X3NlbGVjdGVkX3RleHQ6IGZ1bmN0aW9uICgpIHsKICAgIHRyeQogICAgewogICAgICBpZiAod2luZG93LmdldFNlbGVjdGlvbikKICAgICAgICByZXR1cm4gd2luZG93LmdldFNlbGVjdGlvbigpLnRvU3RyaW5nKCk7CgogICAgICBpZiAoZG9jdW1lbnQuZ2V0U2VsZWN0aW9uKQogICAgICAgIHJldHVybiBkb2N1bWVudC5nZXRTZWxlY3Rpb24oKS50b1N0cmluZygpOwoKICAgICAgaWYgKGRvY3VtZW50LnNlbGVjdGlvbikKICAgICAgICByZXR1cm4gZG9jdW1lbnQuc2VsZWN0aW9uLmNyZWF0ZVJhbmdlKCkudGV4dDsKICAgIH0KICAgIGNhdGNoIChlKQogICAgewogICAgfQoKICAgIHJldHVybiAiIjsKICB9LAoKICAvLyBtYWtlIG5vdGUgb2YgbGVuZ3RoIG9mIHNlbGVjdGVkIHRleHQKICAvLyBhcyB0aGlzIGV2YWx1YXRlcyB0byB6ZXJvIGluIGNsaWNrIGV2ZW50CiAgbW91c2VfYnV0dG9uX3VwOiBmdW5jdGlvbiAoZSkgewogICAgdzNjX3NsaWR5LnNlbGVjdGVkX3RleHRfbGVuID0gdzNjX3NsaWR5LmdldF9zZWxlY3RlZF90ZXh0KCkubGVuZ3RoOwogIH0sCgogIG1vdXNlX2J1dHRvbl9kb3duOiBmdW5jdGlvbiAoZSkgewogICAgdzNjX3NsaWR5LnNlbGVjdGVkX3RleHRfbGVuID0gdzNjX3NsaWR5LmdldF9zZWxlY3RlZF90ZXh0KCkubGVuZ3RoOwogICAgdzNjX3NsaWR5Lm1vdXNlX3ggPSBlLmNsaWVudFg7CiAgICB3M2Nfc2xpZHkubW91c2VfeSA9IGUuY2xpZW50WTsKICB9LAoKICAvLyByaWdodCBtb3VzZSBidXR0b24gY2xpY2sgaXMgcmVzZXJ2ZWQgZm9yIGNvbnRleHQgbWVudXMKICAvLyBpdCBpcyBtb3JlIHJlbGlhYmxlIHRvIGRldGVjdCByaWdodGNsaWNrIHRoYW4gbGVmdGNsaWNrCiAgbW91c2VfYnV0dG9uX2NsaWNrOiBmdW5jdGlvbiAoZSkgewogICAgaWYgKCFlKQogICAgICB2YXIgZSA9IHdpbmRvdy5ldmVudDsKCiAgICBpZiAoTWF0aC5hYnMoZS5jbGllbnRYIC13M2Nfc2xpZHkubW91c2VfeCkgKwogICAgICAgIE1hdGguYWJzKGUuY2xpZW50WSAtdzNjX3NsaWR5Lm1vdXNlX3kpID4gMTApCiAgICAgIHJldHVybiB0cnVlOwoKICAgIGlmICh3M2Nfc2xpZHkuc2VsZWN0ZWRfdGV4dF9sZW4gPiAwKQogICAgICByZXR1cm4gdHJ1ZTsKCiAgICB2YXIgcmlnaHRjbGljayA9IGZhbHNlOwogICAgdmFyIGxlZnRjbGljayA9IGZhbHNlOwogICAgdmFyIG1pZGRsZWNsaWNrID0gZmFsc2U7CiAgICB2YXIgdGFyZ2V0OwoKICAgIGlmICghZSkKICAgICAgdmFyIGUgPSB3aW5kb3cuZXZlbnQ7CgogICAgaWYgKGUudGFyZ2V0KQogICAgICB0YXJnZXQgPSBlLnRhcmdldDsKICAgIGVsc2UgaWYgKGUuc3JjRWxlbWVudCkKICAgICAgdGFyZ2V0ID0gZS5zcmNFbGVtZW50OwoKICAgIC8vIHdvcmsgYXJvdW5kIFNhZmFyaSBidWcKICAgIGlmICh0YXJnZXQubm9kZVR5cGUgPT0gMykKICAgICAgdGFyZ2V0ID0gdGFyZ2V0LnBhcmVudE5vZGU7CgogICAgaWYgKGUud2hpY2gpIC8vIGFsbCBicm93c2VycyBleGNlcHQgSUUKICAgIHsKICAgICAgbGVmdGNsaWNrID0gKGUud2hpY2ggPT0gMSk7CiAgICAgIG1pZGRsZWNsaWNrID0gKGUud2hpY2ggPT0gMik7CiAgICAgIHJpZ2h0Y2xpY2sgPSAoZS53aGljaCA9PSAzKTsKICAgIH0KICAgIGVsc2UgaWYgKGUuYnV0dG9uKQogICAgewogICAgICAvLyBLb25xdWVyb3IgZ2l2ZXMgMSBmb3IgbGVmdCwgNCBmb3IgbWlkZGxlCiAgICAgIC8vIElFNiBnaXZlcyAwIGZvciBsZWZ0IGFuZCBub3QgMSBhcyBJIGV4cGVjdGVkCgogICAgICBpZiAoZS5idXR0b24gPT0gNCkKICAgICAgICBtaWRkbGVjbGljayA9IHRydWU7CgogICAgICAvLyBhbGwgYnJvd3NlcnMgYWdyZWUgb24gMiBmb3IgcmlnaHQgYnV0dG9uCiAgICAgIHJpZ2h0Y2xpY2sgPSAoZS5idXR0b24gPT0gMik7CiAgICB9CiAgICBlbHNlCiAgICAgIGxlZnRjbGljayA9IHRydWU7CgogICAgaWYgKHczY19zbGlkeS5zZWxlY3RlZF90ZXh0X2xlbiA+IDApCiAgICB7CiAgICAgIHczY19zbGlkeS5zdG9wX3Byb3BhZ2F0aW9uKGUpOwogICAgICBlLmNhbmNlbCA9IHRydWU7CiAgICAgIGUucmV0dXJuVmFsdWUgPSBmYWxzZTsKICAgICAgcmV0dXJuIGZhbHNlOwogICAgfQoKICAgIC8vIGRpc21pc3MgdGFibGUgb2YgY29udGVudHMKICAgIHczY19zbGlkeS5oaWRlX3RhYmxlX29mX2NvbnRlbnRzKGZhbHNlKTsKCiAgICAvLyBjaGVjayBpZiB0YXJnZXQgaXMgc29tZXRoaW5nIHRoYXQgcHJvYmFibHkgd2FudCdzIGNsaWNrcwogICAgLy8gZS5nLiBhLCBlbWJlZCwgb2JqZWN0LCBpbnB1dCwgdGV4dGFyZWEsIHNlbGVjdCwgb3B0aW9uCiAgICB2YXIgdGFnID0gdGFyZ2V0Lm5vZGVOYW1lLnRvTG93ZXJDYXNlKCk7CgogICAgaWYgKHczY19zbGlkeS5tb3VzZV9jbGlja19lbmFibGVkICYmIGxlZnRjbGljayAmJgogICAgICAgICF3M2Nfc2xpZHkuc3BlY2lhbF9lbGVtZW50KHRhcmdldCkgJiYKICAgICAgICAhdGFyZ2V0Lm9uY2xpY2spCiAgICB7CiAgICAgIHczY19zbGlkeS5uZXh0X3NsaWRlKHRydWUpOwogICAgICB3M2Nfc2xpZHkuc3RvcF9wcm9wYWdhdGlvbihlKTsKICAgICAgZS5jYW5jZWwgPSB0cnVlOwogICAgICBlLnJldHVyblZhbHVlID0gZmFsc2U7CiAgICAgIHJldHVybiBmYWxzZTsKICAgIH0KCiAgICByZXR1cm4gdHJ1ZTsKICB9LAoKICBzcGVjaWFsX2VsZW1lbnQ6IGZ1bmN0aW9uIChlbGVtZW50KSB7CiAgICBpZiAodGhpcy5oYXNfY2xhc3MoZWxlbWVudCwgIm5vbi1pbnRlcmFjdGl2ZSIpKQogICAgICByZXR1cm4gZmFsc2U7CgogICAgdmFyIHRhZyA9IGVsZW1lbnQubm9kZU5hbWUudG9Mb3dlckNhc2UoKTsKCiAgICByZXR1cm4gZWxlbWVudC5vbmtleWRvd24gfHwKICAgICAgZWxlbWVudC5vbmNsaWNrIHx8CiAgICAgIHRhZyA9PSAiYSIgfHwKICAgICAgdGFnID09ICJlbWJlZCIgfHwKICAgICAgdGFnID09ICJvYmplY3QiIHx8CiAgICAgIHRhZyA9PSAidmlkZW8iIHx8CiAgICAgIHRhZyA9PSAiYXVkaW8iIHx8CiAgICAgIHRhZyA9PSAic3ZnIiB8fAogICAgICB0YWcgPT0gImNhbnZhcyIgfHwKICAgICAgdGFnID09ICJpbnB1dCIgfHwKICAgICAgdGFnID09ICJ0ZXh0YXJlYSIgfHwKICAgICAgdGFnID09ICJzZWxlY3QiIHx8CiAgICAgIHRhZyA9PSAib3B0aW9uIjsKICB9LAoKICBzbGlkeV9jaHJvbWU6IGZ1bmN0aW9uIChlbCkgewogICAgd2hpbGUgKGVsKQogICAgewogICAgICBpZiAoZWwgPT0gdzNjX3NsaWR5LnRvYyB8fAogICAgICAgICAgZWwgPT0gdzNjX3NsaWR5LnRvb2xiYXIgfHwKICAgICAgICAgIHczY19zbGlkeS5oYXNfY2xhc3MoZWwsICJvdXRsaW5lIikpCiAgICAgICAgcmV0dXJuIHRydWU7CgogICAgICBlbCA9IGVsLnBhcmVudE5vZGU7CiAgICB9CgogICAgcmV0dXJuIGZhbHNlOwogIH0sCgogIGdldF9rZXk6IGZ1bmN0aW9uIChlKQogIHsKICAgIHZhciBrZXk7CgogICAgLy8ga2x1ZGdlIGFyb3VuZCBOUy9JRSBkaWZmZXJlbmNlcyAKICAgIGlmICh0eXBlb2Ygd2luZG93LmV2ZW50ICE9ICJ1bmRlZmluZWQiKQogICAgICBrZXkgPSB3aW5kb3cuZXZlbnQua2V5Q29kZTsKICAgIGVsc2UgaWYgKGUud2hpY2gpCiAgICAgIGtleSA9IGUud2hpY2g7CgogICAgcmV0dXJuIGtleTsKICB9LAoKICBnZXRfdGFyZ2V0OiBmdW5jdGlvbiAoZSkgewogICAgdmFyIHRhcmdldDsKCiAgICBpZiAoIWUpCiAgICAgIGUgPSB3aW5kb3cuZXZlbnQ7CgogICAgaWYgKGUudGFyZ2V0KQogICAgICB0YXJnZXQgPSBlLnRhcmdldDsKICAgIGVsc2UgaWYgKGUuc3JjRWxlbWVudCkKICAgICAgdGFyZ2V0ID0gZS5zcmNFbGVtZW50OwoKICAgIGlmICh0YXJnZXQubm9kZVR5cGUgIT0gMSkKICAgICAgdGFyZ2V0ID0gdGFyZ2V0LnBhcmVudE5vZGU7CgogICAgcmV0dXJuIHRhcmdldDsKICB9LAoKICAvLyBkb2VzIGRpc3BsYXkgcHJvcGVydHkgcHJvdmlkZSBjb3JyZWN0IGRlZmF1bHRzPwogIGlzX2Jsb2NrOiBmdW5jdGlvbiAoZWxlbSkgewogICAgdmFyIHRhZyA9IGVsZW0ubm9kZU5hbWUudG9Mb3dlckNhc2UoKTsKCiAgICByZXR1cm4gdGFnID09ICJvbCIgfHwgdGFnID09ICJ1bCIgfHwgdGFnID09ICJwIiB8fCB0YWcgPT0gImRsIiB8fAogICAgICAgICAgIHRhZyA9PSAibGkiIHx8IHRhZyA9PSAidGFibGUiIHx8IHRhZyA9PSAicHJlIiB8fAogICAgICAgICAgIHRhZyA9PSAiaDEiIHx8IHRhZyA9PSAiaDIiIHx8IHRhZyA9PSAiaDMiIHx8CiAgICAgICAgICAgdGFnID09ICJoNCIgfHwgdGFnID09ICJoNSIgfHwgdGFnID09ICJoNiIgfHwKICAgICAgICAgICB0YWcgPT0gImJsb2NrcXVvdGUiIHx8IHRhZyA9PSAiYWRkcmVzcyI7IAogIH0sCgogIGFkZF9saXN0ZW5lcjogZnVuY3Rpb24gKGVsZW1lbnQsIGV2ZW50LCBoYW5kbGVyKSB7CiAgICBpZiAod2luZG93LmFkZEV2ZW50TGlzdGVuZXIpCiAgICAgIGVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihldmVudCwgaGFuZGxlciwgZmFsc2UpOwogICAgZWxzZQogICAgICBlbGVtZW50LmF0dGFjaEV2ZW50KCJvbiIrZXZlbnQsIGhhbmRsZXIpOwogIH0sCgogIC8vIHVzZWQgdG8gcHJldmVudCBldmVudCBwcm9wYWdhdGlvbiBmcm9tIGZpZWxkIGNvbnRyb2xzCiAgc3RvcF9wcm9wYWdhdGlvbjogZnVuY3Rpb24gKGV2ZW50KSB7CiAgICBldmVudCA9IGV2ZW50ID8gZXZlbnQgOiB3aW5kb3cuZXZlbnQ7CiAgICBldmVudC5jYW5jZWxCdWJibGUgPSB0cnVlOyAgLy8gZm9yIElFCgogICAgaWYgKGV2ZW50LnN0b3BQcm9wYWdhdGlvbikKICAgICAgZXZlbnQuc3RvcFByb3BhZ2F0aW9uKCk7CgogICAgcmV0dXJuIHRydWU7CiAgfSwKCiAgY2FuY2VsOiBmdW5jdGlvbiAoZXZlbnQpIHsKICAgIGlmIChldmVudCkKICAgIHsKICAgICAgIGV2ZW50LmNhbmNlbCA9IHRydWU7CiAgICAgICBldmVudC5yZXR1cm5WYWx1ZSA9IGZhbHNlOwoKICAgICAgaWYgKGV2ZW50LnByZXZlbnREZWZhdWx0KQogICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7CiAgICB9CgogICAgdzNjX3NsaWR5LmtleV93YW50ZWQgPSBmYWxzZTsKICAgIHJldHVybiBmYWxzZTsKICB9LAoKLy8gZm9yIGVhY2ggbGFuZ3VhZ2UgZGVmaW5lIGFuIGFzc29jaWF0aXZlIGFycmF5Ci8vIGFuZCBhbHNvIHRoZSBoZWxwIHRleHQgd2hpY2ggaXMgbG9uZ2VyCgogIHN0cmluZ3NfZXM6IHsKICAgICJzbGlkZSI6InDDoWcuIiwKICAgICJoZWxwPyI6IkF5dWRhIiwKICAgICJjb250ZW50cz8iOiLDjW5kaWNlIiwKICAgICJ0YWJsZSBvZiBjb250ZW50cyI6InRhYmxhIGRlIGNvbnRlbmlkb3MiLAogICAgIlRhYmxlIG9mIENvbnRlbnRzIjoiVGFibGEgZGUgQ29udGVuaWRvcyIsCiAgICAicmVzdGFydCBwcmVzZW50YXRpb24iOiJSZWluaWNpYXIgcHJlc2VudGFjacOzbiIsCiAgICAicmVzdGFydD8iOiJJbmljaW8iCiAgfSwKICBoZWxwX2VzOgogICAgIlV0aWxpY2UgZWwgcmF0w7NuLCBiYXJyYSBlc3BhY2lhZG9yYSwgdGVjbGFzIEl6ZGEvRGNoYSwgIiArCiAgICAibyBSZSBww6FnIHkgQXYgcMOhZy4gVXNlIFMgeSBCIHBhcmEgY2FtYmlhciBlbCB0YW1hw7FvIGRlIGZ1ZW50ZS4iLAoKICBzdHJpbmdzX2NhOiB7CiAgICAic2xpZGUiOiJww6BnLi4iLAogICAgImhlbHA/IjoiQWp1ZGEiLAogICAgImNvbnRlbnRzPyI6IsONbmRleCIsCiAgICAidGFibGUgb2YgY29udGVudHMiOiJ0YXVsYSBkZSBjb250aW5ndXRzIiwKICAgICJUYWJsZSBvZiBDb250ZW50cyI6IlRhdWxhIGRlIENvbnRpbmd1dHMiLAogICAgInJlc3RhcnQgcHJlc2VudGF0aW9uIjoiUmVpbmljaWFyIHByZXNlbnRhY2nDsyIsCiAgICAicmVzdGFydD8iOiJJbmljaSIKICB9LAogIGhlbHBfY2E6CiAgICAiVXRpbGl0emkgZWwgcmF0b2zDrSwgYmFycmEgZXNwYWlhZG9yYSwgdGVjbGVzIEVzcS4vRHRhLiAiICsKICAgICJvIFJlIHDDoGcgeSBBdiBww6BnLiBVc2kgUyBpIEIgcGVyIGNhbnZpYXIgZ3JhbmTDoHJpYSBkZSBmb250LiIsCgogIHN0cmluZ3NfY3M6IHsKICAgICJzbGlkZSI6InNuw61tZWsiLAogICAgImhlbHA/IjoibsOhcG92xJtkYSIsCiAgICAiY29udGVudHM/Ijoib2JzYWgiLAogICAgInRhYmxlIG9mIGNvbnRlbnRzIjoib2JzYWggcHJlemVudGFjZSIsCiAgICAiVGFibGUgb2YgQ29udGVudHMiOiJPYnNhaCBwcmV6ZW50YWNlIiwKICAgICJyZXN0YXJ0IHByZXNlbnRhdGlvbiI6Inpub3Z1IHNwdXN0aXQgcHJlemVudGFjaSIsCiAgICAicmVzdGFydD8iOiJyZXN0YXJ0IgogIH0sCiAgaGVscF9jczoKICAgICJQcmV6ZW50YWNpIG3Fr8W+ZXRlIHByb2Now6F6ZXQgcG9tb2PDrSBrbGlrbnV0w60gbXnFoWksIG1lemVybsOta3UsICIgKwogICAgIsWhaXBlayB2bGV2byBhIHZwcmF2byBuZWJvIGtsw6F2ZXMgUGFnZVVwIGEgUGFnZURvd24uIFDDrXNtbyBzZSAiICsKICAgICJkw6EgenbEm3TFoWl0IGEgem1lbsWhaXQgcG9tb2PDrSBrbMOhdmVzIEIgYSBTLiIsCgogIHN0cmluZ3Nfbmw6IHsKICAgICJzbGlkZSI6InBhZ2luYSIsCiAgICAiaGVscD8iOiJIZWxwPyIsCiAgICAiY29udGVudHM/IjoiSW5ob3VkPyIsCiAgICAidGFibGUgb2YgY29udGVudHMiOiJpbmhvdWRzb3BnYXZlIiwKICAgICJUYWJsZSBvZiBDb250ZW50cyI6IkluaG91ZHNvcGdhdmUiLAogICAgInJlc3RhcnQgcHJlc2VudGF0aW9uIjoiaGVyc3RhcnQgcHJlc2VudGF0aWUiLAogICAgInJlc3RhcnQ/IjoiSGVyc3RhcnQ/IgogIH0sCiAgaGVscF9ubDoKICAgICAiTmF2aWdlZXIgZC5tLnYuIGhldCBtdWlzLCBzcGF0aWViYXIsIExpbmtzL1JlY2h0cyB0b2V0c2VuLCAiICsKICAgICAib2YgUGdVcCBlbiBQZ0RuLiBHZWJydWlrIFMgZW4gQiBvbSBkZSBrYXJha3Rlcmdyb290dGUgdGUgdmVyYW5kZXJlbi4iLAoKICBzdHJpbmdzX2RlOiB7CiAgICAic2xpZGUiOiJTZWl0ZSIsCiAgICAiaGVscD8iOiJIaWxmZSIsCiAgICAiY29udGVudHM/Ijoiw5xiZXJzaWNodCIsCiAgICAidGFibGUgb2YgY29udGVudHMiOiJJbmhhbHRzdmVyemVpY2huaXMiLAogICAgIlRhYmxlIG9mIENvbnRlbnRzIjoiSW5oYWx0c3ZlcnplaWNobmlzIiwKICAgICJyZXN0YXJ0IHByZXNlbnRhdGlvbiI6IlByw6RzZW50YXRpb24gbmV1IHN0YXJ0ZW4iLAogICAgInJlc3RhcnQ/IjoiTmV1c3RhcnQiCiAgfSwKICBoZWxwX2RlOgogICAgIkJlbnV0emVuIFNpZSBkaWUgTWF1cywgTGVlcnNjaGxhZywgZGllIEN1cnNvcnRhc3RlbiBsaW5rcy9yZWNodHMgb2RlciAiICsKICAgICJQYWdlIHVwL1BhZ2UgRG93biB6dW0gV2VjaHNlbG4gZGVyIFNlaXRlbiB1bmQgUyB1bmQgQiBmw7xyIGRpZSBTY2hyaWZ0Z3LDtnNzZS4iLAoKICBzdHJpbmdzX3BsOiB7CiAgICAic2xpZGUiOiJzbGFqZCIsCiAgICAiaGVscD8iOiJwb21vYz8iLAogICAgImNvbnRlbnRzPyI6InNwaXMgdHJlxZtjaT8iLAogICAgInRhYmxlIG9mIGNvbnRlbnRzIjoic3BpcyB0cmXFm2NpIiwKICAgICJUYWJsZSBvZiBDb250ZW50cyI6IlNwaXMgVHJlxZtjaSIsCiAgICAicmVzdGFydCBwcmVzZW50YXRpb24iOiJSZXN0YXJ0dWogcHJlemVudGFjasSZIiwKICAgICJyZXN0YXJ0PyI6InJlc3RhcnQ/IgogIH0sCiAgaGVscF9wbDoKICAgICJabWllbmlhaiBzbGFqZHkga2xpa2FqxIVjIG15c3rEhSwgbmFjaXNrYWrEhWMgc3BhY2rEmSwgc3RyemHFgmtpIGxld28vcHJhd28iICsKICAgICJsdWIgUGdVcCAvIFBnRG4uIFXFvHlqIGtsYXdpc3p5IFMgaSBCLCBhYnkgem1pZW5pxIcgcm96bWlhciBjemN6aW9ua2kuIiwKCiAgc3RyaW5nc19mcjogewogICAgInNsaWRlIjoicGFnZSIsCiAgICAiaGVscD8iOiJBaWRlIiwKICAgICJjb250ZW50cz8iOiJJbmRleCIsCiAgICAidGFibGUgb2YgY29udGVudHMiOiJ0YWJsZSBkZXMgbWF0acOocmVzIiwKICAgICJUYWJsZSBvZiBDb250ZW50cyI6IlRhYmxlIGRlcyBtYXRpw6hyZXMiLAogICAgInJlc3RhcnQgcHJlc2VudGF0aW9uIjoiUmVjb21tZW5jZXIgbCdleHBvc8OpIiwKICAgICJyZXN0YXJ0PyI6IkTDqWJ1dCIKICB9LAogIGhlbHBfZnI6CiAgICAiTmF2aWd1ZXogYXZlYyBsYSBzb3VyaXMsIGxhIGJhcnJlIGQnZXNwYWNlLCBsZXMgZmzDqGNoZXMgIiArCiAgICAiZ2F1Y2hlL2Ryb2l0ZSBvdSBsZXMgdG91Y2hlcyBQZyBVcCwgUGcgRG4uIFV0aWxpc2V6ICIgKwogICAgImxlcyB0b3VjaGVzIFMgZXQgQiBwb3VyIG1vZGlmaWVyIGxhIHRhaWxsZSBkZSBsYSBwb2xpY2UuIiwKCiAgc3RyaW5nc19odTogewogICAgInNsaWRlIjoib2xkYWwiLAogICAgImhlbHA/Ijoic2Vnw610c8OpZyIsCiAgICAiY29udGVudHM/IjoidGFydGFsb20iLAogICAgInRhYmxlIG9mIGNvbnRlbnRzIjoidGFydGFsb21qZWd5esOpayIsCiAgICAiVGFibGUgb2YgQ29udGVudHMiOiJUYXJ0YWxvbWplZ3l6w6lrIiwKICAgICJyZXN0YXJ0IHByZXNlbnRhdGlvbiI6ImJlbXV0YXTDsyDDumpyYWluZMOtdMOhc2EiLAogICAgInJlc3RhcnQ/Ijoiw7pqcmFpbmTDrXTDoXMiCiAgfSwKICBoZWxwX2h1OgogICAgIkF6IG9sZGFsYWsga8O2enRpIGzDqXBrZWTDqXNoZXoga2F0dGludHNvbiBheiBlZ8OpcnJlbCwgdmFneSAiICsKICAgICJoYXN6bsOhbGphIGEgc3rDs2vDtnosIGEgYmFsLCB2YWd5IGEgam9iYiBuecOtbCwgaWxsZXR2ZSBhIFBhZ2UgRG93biwgIiArCiAgICAiUGFnZSBVcCBiaWxsZW50ecWxa2V0LiBBeiBTIMOpcyBhIEIgYmlsbGVudHnFsWtrZWwgdsOhbHRvenRhdGhhdGphICIgKwogICAgImEgc3rDtnZlZyBtw6lyZXTDqXQuIiwKCiAgc3RyaW5nc19pdDogewogICAgInNsaWRlIjoicGFnLiIsCiAgICAiaGVscD8iOiJBaXV0byIsCiAgICAiY29udGVudHM/IjoiSW5kaWNlIiwKICAgICJ0YWJsZSBvZiBjb250ZW50cyI6ImluZGljZSIsCiAgICAiVGFibGUgb2YgQ29udGVudHMiOiJJbmRpY2UiLAogICAgInJlc3RhcnQgcHJlc2VudGF0aW9uIjoiUmljb21pbmNpYXJlIGxhIHByZXNlbnRhemlvbmUiLAogICAgInJlc3RhcnQ/IjoiSW5pemlvIgogIH0sCiAgaGVscF9pdDoKICAgICJOYXZpZ2FyZSBjb24gbW91c2UsIGJhcnJhIHNwYXppbywgZnJlY2NlIHNpbmlzdHJhL2Rlc3RyYSBvICIgKwogICAgIlBnVXAgZSBQZ0RuLiBVc2FyZSBTIGUgQiBwZXIgY2FtYmlhcmUgbGEgZGltZW5zaW9uZSBkZWkgY2FyYXR0ZXJpLiIsCgogIHN0cmluZ3NfZWw6IHsKICAgICJzbGlkZSI6Is+DzrXOu86vzrTOsSIsCiAgICAiaGVscD8iOiLOss6/zq7OuM61zrnOsTsiLAogICAgImNvbnRlbnRzPyI6Is+AzrXPgc65zrXPh8+MzrzOtc69zrE7IiwKICAgICJ0YWJsZSBvZiBjb250ZW50cyI6Is+Azq/Ovc6xzrrOsc+CIM+AzrXPgc65zrXPh86/zrzOrc69z4nOvSIsCiAgICAiVGFibGUgb2YgQ29udGVudHMiOiLOoM6vzr3Osc66zrHPgiDOoM61z4HOuc61z4fOv868zq3Ovc+Jzr0iLAogICAgInJlc3RhcnQgcHJlc2VudGF0aW9uIjoizrXPgM6xzr3Otc66zrrOr869zrfPg863IM+AzrHPgc6/z4XPg86vzrHPg863z4IiLAogICAgInJlc3RhcnQ/IjoizrXPgM6xzr3Otc66zrrOr869zrfPg863OyIKICB9LAogIGhlbHBfZWw6CiAgICAizqDOu86/zrfOs863zrjOtc6vz4TOtSDOvM61IM+Ezr8gzrrOu86vzrogz4TOv8+FIM+Azr/Ovc+EzrnOus65zr/PjSwgz4TOvyBzcGFjZSwgz4TOsSDOss6tzrvOtyDOsc+BzrnPg8+EzrXPgc6sL860zrXOvs65zqwsICIgKwogICAgIs6uIFBhZ2UgVXAgzrrOsc65IFBhZ2UgRG93bi4gzqfPgc63z4POuc68zr/PgM6/zrnOrs+Dz4TOtSDPhM6xIM+AzrvOrs66z4TPgc6xIFMgzrrOsc65IEIgzrPOuc6xIM69zrEgzrHOu867zqzOvs61z4TOtSAiICsKICAgICLPhM6/IM68zq3Os861zrjOv8+CIM+EzrfPgiDOs8+BzrHOvM68zrHPhM6/z4POtc65z4HOrM+CLiIsCgogIHN0cmluZ3NfamE6IHsKICAgICJzbGlkZSI6IuOCueODqeOCpOODiSIsCiAgICAiaGVscD8iOiLjg5jjg6vjg5ciLAogICAgImNvbnRlbnRzPyI6IuebruasoSIsCiAgICAidGFibGUgb2YgY29udGVudHMiOiLnm67mrKHjgpLooajnpLoiLAogICAgIlRhYmxlIG9mIENvbnRlbnRzIjoi55uu5qyhIiwKICAgICJyZXN0YXJ0IHByZXNlbnRhdGlvbiI6IuacgOWIneOBi+OCieWGjeeUnyIsCiAgICAicmVzdGFydD8iOiLmnIDliJ3jgYvjgokiCiAgfSwKICBoZWxwX2phOgogICAgICLjg57jgqbjgrnlt6bjgq/jg6rjg4Pjgq8g44O7IOOCueODmuODvOOCuSDjg7sg5bem5Y+z44Kt44O8ICIgKwogICAgICLjgb7jgZ/jga8gUGFnZSBVcCDjg7sgUGFnZSBEb3du44Gn5pON5L2c77yMIFMg44O7IELjgafjg5Xjgqnjg7Pjg4jjgrXjgqTjgrrlpInmm7QiLAoKICBzdHJpbmdzX3poOiB7CiAgICAic2xpZGUiOiLlubvnga/niYciLAogICAgImhlbHA/Ijoi5biu5YqpPyIsCiAgICAiY29udGVudHM/Ijoi5YaF5a65PyIsCiAgICAidGFibGUgb2YgY29udGVudHMiOiLnm67lvZUiLAogICAgIlRhYmxlIG9mIENvbnRlbnRzIjoi55uu5b2VIiwKICAgICJyZXN0YXJ0IHByZXNlbnRhdGlvbiI6IumHjeaWsOWQr+WKqOWxleekuiIsCiAgICAicmVzdGFydD8iOiLph43mlrDlkK/liqg/IgogIH0sCiAgaGVscF96aDoKICAgICLnlKjpvKDmoIfngrnlh7ssIOepuuagvOadoSwg5bem5Y+z566t5aS0LCBQZyBVcCDlkowgUGcgRG4g5a+86IiqLiAiICsKICAgICLnlKggUywgQiDmlLnlj5jlrZfkvZPlpKflsI8uIiwKCiAgc3RyaW5nc19ydTogewogICAgInNsaWRlIjoi0YHQu9Cw0LnQtCIsCiAgICAiaGVscD8iOiLQv9C+0LzQvtGJ0Yw/IiwKICAgICJjb250ZW50cz8iOiLRgdC+0LTQtdGA0LbQsNC90LjQtT8iLAogICAgInRhYmxlIG9mIGNvbnRlbnRzIjoi0L7Qs9C70LDQstC70LXQvdC40LUiLAogICAgIlRhYmxlIG9mIENvbnRlbnRzIjoi0J7Qs9C70LDQstC70LXQvdC40LUiLAogICAgInJlc3RhcnQgcHJlc2VudGF0aW9uIjoi0L/QtdGA0LXQt9Cw0L/Rg9GB0YLQuNGC0Ywg0L/RgNC10LfQtdC90YLQsNGG0LjRjiIsCiAgICAicmVzdGFydD8iOiLQv9C10YDQtdC30LDQv9GD0YHQuj8iCiAgfSwKICBoZWxwX3J1OgogICAgItCf0LXRgNC10LzQtdGJ0LDQudGC0LXRgdGMINC60LvQuNC60LDRjyDQvNGL0YjQutC+0LksINC40YHQv9C+0LvRjNC30YPRjyDQutC70LDQstC40YjRgyDQv9GA0L7QsdC10LssINGB0YLRgNC10LvQutC4IiArCiAgICAi0LLQu9C10LLQvi/QstC/0YDQsNCy0L4g0LjQu9C4IFBnIFVwINC4IFBnIERuLiDQmtC70LDQstC40YjQuCBTINC4IEIg0LzQtdC90Y/RjtGCINGA0LDQt9C80LXRgCDRiNGA0LjRhNGC0LAuIiwKCiAgc3RyaW5nc19zdjogewogICAgInNsaWRlIjoic2lkYSIsCiAgICAiaGVscD8iOiJoasOkbHAiLAogICAgImNvbnRlbnRzPyI6ImlubmVow6VsbCIsCiAgICAidGFibGUgb2YgY29udGVudHMiOiJpbm5laMOlbGxzZsO2cnRlY2tuaW5nIiwKICAgICJUYWJsZSBvZiBDb250ZW50cyI6IklubmVow6VsbHNmw7ZydGVja25pbmciLAogICAgInJlc3RhcnQgcHJlc2VudGF0aW9uIjoidmlzYSBwcmVzZW50YXRpb25lbiBmcsOlbiBiw7ZyamFuIiwKICAgICJyZXN0YXJ0PyI6ImLDtnJqYSBvbSIKICB9LAogIGhlbHBfc3Y6CiAgICAiQmzDpGRkcmEgbWVkIGV0dCBrbGljayBtZWQgdsOkbnN0cmEgbXVza25hcHBlbiwgbWVsbGFuc2xhZ3N0YW5nZW50ZW4sICIgKwogICAgInbDpG5zdGVyLSBvY2ggaMO2Z2VycGlsdGFuZ2VudGVybmEgZWxsZXIgdGFuZ2VudGVybmEgUGcgVXAsIFBnIERuLiAiICsKICAgICJBbnbDpG5kIHRhbmdlbnRlcm5hIFMgb2NoIEIgZsO2ciBhdHQgw6RuZHJhIHRleHRlbnMgc3Rvcmxlay4iLAoKICBzdHJpbmdzOiB7IH0sCgogIGxvY2FsaXplOiBmdW5jdGlvbiAoc3JjKSB7CiAgICBpZiAoc3JjID09ICIiKQogICAgICByZXR1cm4gc3JjOwoKICAgICAvLyB0cnkgZnVsbCBsYW5ndWFnZSBjb2RlLCBlLmcuIGVuLVVTCiAgICAgdmFyIHMsIGxvb2t1cCA9IHczY19zbGlkeS5zdHJpbmdzW3czY19zbGlkeS5sYW5nXTsKCiAgICAgaWYgKGxvb2t1cCkKICAgICB7CiAgICAgICBzID0gbG9va3VwW3NyY107CgogICAgICAgaWYgKHMpCiAgICAgICAgcmV0dXJuIHM7CiAgICAgfQoKICAgICAvLyBzdHJpcCBjb3VudHJ5IGNvZGUgc3VmZml4LCBlLmcuCiAgICAgLy8gdHJ5IGVuIGlmIHVuZGVmaW5lZCBmb3IgZW4tVVMKICAgICB2YXIgbGcgPSB3M2Nfc2xpZHkubGFuZy5zcGxpdCgiLSIpOwoKICAgICBpZiAobGcubGVuZ3RoID4gMSkKICAgICB7CiAgICAgICBsb29rdXAgPSB3M2Nfc2xpZHkuc3RyaW5nc1tsZ1swXV07CgogICAgICAgaWYgKGxvb2t1cCkKICAgICAgIHsKICAgICAgICAgcyA9IGxvb2t1cFtzcmNdOwoKICAgICAgICAgaWYgKHMpCiAgICAgICAgICByZXR1cm4gczsKICAgICAgIH0KICAgICB9CgogICAgIC8vIG90aGVyd2lzZSBzdHJpbmcgYXMgaXMKICAgICByZXR1cm4gc3JjOwogIH0sCgogIGluaXRfbG9jYWxpemF0aW9uOiBmdW5jdGlvbiAoKSB7CiAgICB2YXIgaTE4biA9IHczY19zbGlkeTsKICAgIHZhciBoZWxwX3RleHQgPSB3M2Nfc2xpZHkuaGVscF90ZXh0OwoKICAgIC8vIGVhY2ggc3VjaCBsYW5ndWFnZSBhcnJheSBpcyBkZWNsYXJlZCBpbiB0aGUgbG9jYWxpemUgYXJyYXkKICAgIC8vIHRoaXMgaXMgdXNlZCBhcyBpbiAgdzNjX3NsaWR5LmxvY2FsaXplKCJmb28iKTsKICAgIHRoaXMuc3RyaW5ncyA9IHsKICAgICAgImVzIjp0aGlzLnN0cmluZ3NfZXMsCiAgICAgICJjYSI6dGhpcy5zdHJpbmdzX2NhLAogICAgICAiY3MiOnRoaXMuc3RyaW5nc19jcywKICAgICAgIm5sIjp0aGlzLnN0cmluZ3NfbmwsCiAgICAgICJkZSI6dGhpcy5zdHJpbmdzX2RlLAogICAgICAicGwiOnRoaXMuc3RyaW5nc19wbCwKICAgICAgImZyIjp0aGlzLnN0cmluZ3NfZnIsCiAgICAgICJodSI6dGhpcy5zdHJpbmdzX2h1LAogICAgICAiaXQiOnRoaXMuc3RyaW5nc19pdCwKICAgICAgImVsIjp0aGlzLnN0cmluZ3NfZWwsCiAgICAgICJqcCI6dGhpcy5zdHJpbmdzX2phLAogICAgICAiemgiOnRoaXMuc3RyaW5nc196aCwKICAgICAgInJ1Ijp0aGlzLnN0cmluZ3NfcnUsCiAgICAgICJzdiI6dGhpcy5zdHJpbmdzX3N2CiAgICB9LAoKICAgIGkxOG4uc3RyaW5nc19lc1toZWxwX3RleHRdID0gaTE4bi5oZWxwX2VzOwogICAgaTE4bi5zdHJpbmdzX2NhW2hlbHBfdGV4dF0gPSBpMThuLmhlbHBfY2E7CiAgICBpMThuLnN0cmluZ3NfY3NbaGVscF90ZXh0XSA9IGkxOG4uaGVscF9jczsKICAgIGkxOG4uc3RyaW5nc19ubFtoZWxwX3RleHRdID0gaTE4bi5oZWxwX25sOwogICAgaTE4bi5zdHJpbmdzX2RlW2hlbHBfdGV4dF0gPSBpMThuLmhlbHBfZGU7CiAgICBpMThuLnN0cmluZ3NfcGxbaGVscF90ZXh0XSA9IGkxOG4uaGVscF9wbDsKICAgIGkxOG4uc3RyaW5nc19mcltoZWxwX3RleHRdID0gaTE4bi5oZWxwX2ZyOwogICAgaTE4bi5zdHJpbmdzX2h1W2hlbHBfdGV4dF0gPSBpMThuLmhlbHBfaHU7CiAgICBpMThuLnN0cmluZ3NfaXRbaGVscF90ZXh0XSA9IGkxOG4uaGVscF9pdDsKICAgIGkxOG4uc3RyaW5nc19lbFtoZWxwX3RleHRdID0gaTE4bi5oZWxwX2VsOwogICAgaTE4bi5zdHJpbmdzX2phW2hlbHBfdGV4dF0gPSBpMThuLmhlbHBfamE7CiAgICBpMThuLnN0cmluZ3NfemhbaGVscF90ZXh0XSA9IGkxOG4uaGVscF96aDsKICAgIGkxOG4uc3RyaW5nc19ydVtoZWxwX3RleHRdID0gaTE4bi5oZWxwX3J1OwogICAgaTE4bi5zdHJpbmdzX3N2W2hlbHBfdGV4dF0gPSBpMThuLmhlbHBfc3Y7CgogICAgdzNjX3NsaWR5LmxhbmcgPSBkb2N1bWVudC5ib2R5LnBhcmVudE5vZGUuZ2V0QXR0cmlidXRlKCJsYW5nIik7CgogICAgaWYgKCF3M2Nfc2xpZHkubGFuZykKICAgICAgdzNjX3NsaWR5LmxhbmcgPSBkb2N1bWVudC5ib2R5LnBhcmVudE5vZGUuZ2V0QXR0cmlidXRlKCJ4bWw6bGFuZyIpOwoKICAgIGlmICghdzNjX3NsaWR5LmxhbmcpCiAgICAgIHczY19zbGlkeS5sYW5nID0gImVuIjsKICB9Cn07CgovLyBoYWNrIGZvciBiYWNrIGJ1dHRvbiBiZWhhdmlvcgppZiAodzNjX3NsaWR5LmllNiB8fCB3M2Nfc2xpZHkuaWU3KQp7CiAgZG9jdW1lbnQud3JpdGUoIjxpZnJhbWUgaWQ9J2hpc3RvcnlGcmFtZScgIiArCiAgInNyYz0namF2YXNjcmlwdDpcIjxodG1sIisiPjwvIisiaHRtbD5cIicgIiArCiAgImhlaWdodD0nMScgd2lkdGg9JzEnICIgKwogICJzdHlsZT0ncG9zaXRpb246YWJzb2x1dGU7bGVmdDotODAwcHgnPjwvaWZyYW1lPiIpOwp9CgovLyBhdHRhY2ggZXZlbnQgbGlzdGVuZXJzIGZvciBpbml0aWFsaXphdGlvbgp3M2Nfc2xpZHkuc2V0X3VwKCk7CgovLyBoaWRlIHRoZSBzbGlkZXMgYXMgc29vbiBhcyBib2R5IGVsZW1lbnQgaXMgYXZhaWxhYmxlCi8vIHRvIHJlZHVjZSBhbm5veWluZyBzY3JlZW4gbWVzcyBiZWZvcmUgdGhlIG9ubG9hZCBldmVudApzZXRUaW1lb3V0KHczY19zbGlkeS5oaWRlX3NsaWRlcywgNTApOwoK"></script>
  <script>(function() {
  if (!window.w3c_slidy) return;
  if (!window.Shiny) return;
  if (!window.$) return;
  // whenever a slide changes, tell shiny to recalculate what is displayed
  window.w3c_slidy.add_observer(function (slide_num) {
    // slide_num starts at position 1
    $(w3c_slidy.slides[slide_num - 1]).trigger("shown");
  });
})()
</script>
  <link href="data:text/css;charset=utf-8,body%7Bfont%2Dfamily%3A%20Cambria%3Bfont%2Dsize%3A%2018px%3Btext%2Dalign%3A%20justify%3B%7Dcode%20%7Bfont%2Dfamily%3A%20monospace%20%3Bfont%2Dsize%3A%2024px%3Bfont%2Dweight%3A%20bold%3B%7Dh1%2Etitle%20%7Bfont%2Dsize%3A%2038px%3Bcolor%3A%20DarkRed%3Btext%2Dalign%3A%20center%3B%7Dh4%2Eauthor%20%7B%20font%2Dsize%3A%2018px%3Bfont%2Dfamily%3A%20Cambria%3Bcolor%3A%20DarkBlue%3Btext%2Dalign%3A%20center%3B%7Dh4%2Edate%20%7B%20font%2Dsize%3A%2014px%3Bfont%2Dfamily%3A%20Cambria%3Bcolor%3A%20DarkBlue%3Btext%2Dalign%3A%20center%3B%7Dh1%7Bfont%2Dsize%3A%2031px%3Bfont%2Dsize%3A%2028px%3Bfont%2Dfamily%3A%20Cambria%3Bfont%2Dsize%3A%2028px%3Bfont%2Dfamily%3A%20Cambria%3B%2F%2A%20text%2Dalign%3A%20center%3B%7D" rel="stylesheet" type="text/css" media="screen, projection, print" />
</head>
<body>
<div class="slide titlepage">
  <h1 class="title">Exploratory Data Analysis in R</h1>
  <p class="author">

  </p>
</div>
<div id="course-description" class="slide section level1">
<h1>Course Description</h1>
<p>Once you’ve started learning tools for data manipulation and visualization like dplyr and ggplot2, this course gives you a chance to use them in action on a real dataset. You’ll explore the historical voting of the United Nations General Assembly, including analyzing differences in voting between countries, across time, and among international issues. In the process you’ll gain more practice with the dplyr and ggplot2 packages, learn about the broom package for tidying model output, and experience the kind of start-to-finish exploratory analysis common in data science.</p>
<h3 id="download-datasets-from-following-url">Download Datasets from following URL</h3>
<ul>
<li><a href="https://drive.google.com/file/d/1ZVkTpNKqBRXlTXfKGxOOgtwL7qGxllhT/view?usp=sharing">descriptions</a></li>
<li><a href="https://drive.google.com/file/d/1V8LoSiSsZKMHpbfBYJhpFth3BwYn4FgY/view?usp=sharing">votes</a></li>
</ul>
<h3 id="import-dataset">Import Dataset</h3>
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb1-1" title="1">descriptions &lt;-<span class="st"> </span><span class="kw">readRDS</span>(<span class="st">&#39;descriptions.rds&#39;</span>)</a></code></pre></div>
<div class="sourceCode" id="cb2"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb2-1" title="1">votes &lt;-<span class="st"> </span><span class="kw">readRDS</span>(<span class="st">&#39;votes.rds&#39;</span>)</a></code></pre></div>
<h3 id="import-library">Import Library</h3>
<div class="sourceCode" id="cb3"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb3-1" title="1"><span class="kw">library</span>(dplyr)</a></code></pre></div>
</div>
<div id="data-cleaning-and-summarizing-with-dplyr" class="slide section level1">
<h1>Data cleaning and summarizing with dplyr</h1>
<p>The best way to learn data wrangling skills is to apply them to a specific case study. Here you’ll learn how to clean and filter the United Nations voting dataset using the dplyr package, and how to summarize it into smaller, interpretable units.</p>
</div>
<div class="slide section level1">

<h2 id="example-1.1">Example 1.1:</h2>
<h3 id="filtering-rows">Filtering rows</h3>
<p>The <code>vote</code> column in the dataset has a number that represents that country’s vote:</p>
<ul>
<li><strong>1</strong>= Yes</li>
<li><strong>2</strong> = Abstain</li>
<li><strong>3</strong> = No</li>
<li><strong>8</strong> = Not present</li>
<li><strong>9</strong> = Not a member</li>
</ul>
<p>One step of data cleaning is removing observations (rows) that you’re not interested in. In this case, you want to remove “Not present” and “Not a member”.</p>
<h3 id="instructions">Instructions</h3>
<ul>
<li>Load the <code>dplyr</code> package.</li>
<li>Print the <code>votes</code> table.</li>
<li>Filter out rows where the vote recorded is “not present” or “not a member”, leaving cases where it is “yes”, “abstain”, or “no”.</li>
</ul>
<div class="sourceCode" id="cb4"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb4-1" title="1"><span class="co"># Load the dplyr package</span></a>
<a class="sourceLine" id="cb4-2" title="2"><span class="kw">library</span>(dplyr)</a>
<a class="sourceLine" id="cb4-3" title="3"></a>
<a class="sourceLine" id="cb4-4" title="4"><span class="co"># Print the votes dataset</span></a>
<a class="sourceLine" id="cb4-5" title="5">votes</a></code></pre></div>
<pre><code>## # A tibble: 508,929 x 4
##     rcid session  vote ccode
##    &lt;dbl&gt;   &lt;dbl&gt; &lt;dbl&gt; &lt;int&gt;
##  1    46       2     1     2
##  2    46       2     1    20
##  3    46       2     9    31
##  4    46       2     1    40
##  5    46       2     1    41
##  6    46       2     1    42
##  7    46       2     9    51
##  8    46       2     9    52
##  9    46       2     9    53
## 10    46       2     9    54
## # ... with 508,919 more rows</code></pre>
<div class="sourceCode" id="cb6"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb6-1" title="1"><span class="co"># Filter for votes that are &quot;yes&quot;, &quot;abstain&quot;, or &quot;no&quot;</span></a>
<a class="sourceLine" id="cb6-2" title="2">votes <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb6-3" title="3"><span class="st">  </span><span class="kw">filter</span>(vote <span class="op">&lt;=</span><span class="st"> </span><span class="dv">3</span>)</a></code></pre></div>
<pre><code>## # A tibble: 353,547 x 4
##     rcid session  vote ccode
##    &lt;dbl&gt;   &lt;dbl&gt; &lt;dbl&gt; &lt;int&gt;
##  1    46       2     1     2
##  2    46       2     1    20
##  3    46       2     1    40
##  4    46       2     1    41
##  5    46       2     1    42
##  6    46       2     1    70
##  7    46       2     1    90
##  8    46       2     1    91
##  9    46       2     1    92
## 10    46       2     1    93
## # ... with 353,537 more rows</code></pre>
</div>
<div class="slide section level1">

<h2 id="example-1.2">Example 1.2:</h2>
<h3 id="adding-a-year-column">Adding a year column</h3>
<p>The next step of data cleaning is manipulating your variables (columns) to make them more informative.</p>
<p>In this case, you have a <code>session</code> column that is hard to interpret intuitively. But since the UN started voting in 1946, and holds one session per year, you can get the year of a UN resolution by adding 1945 to the <code>session</code> number.</p>
<h3 id="instructions-1">Instructions</h3>
<p>Use <code>mutate()</code> to add a <code>year</code> column by adding 1945 to the <code>session</code> column.</p>
<div class="sourceCode" id="cb8"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb8-1" title="1"><span class="co"># Add another %&gt;% step to add a year column</span></a>
<a class="sourceLine" id="cb8-2" title="2">votes <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb8-3" title="3"><span class="st">  </span><span class="kw">filter</span>(vote <span class="op">&lt;=</span><span class="st"> </span><span class="dv">3</span>) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb8-4" title="4"><span class="st">  </span><span class="kw">mutate</span>(<span class="dt">year =</span> session <span class="op">+</span><span class="st"> </span><span class="dv">1945</span>)</a></code></pre></div>
<pre><code>## # A tibble: 353,547 x 5
##     rcid session  vote ccode  year
##    &lt;dbl&gt;   &lt;dbl&gt; &lt;dbl&gt; &lt;int&gt; &lt;dbl&gt;
##  1    46       2     1     2  1947
##  2    46       2     1    20  1947
##  3    46       2     1    40  1947
##  4    46       2     1    41  1947
##  5    46       2     1    42  1947
##  6    46       2     1    70  1947
##  7    46       2     1    90  1947
##  8    46       2     1    91  1947
##  9    46       2     1    92  1947
## 10    46       2     1    93  1947
## # ... with 353,537 more rows</code></pre>
</div>
<div class="slide section level1">

<h2 id="example-1.3">Example 1.3:</h2>
<h3 id="adding-a-country-column">Adding a country column</h3>
<p>The country codes in the <code>ccode</code> column are what’s called Correlates of War codes. This isn’t ideal for an analysis, since you’d like to work with recognizable country names.</p>
<p>You can use the <code>countrycode</code> package to translate. For example:</p>
<div class="sourceCode" id="cb10"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb10-1" title="1"><span class="kw">library</span>(countrycode)</a>
<a class="sourceLine" id="cb10-2" title="2"></a>
<a class="sourceLine" id="cb10-3" title="3"><span class="co"># Translate the country code 2</span></a>
<a class="sourceLine" id="cb10-4" title="4"><span class="kw">countrycode</span>(<span class="dv">2</span>, <span class="st">&quot;cown&quot;</span>, <span class="st">&quot;country.name&quot;</span>)</a></code></pre></div>
<pre><code>## [1] &quot;United States&quot;</code></pre>
<div class="sourceCode" id="cb12"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb12-1" title="1"><span class="co"># Translate multiple country codes</span></a>
<a class="sourceLine" id="cb12-2" title="2"><span class="kw">countrycode</span>(<span class="kw">c</span>(<span class="dv">2</span>, <span class="dv">20</span>, <span class="dv">40</span>), <span class="st">&quot;cown&quot;</span>, <span class="st">&quot;country.name&quot;</span>)</a></code></pre></div>
<pre><code>## [1] &quot;United States&quot; &quot;Canada&quot;        &quot;Cuba&quot;</code></pre>
<h3 id="instructions-2">Instructions</h3>
<ul>
<li>Load the <code>countrycode</code> package.</li>
<li>Convert the country code 100 to its country name.</li>
<li>Add a new <code>country</code> column in your <code>mutate()</code> statement containing country names, using the <code>countrycode()</code> function to translate from the ccode column. Save the result to <code>votes_processed</code>.</li>
</ul>
<div class="sourceCode" id="cb14"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb14-1" title="1"><span class="co"># Load the countrycode package</span></a>
<a class="sourceLine" id="cb14-2" title="2"><span class="kw">library</span>(countrycode)</a>
<a class="sourceLine" id="cb14-3" title="3"></a>
<a class="sourceLine" id="cb14-4" title="4"><span class="co"># Convert country code 100</span></a>
<a class="sourceLine" id="cb14-5" title="5"><span class="kw">countrycode</span>(<span class="dv">100</span>, <span class="st">&quot;cown&quot;</span>, <span class="st">&quot;country.name&quot;</span>)</a></code></pre></div>
<pre><code>## [1] &quot;Colombia&quot;</code></pre>
<div class="sourceCode" id="cb16"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb16-1" title="1"><span class="co"># Add a country column within the mutate: votes_processed</span></a>
<a class="sourceLine" id="cb16-2" title="2">votes_processed &lt;-<span class="st"> </span>votes <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb16-3" title="3"><span class="st">  </span><span class="kw">filter</span>(vote <span class="op">&lt;=</span><span class="st"> </span><span class="dv">3</span>) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb16-4" title="4"><span class="st">  </span><span class="kw">mutate</span>(</a>
<a class="sourceLine" id="cb16-5" title="5">    <span class="dt">year =</span> session <span class="op">+</span><span class="st"> </span><span class="dv">1945</span>,</a>
<a class="sourceLine" id="cb16-6" title="6">    <span class="dt">country =</span> <span class="kw">countrycode</span>(ccode, <span class="st">&quot;cown&quot;</span>, <span class="st">&quot;country.name&quot;</span>),</a>
<a class="sourceLine" id="cb16-7" title="7">    <span class="dt">country =</span> <span class="kw">recode</span>(country, </a>
<a class="sourceLine" id="cb16-8" title="8">                     <span class="st">&#39;United States of America&#39;</span> =<span class="st">  &#39;United States&#39;</span>,</a>
<a class="sourceLine" id="cb16-9" title="9">                     <span class="st">&#39;United Kingdom of Great Britain and Northern Ireland&#39;</span> =<span class="st"> &#39;United Kingdom&#39;</span>)</a>
<a class="sourceLine" id="cb16-10" title="10">  )</a>
<a class="sourceLine" id="cb16-11" title="11">votes_processed</a></code></pre></div>
<pre><code>## # A tibble: 353,547 x 6
##     rcid session  vote ccode  year country           
##    &lt;dbl&gt;   &lt;dbl&gt; &lt;dbl&gt; &lt;int&gt; &lt;dbl&gt; &lt;chr&gt;             
##  1    46       2     1     2  1947 United States     
##  2    46       2     1    20  1947 Canada            
##  3    46       2     1    40  1947 Cuba              
##  4    46       2     1    41  1947 Haiti             
##  5    46       2     1    42  1947 Dominican Republic
##  6    46       2     1    70  1947 Mexico            
##  7    46       2     1    90  1947 Guatemala         
##  8    46       2     1    91  1947 Honduras          
##  9    46       2     1    92  1947 El Salvador       
## 10    46       2     1    93  1947 Nicaragua         
## # ... with 353,537 more rows</code></pre>
</div>
<div class="slide section level1">

<h2 id="example-1.4">Example 1.4:</h2>
<h3 id="summarizing-the-full-dataset">Summarizing the full dataset</h3>
<p>In this analysis, you’re going to focus on “% of votes that are yes” as a metric for the “agreeableness” of countries.</p>
<p>You’ll start by finding this summary for the entire dataset: the fraction of all votes in their history that were “yes”. Note that within your call to <code>summarize()</code>, you can use <code>n()</code> to find the total number of votes and <code>mean(vote == 1)</code> to find the fraction of “yes” votes.</p>
<h3 id="instructions-3">Instructions</h3>
<ul>
<li>Print the <code>votes_processed</code> dataset that you created in the previous exercise.</li>
<li>Summarize the dataset using the <code>summarize()</code> function to create two columns:</li>
</ul>
<ol style="list-style-type: decimal">
<li><code>total</code>: with the number of votes</li>
<li><code>percent_yes</code>: the percentage of “yes” votes</li>
</ol>
<div class="sourceCode" id="cb18"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb18-1" title="1"><span class="co"># Print votes_processed</span></a>
<a class="sourceLine" id="cb18-2" title="2">votes_processed</a></code></pre></div>
<pre><code>## # A tibble: 353,547 x 6
##     rcid session  vote ccode  year country           
##    &lt;dbl&gt;   &lt;dbl&gt; &lt;dbl&gt; &lt;int&gt; &lt;dbl&gt; &lt;chr&gt;             
##  1    46       2     1     2  1947 United States     
##  2    46       2     1    20  1947 Canada            
##  3    46       2     1    40  1947 Cuba              
##  4    46       2     1    41  1947 Haiti             
##  5    46       2     1    42  1947 Dominican Republic
##  6    46       2     1    70  1947 Mexico            
##  7    46       2     1    90  1947 Guatemala         
##  8    46       2     1    91  1947 Honduras          
##  9    46       2     1    92  1947 El Salvador       
## 10    46       2     1    93  1947 Nicaragua         
## # ... with 353,537 more rows</code></pre>
<div class="sourceCode" id="cb20"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb20-1" title="1"><span class="co"># Find total and fraction of &quot;yes&quot; votes</span></a>
<a class="sourceLine" id="cb20-2" title="2">votes_processed <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb20-3" title="3"><span class="st">  </span><span class="kw">summarise</span>(</a>
<a class="sourceLine" id="cb20-4" title="4">    <span class="dt">total =</span> <span class="kw">n</span>(),</a>
<a class="sourceLine" id="cb20-5" title="5">    <span class="dt">percent_yes =</span> <span class="kw">mean</span>(vote <span class="op">==</span><span class="st"> </span><span class="dv">1</span>)</a>
<a class="sourceLine" id="cb20-6" title="6">  )</a></code></pre></div>
<pre><code>## # A tibble: 1 x 2
##    total percent_yes
##    &lt;int&gt;       &lt;dbl&gt;
## 1 353547       0.800</code></pre>
</div>
<div class="slide section level1">

<h2 id="example-1.5">Example 1.5:</h2>
<h3 id="summarizing-by-year">Summarizing by year</h3>
<p>The <code>summarize()</code> function is especially useful because it can be used within groups.</p>
<p>For example, you might like to know how much the average “agreeableness” of countries changed from year to year. To examine this, you can use <code>group_by()</code> to perform your summary not for the entire dataset, but within each year.</p>
<h3 id="instructions-4">Instructions</h3>
<ul>
<li>Add a <code>group_by()</code> to your code to <code>summarize()</code> within each year.</li>
</ul>
<div class="sourceCode" id="cb22"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb22-1" title="1"><span class="co"># Change this code to summarize by year</span></a>
<a class="sourceLine" id="cb22-2" title="2">votes_processed <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb22-3" title="3"><span class="st">  </span><span class="kw">group_by</span>(year) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb22-4" title="4"><span class="st">  </span><span class="kw">summarize</span>(<span class="dt">total =</span> <span class="kw">n</span>(),</a>
<a class="sourceLine" id="cb22-5" title="5">            <span class="dt">percent_yes =</span> <span class="kw">mean</span>(vote <span class="op">==</span><span class="st"> </span><span class="dv">1</span>))</a></code></pre></div>
<pre><code>## # A tibble: 34 x 3
##     year total percent_yes
##    &lt;dbl&gt; &lt;int&gt;       &lt;dbl&gt;
##  1  1947  2039       0.569
##  2  1949  3469       0.438
##  3  1951  1434       0.585
##  4  1953  1537       0.632
##  5  1955  2169       0.695
##  6  1957  2708       0.609
##  7  1959  4326       0.588
##  8  1961  7482       0.573
##  9  1963  3308       0.729
## 10  1965  4382       0.708
## # ... with 24 more rows</code></pre>
</div>
<div class="slide section level1">

<h2 id="example-1.6">Example 1.6:</h2>
<h3 id="summarizing-by-country">Summarizing by country</h3>
<p>In the last exercise, you performed a summary of the votes within each year. You could instead <code>summarize()</code> within each country, which would let you compare voting patterns between countries.</p>
<h3 id="instructions-5">Instructions</h3>
<ul>
<li>Change the code in the editor to summarize() within each country rather than within each year. Save the result as by_country.</li>
</ul>
<div class="sourceCode" id="cb24"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb24-1" title="1"><span class="co"># Summarize by country: by_country</span></a>
<a class="sourceLine" id="cb24-2" title="2">by_country &lt;-<span class="st"> </span>votes_processed <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb24-3" title="3"><span class="st">  </span><span class="kw">group_by</span>(country) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb24-4" title="4"><span class="st">  </span><span class="kw">summarize</span>(<span class="dt">total =</span> <span class="kw">n</span>(),</a>
<a class="sourceLine" id="cb24-5" title="5">            <span class="dt">percent_yes =</span> <span class="kw">mean</span>(vote <span class="op">==</span><span class="st"> </span><span class="dv">1</span>))</a>
<a class="sourceLine" id="cb24-6" title="6"></a>
<a class="sourceLine" id="cb24-7" title="7">by_country</a></code></pre></div>
<pre><code>## # A tibble: 200 x 3
##    country           total percent_yes
##    &lt;chr&gt;             &lt;int&gt;       &lt;dbl&gt;
##  1 Afghanistan        2373       0.859
##  2 Albania            1695       0.717
##  3 Algeria            2213       0.899
##  4 Andorra             719       0.638
##  5 Angola             1431       0.924
##  6 Antigua &amp; Barbuda  1302       0.912
##  7 Argentina          2553       0.768
##  8 Armenia             758       0.747
##  9 Australia          2575       0.557
## 10 Austria            2389       0.622
## # ... with 190 more rows</code></pre>
</div>
<div class="slide section level1">

<h2 id="example-1.7">Example 1.7:</h2>
<h3 id="sorting-by-percentage-of-yes-votes">Sorting by percentage of “yes” votes</h3>
<p>Now that you’ve summarized the dataset by country, you can start examining it and answering interesting questions.</p>
<p>For example, you might be especially interested in the countries that voted “yes” least often, or the ones that voted “yes” most often.</p>
<h3 id="instructions-6">Instructions</h3>
<ul>
<li>Print the <code>by_country</code> dataset created in the last exercise.</li>
<li>Use <code>arrange()</code> to sort the countries in ascending order of <code>percent_yes</code>.</li>
<li>Arrange the countries by the same variable, but in descending order.</li>
</ul>
<div class="sourceCode" id="cb26"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb26-1" title="1"><span class="co"># You have the votes summarized by country</span></a>
<a class="sourceLine" id="cb26-2" title="2">by_country &lt;-<span class="st"> </span>votes_processed <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb26-3" title="3"><span class="st">  </span><span class="kw">group_by</span>(country) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb26-4" title="4"><span class="st">  </span><span class="kw">summarize</span>(<span class="dt">total =</span> <span class="kw">n</span>(),</a>
<a class="sourceLine" id="cb26-5" title="5">            <span class="dt">percent_yes =</span> <span class="kw">mean</span>(vote <span class="op">==</span><span class="st"> </span><span class="dv">1</span>))</a>
<a class="sourceLine" id="cb26-6" title="6"></a>
<a class="sourceLine" id="cb26-7" title="7"><span class="co"># Print the by_country dataset</span></a>
<a class="sourceLine" id="cb26-8" title="8">by_country</a></code></pre></div>
<pre><code>## # A tibble: 200 x 3
##    country           total percent_yes
##    &lt;chr&gt;             &lt;int&gt;       &lt;dbl&gt;
##  1 Afghanistan        2373       0.859
##  2 Albania            1695       0.717
##  3 Algeria            2213       0.899
##  4 Andorra             719       0.638
##  5 Angola             1431       0.924
##  6 Antigua &amp; Barbuda  1302       0.912
##  7 Argentina          2553       0.768
##  8 Armenia             758       0.747
##  9 Australia          2575       0.557
## 10 Austria            2389       0.622
## # ... with 190 more rows</code></pre>
<div class="sourceCode" id="cb28"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb28-1" title="1"><span class="co"># Sort in ascending order of percent_yes</span></a>
<a class="sourceLine" id="cb28-2" title="2">by_country <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb28-3" title="3"><span class="st">  </span><span class="kw">arrange</span>(percent_yes)</a></code></pre></div>
<pre><code>## # A tibble: 200 x 3
##    country                          total percent_yes
##    &lt;chr&gt;                            &lt;int&gt;       &lt;dbl&gt;
##  1 Zanzibar                             2       0    
##  2 United States                     2568       0.269
##  3 Palau                              369       0.339
##  4 Israel                            2380       0.341
##  5 &lt;NA&gt;                              1075       0.397
##  6 United Kingdom                    2558       0.417
##  7 France                            2527       0.427
##  8 Micronesia (Federated States of)   724       0.442
##  9 Marshall Islands                   757       0.491
## 10 Belgium                           2568       0.492
## # ... with 190 more rows</code></pre>
<div class="sourceCode" id="cb30"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb30-1" title="1"><span class="co"># Now sort in descending order</span></a>
<a class="sourceLine" id="cb30-2" title="2">by_country <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb30-3" title="3"><span class="st">  </span><span class="kw">arrange</span>(<span class="kw">desc</span>(percent_yes))</a></code></pre></div>
<pre><code>## # A tibble: 200 x 3
##    country              total percent_yes
##    &lt;chr&gt;                &lt;int&gt;       &lt;dbl&gt;
##  1 São Tomé &amp; Príncipe   1091       0.976
##  2 Seychelles             881       0.975
##  3 Djibouti              1598       0.961
##  4 Guinea-Bissau         1538       0.960
##  5 Timor-Leste            326       0.957
##  6 Mauritius             1831       0.950
##  7 Zimbabwe              1361       0.949
##  8 Comoros               1133       0.947
##  9 United Arab Emirates  1934       0.947
## 10 Mozambique            1701       0.947
## # ... with 190 more rows</code></pre>
</div>
<div class="slide section level1">

<h2 id="example-1.8">Example 1.8:</h2>
<h3 id="filtering-summarized-output">Filtering summarized output</h3>
<p>In the last exercise, you may have noticed that the country that voted least frequently, Zanzibar, had only 2 votes in the entire dataset. You certainly can’t make any substantial conclusions based on that data!</p>
<p>Typically in a progressive analysis, when you find that a few of your observations have very little data while others have plenty, you set some threshold to filter them out.</p>
<h3 id="instructions-7">Instructions</h3>
<ul>
<li>Use <code>filter()</code> to remove from the sorted data countries that have fewer than 100 votes.</li>
</ul>
<div class="sourceCode" id="cb32"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb32-1" title="1"><span class="co"># Filter out countries with fewer than 100 votes</span></a>
<a class="sourceLine" id="cb32-2" title="2">by_country <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb32-3" title="3"><span class="st">  </span><span class="kw">arrange</span>(percent_yes) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb32-4" title="4"><span class="st">  </span><span class="kw">filter</span>(total <span class="op">&gt;=</span><span class="st"> </span><span class="dv">100</span>)</a></code></pre></div>
<pre><code>## # A tibble: 197 x 3
##    country                          total percent_yes
##    &lt;chr&gt;                            &lt;int&gt;       &lt;dbl&gt;
##  1 United States                     2568       0.269
##  2 Palau                              369       0.339
##  3 Israel                            2380       0.341
##  4 &lt;NA&gt;                              1075       0.397
##  5 United Kingdom                    2558       0.417
##  6 France                            2527       0.427
##  7 Micronesia (Federated States of)   724       0.442
##  8 Marshall Islands                   757       0.491
##  9 Belgium                           2568       0.492
## 10 Canada                            2576       0.508
## # ... with 187 more rows</code></pre>
</div>
<div id="data-visualization-with-ggplot2" class="slide section level1">
<h1>Data visualization with ggplot2</h1>
<p>Once you’ve cleaned and summarized data, you’ll want to visualize them to understand trends and extract insights. Here you’ll use the ggplot2 package to explore trends in United Nations voting within each country over time.</p>
</div>
<div class="slide section level1">

<h2 id="example-2.1">Example 2.1:</h2>
<h3 id="plotting-a-line-over-time">Plotting a line over time</h3>
<p>In the last chapter, you learned how to <code>summarize()</code> the votes dataset by year, particularly the percentage of votes in each year that were “yes”.</p>
<p>You’ll now use the <code>ggplot2</code> package to turn your results into a visualization of the percentage of “yes” votes over time.</p>
<h3 id="instructions-8">Instructions</h3>
<p>The <code>by_year</code> dataset has the number of votes and percentage of “yes” votes each year.</p>
<ul>
<li>Load the <code>ggplot2</code> package.</li>
<li>Use <code>ggplot()</code> with the <code>geom_line</code> layer to create a line plot with <code>year</code> on the x-axis and <code>percent_yes</code> on the y-axis.</li>
</ul>
<div class="sourceCode" id="cb34"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb34-1" title="1"><span class="co"># Define by_year</span></a>
<a class="sourceLine" id="cb34-2" title="2">by_year &lt;-<span class="st"> </span>votes_processed <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb34-3" title="3"><span class="st">  </span><span class="kw">group_by</span>(year) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb34-4" title="4"><span class="st">  </span><span class="kw">summarize</span>(<span class="dt">total =</span> <span class="kw">n</span>(),</a>
<a class="sourceLine" id="cb34-5" title="5">            <span class="dt">percent_yes =</span> <span class="kw">mean</span>(vote <span class="op">==</span><span class="st"> </span><span class="dv">1</span>))</a>
<a class="sourceLine" id="cb34-6" title="6"></a>
<a class="sourceLine" id="cb34-7" title="7"><span class="co"># Load the ggplot2 package</span></a>
<a class="sourceLine" id="cb34-8" title="8"><span class="kw">library</span>(ggplot2)</a>
<a class="sourceLine" id="cb34-9" title="9"></a>
<a class="sourceLine" id="cb34-10" title="10"><span class="co"># Create line plot</span></a>
<a class="sourceLine" id="cb34-11" title="11"><span class="kw">ggplot</span>(by_year, <span class="kw">aes</span>(<span class="dt">x =</span> year, <span class="dt">y =</span> percent_yes)) <span class="op">+</span></a>
<a class="sourceLine" id="cb34-12" title="12"><span class="st">  </span><span class="kw">geom_line</span>()</a></code></pre></div>
<p><img src="data:image/png;base64,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" /><!-- --></p>
</div>
<div class="slide section level1">

<h2 id="example-2.2">Example 2.2:</h2>
<h3 id="other-ggplot2-layers">Other ggplot2 layers</h3>
<p>A line plot is one way to display this data. You could also choose to display it as a scatter plot, with each year represented as a single point. This requires changing the layer (i.e. <code>geom_line()</code> to <code>geom_point()</code>).</p>
<p>You can also add additional layers to your graph, such as a smoothing curve with <code>geom_smooth()</code>.</p>
<h3 id="instructions-9">Instructions</h3>
<ul>
<li>Change the plot to a scatter plot and add a smoothing curve.</li>
</ul>
<div class="sourceCode" id="cb35"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb35-1" title="1"><span class="co"># Change to scatter plot and add smoothing curve</span></a>
<a class="sourceLine" id="cb35-2" title="2"><span class="kw">ggplot</span>(by_year, <span class="kw">aes</span>(year, percent_yes)) <span class="op">+</span></a>
<a class="sourceLine" id="cb35-3" title="3"><span class="st">  </span><span class="kw">geom_point</span>() <span class="op">+</span></a>
<a class="sourceLine" id="cb35-4" title="4"><span class="st">  </span><span class="kw">geom_smooth</span>()</a></code></pre></div>
<p><img src="data:image/png;base64,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" /><!-- --></p>
</div>
<div class="slide section level1">

<h2 id="example-2.3">Example 2.3:</h2>
<h3 id="summarizing-by-year-and-country">Summarizing by year and country</h3>
<p>You’re more interested in trends of voting within specific countries than you are in the overall trend. So instead of summarizing just by year, summarize by both year and country, constructing a dataset that shows what fraction of the time each country votes “yes” in each year.</p>
<h3 id="instructions-10">Instructions</h3>
<ul>
<li>Change the code in the editor to group by both year and country rather than just by year. Save the result as <code>by_year_country</code>.</li>
</ul>
<div class="sourceCode" id="cb36"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb36-1" title="1"><span class="co"># Group by year and country: by_year_country</span></a>
<a class="sourceLine" id="cb36-2" title="2">by_year_country &lt;-<span class="st"> </span>votes_processed <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb36-3" title="3"><span class="st">  </span><span class="kw">group_by</span>(year, country) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb36-4" title="4"><span class="st">  </span><span class="kw">summarize</span>(<span class="dt">total =</span> <span class="kw">n</span>(),</a>
<a class="sourceLine" id="cb36-5" title="5">            <span class="dt">percent_yes =</span> <span class="kw">mean</span>(vote <span class="op">==</span><span class="st"> </span><span class="dv">1</span>))</a></code></pre></div>
</div>
<div class="slide section level1">

<h2 id="example-2.4">Example 2.4:</h2>
<h3 id="plotting-just-the-uk-over-time">Plotting just the UK over time</h3>
<p>Now that you have the percentage of time that each country voted “yes” within each year, you can plot the trend for a particular country. In this case, you’ll look at the trend for just the United Kingdom.</p>
<p>This will involve using <code>filter()</code> on your data before giving it to <code>ggplot2</code>.</p>
<h3 id="instructions-11">Instructions</h3>
<ul>
<li>Print the <code>by_year_country</code> dataset.</li>
<li>Create a filtered version of the dataset called <code>UK_by_year</code>.</li>
<li>Create a line plot of the percentage of “yes” votes over time for the United Kingdom.</li>
</ul>
<div class="sourceCode" id="cb37"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb37-1" title="1"><span class="co"># Start with by_year_country dataset</span></a>
<a class="sourceLine" id="cb37-2" title="2">by_year_country &lt;-<span class="st"> </span>votes_processed <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb37-3" title="3"><span class="st">  </span><span class="kw">group_by</span>(year, country) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb37-4" title="4"><span class="st">  </span><span class="kw">summarize</span>(<span class="dt">total =</span> <span class="kw">n</span>(),</a>
<a class="sourceLine" id="cb37-5" title="5">            <span class="dt">percent_yes =</span> <span class="kw">mean</span>(vote <span class="op">==</span><span class="st"> </span><span class="dv">1</span>))</a>
<a class="sourceLine" id="cb37-6" title="6"></a>
<a class="sourceLine" id="cb37-7" title="7"><span class="co"># Print by_year_country</span></a>
<a class="sourceLine" id="cb37-8" title="8">by_year_country</a></code></pre></div>
<pre><code>## # A tibble: 4,744 x 4
## # Groups:   year [34]
##     year country     total percent_yes
##    &lt;dbl&gt; &lt;chr&gt;       &lt;int&gt;       &lt;dbl&gt;
##  1  1947 Afghanistan    34       0.382
##  2  1947 Argentina      38       0.579
##  3  1947 Australia      38       0.553
##  4  1947 Belarus        38       0.5  
##  5  1947 Belgium        38       0.605
##  6  1947 Bolivia        37       0.595
##  7  1947 Brazil         38       0.658
##  8  1947 Canada         38       0.605
##  9  1947 Chile          38       0.658
## 10  1947 Colombia       35       0.543
## # ... with 4,734 more rows</code></pre>
<div class="sourceCode" id="cb39"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb39-1" title="1"><span class="co"># Create a filtered version: UK_by_year</span></a>
<a class="sourceLine" id="cb39-2" title="2">UK_by_year &lt;-<span class="st"> </span>by_year_country <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb39-3" title="3"><span class="st">  </span><span class="kw">filter</span>(country <span class="op">==</span><span class="st"> &#39;United Kingdom&#39;</span>)</a>
<a class="sourceLine" id="cb39-4" title="4"></a>
<a class="sourceLine" id="cb39-5" title="5"><span class="co"># Line plot of percent_yes over time for UK only</span></a>
<a class="sourceLine" id="cb39-6" title="6"><span class="kw">ggplot</span>(UK_by_year, <span class="kw">aes</span>(<span class="dt">x =</span> year, <span class="dt">y =</span> percent_yes)) <span class="op">+</span></a>
<a class="sourceLine" id="cb39-7" title="7"><span class="st">  </span><span class="kw">geom_line</span>()</a></code></pre></div>
<p><img src="data:image/png;base64,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" /><!-- --></p>
</div>
<div class="slide section level1">

<h2 id="example-2.5">Example 2.5:</h2>
<h3 id="plotting-multiple-countries">Plotting multiple countries</h3>
<p>Plotting just one country at a time is interesting, but you really want to compare trends between countries. For example, suppose you want to compare voting trends for the United States, the UK, France, and India.</p>
<p>You’ll have to filter to include all four of these countries and use another aesthetic (not just x- and y-axes) to distinguish the countries on the resulting visualization. Instead, you’ll use the color aesthetic to represent different countries.</p>
<h3 id="instructions-12">Instructions</h3>
<p>The <code>by_year_country</code> dataset you created in the last exercise is available in your workspace.</p>
<ul>
<li>Create a filtered version of <code>by_year_country</code> called <code>filtered_4_countries</code> with just the countries listed in the editor (you may find the <code>%in%</code> operator useful here).</li>
<li>Show the trend for each of these countries on the same graph, using color to distinguish each country.</li>
</ul>
<div class="sourceCode" id="cb40"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb40-1" title="1"><span class="co"># Vector of four countries to examine</span></a>
<a class="sourceLine" id="cb40-2" title="2">countries &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;United States&quot;</span>, <span class="st">&quot;United Kingdom&quot;</span>,</a>
<a class="sourceLine" id="cb40-3" title="3">               <span class="st">&quot;France&quot;</span>, <span class="st">&quot;India&quot;</span>)</a>
<a class="sourceLine" id="cb40-4" title="4"></a>
<a class="sourceLine" id="cb40-5" title="5"><span class="co"># Filter by_year_country: filtered_4_countries</span></a>
<a class="sourceLine" id="cb40-6" title="6">filtered_<span class="dv">4</span>_countries &lt;-<span class="st"> </span>by_year_country <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb40-7" title="7"><span class="st">  </span><span class="kw">filter</span>(country <span class="op">%in%</span><span class="st"> </span>countries)</a>
<a class="sourceLine" id="cb40-8" title="8"></a>
<a class="sourceLine" id="cb40-9" title="9"><span class="co"># Line plot of % yes in four countries</span></a>
<a class="sourceLine" id="cb40-10" title="10"><span class="kw">ggplot</span>(filtered_<span class="dv">4</span>_countries, <span class="kw">aes</span>(<span class="dt">x =</span> year, <span class="dt">y =</span> percent_yes, <span class="dt">color =</span> country)) <span class="op">+</span></a>
<a class="sourceLine" id="cb40-11" title="11"><span class="st">  </span><span class="kw">geom_line</span>()</a></code></pre></div>
<p><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAwAAAAJACAMAAAANcPFkAAAA/FBMVEUAAAAAADoAAGYAOmYAOpAAZpAAZrYAv8QzMzM6AAA6ADo6AGY6OgA6OmY6OpA6kNtNTU1NTW5NTY5NbqtNjshmAABmADpmAGZmOgBmOjpmZgBmkJBmtrZmtv9uTU1uTW5uTY5ubqtuq8huq+R8rgCOTU2OTW6OTY6ObquOyP+QOgCQOjqQZgCQkDqQkGaQtpCQ27aQ2/+rbk2rbm6rbo6rjk2ryKur5P+2ZgC22/+2/7a2/9u2///HfP/Ijk3I///bkDrb25Db/7bb///kq27k///r6+vy8vL4dm3/tmb/yI7/25D/27b/29v/5Kv//7b//8j//9v//+T///8D0VzsAAAACXBIWXMAAA7DAAAOwwHHb6hkAAAgAElEQVR4nO2dCb/bOJbdnz0ds1yVtF9t0zOZuKsqVlXFntXuzthJW7aTtlWyX8Ybv/93CcGdxL0glgsQpM752U8SBRxeUPcvgOCiqxKCLlhXawcAQWsKAEAXLQAAXbSMALz/8WX9+PHn62/f9A8QtB+ZAHh3/U0NwOcnD8vX33UPELQjGQB48fW/Nz3Ax19fqs6gfUgVGQQlkM0Q6P1Pb8qPvzxtH6oFX1RKEh0ERZYNAO++rTO/fWjfOznKuUIqMwQW3St6FgfIqwdQir7VUpkhsOhe0bM4QDYAkPsA0bdaKjMEFt0rehYHyAaAz08eNLNAD0azQNG3WiozBBbdK3YSh2gRAPWfOg4QfaulMkNg0b3ip7G/vI8ER99qqcwQWHQvyYSVFgBAYNG9JBNWWgAAgUX3kkxYaQEABBbdSzJhpQUAEFh0L8mElRYAQGDRvSQTVloAAIFF95JMWGkBAAQW3UsyYaUFABBYdC/JhJUWAEBg0b0kE1ZaAACBRfeSTFhpAQAEFt1LMmGlBQAQWHQvyYSVFgBAYNG9JBNWWgAAgUX3kkxYaQEABBbdSzJhpQUAEFh0L8mElRYAQGDRvSQTVloAIPvADpJmq3hJJqy0AED2gQGAmAIAuQd2AAAxBQByD+wg0gUAAEYAIPfAAEBUAQA/LyYp5QM7yOwEAABGAMDLi/taBgBkhYwFAHy82KyMAoAEAQCAEQDw8Dr0fwTMWJXmVXmYCQkAKEXfaqnMfAEg0xIAkBUyFgBw9zrMHoPMeAGAFAIAzl4H7UmAmUHlsIpwAgAAIwDg6nUgn3qamQQAUggAOHod2BceZkYBgBQCAG5eB+NL6cAMexvuZmICAErRt1oqsy0AEE4AAGAEAJy8tEScLQAAZIWMBQBcvIg8nC6SDWzwBgCxBAAcvMg0nCwEAGSFjAUA7L3oLEwCQDABAIARALD24nJwvFw0sLExAIgkABAMwPgNAEBWyFgAwNbLkILDW5KBmQ+5OQoAMAIAll6mDAQACxUyFgCw8zInYP9uNABCCQAAjACAjdfirUm69wUDO0y9AEAcAQALL4vkO1ib2QoAJBEAWPayyr2DpZm1AEAS7QqAw8HjNmqLgVlaHqzMrHWYe4URAAAY7QuAUwOBEwgLgbkhBQDIChlrdwD0z20hMAfmkHaHRTMXAYA02i0A+ks3LxeLobBYK3UvABBFAMAUmGPSad/a/iJgCiIAADDaEwDzDAkGwDnlDgCArJCx9gyAXcqwgfncmF/kXv4nen8CAMQQAOAC88q3UogAAJBKAMBuf8JSpVAfQM4ohVgDAEYAQBgAj4r6WIs+qAYAIggASAPgrIOOAABIJgBg6WWn0r1qU3yKAABIpl0DYJUy4gA4Hz1rn8zvAaEHFkAAAGC0IwAWb9rj4BUEgOv5E/3zjgEAkE4AIAIA9rW1Y3eHYSkASCEAYOtlpc7M5RTq2aL+9/cAQAoBgCgAuFxEoy0FAAnlDUB+Olgt8vaSd3BfSXhY0Ez77gFsvjPj9AAWDksliMD8uwD0AIwAQCQAFi0WVwEAUggAUF7eiTY2M5ssrwIApNB+ACCTY00AjC6rBhYoAKAUfau5muUHgMHGd3oKAEgLAMTMM87H+yQlACCtnQPgN9SODYD/tZoAQFoAIOq+Jrljbmkfa3oqWABAKfpWczXLEgDiFG1rcwCQQgAg8mwjdamLr5db/WWzVF6SCSstABB7un16wnOYFwAQ124A8N7fjH7OGXXJi69X6HnaIgIAStG3mqOZ94xjMgBcbQFACgGA+GcdNxe5OLsCgBQCAAlOuz943WUOAKQQAEhx3YmXo6QXAOAEAJan7h2UIM8AgKgAAACI7iWZsNLaPQDuF14BAGkvyYSV1l4A8D/zeGsAiO5QeAkAKEXfam5mAMDPLImXZMJKCwDYnMBprSR55hMhAGAEAABAdC/JhJUWANgeAD4hAgBG+wdgKV0AQHQvyYSVFgCYeQXlf6o8cw8SADACAAAgupdkwkprJwAE3IJniwC4RwkAGAEAABDdSzJhpQUAAEB0L8mEldYFALCQLVOvsPxPl2e+l5cFtm/iZV8hYwGAiwLA58IczsuhQsYCANsEwDXQsqskQAAAUIq+1ZzMAICN2cG9HuvlVCFjAYCNAuAYadnXCCcAAChF32ouZuYP1QGA0OzIGYCDTz3Gy7FCxroEAMxvbxUAt1jL0f25vKKZeLlWyFgA4DIAGE3/AICxAMBmAXAJ9jA2S95IyYSVFgCQTI1cATiIthIAKAltNZl7HFwmANbhHmT7uf6o8sHyuJpkwkoLAOwfgMPcTASAJvkPrcwVMtbqAIjc42DJxPT+7gE46GYCZ/zNLIwMSCastHYBwKLHTgGwivdAmAUD4PaxSSastADAyGuFY0RhXhYBH0gzy76DLla6bijJhJXW6gBI3OTjYgFYHvt1BXwAODAIOH9pSSastFYGwPP0RADQynwO1ChTXfea+iL64P7g/tlnLACwaQD4kGeJ6w3A3OpwcG+kZMJK6zIAMJXYIwD617bb+bNagd5Pm1K1kWTCSmt9AHzSLg4Aa5wqH+ylB03OSDoDoA18Dv0uAQBQct4I7GYGACFesy9qbj5eNzO31rTzCwCUnDcCuVQEAJfxrMlrkwA0m3DxeKwEAI6BjSpkrAwA8Eg8ADDI7owcwsxUy/rkEStJJqy0AEBpUcZaKwDgbWZo78KpPc4rz1gXAoChzMUCYJhCdfcyV8hYOQDgnnoAQMIMAJRrA3CYPPiaAQBPM6bFSxsCACg5bwRqIQBI5OUCwOJ2AABKzhuBWpgTABL5vzEA6Nl+Ty9ThYyVBQDOyTcxsz2zccELAPDLbLxMFTLWpQDAl7pkAIgzm/2OKSxUyFgAoPQLwWiWnRdvNjuOZrMZAICS80agFh60Jx5mIgDI5P8GAVAaILDaDABAyXkjUAsBQCKvZbMGAgAw0sefr799o568vlZ6WD9+87J913kjUAuzAUAo/zcMgJLtbX6cV56xeAA+P6lS/rvu1buKhRcPR287bwRq4YF45mwmAIBU/m8cgFheMRM4VDwAH399Wb7/sf3C//jL0/Lzn56O3pbYagfyqauZZVWuWCmY/wCArpCxeADe//SmzvtaqiuohkRqIFTpi0oSKz+QT/1NfMv5rxzaungA1KCnA6B+fP/DuBeQ+NoQ6QFsa/I9gFwHgB6ArpCx7HqAd83ecKV+P0Biq7lOQJNmwQAI5j8AoCtkLLt9gBcPuqX7A0Ay/wEAXSFjmWaBHnSzQM3AR3UDn/8sOQ0KAFJ5AQBOi8cBVCfQjoReX19/3U8ESWy1g/7i7GxmncDMyb/7ybNUZpcCgFkSWy0DADzuc2YSACArZKwLB+CwpzxLZQYAlNjWMim8CEDzyhkA+yE8daAfAKTwkkxYaa0JwIF4GRGAk37TwAMdmL8AAFkhY2UHgBUBngCcZgwcmMD8BQDIChnr0gA4jc5+P3CB+QsAkBUyVkYAqNdnuzFQEAB1reHk9/3kWSozAKDEtnYTAJxO/vc6NgkAkBUy1uUCQHiFCwCQFTJWTgBUCwBAHC8AwCnCgTA6hSMBEH4mz37yLJUZAFDimwsA8vMCAJyyAuB0AABxvAAApxUBoM5MONsdCwYAa5oBACW+uQAgPy8AwAkA7CfPUpkBACW2tccAAJpDARZb1Gjipv3kWSozAKDEthYAZOgFADhtHACBC3r3k2epzACAEtvaIADOBwAQwwsAcMoLgPMJAETxAgCcAMB+8iyVGQBQYlsbBoAdAQBgTTMAoMS2FgBk6AUAOEU4EEYToFUg94FPzcGwxS1qMnHUfvIslRkAUOKbCwDy8wIAnPIDwCapOzOJ+3ruJ89SmQEAJb65ACA/LwDAKUMAzstpDQDWNAMASnxzAUB+XgCAU4YAWBAAANY0AwBKfHMBQH5eAIBTlgAsJjYAWNMMACjxzQUA+XkBAE6rAcDnf3NChHmL8h7O2k+epTIDAEp8cwFAfl4AgFOmACzkNgBY0wwAKPHNBQD5eQEATrkCYE7uxoz60S937SfPUpkBACVDe0kCHABY7gJK4ve+fLWfPEtlBgCUDO0VAcBIgFj2n/aUZ6nMAICSob2RAaiyH3m2phkAUDK0VwYA5pfdD9I/bbqfPEtlBgCUDO2NB0CM3/XaT56lMgMASob22gBAfr1PAdB/Q6xfgDxb0wwAKBnaGweA8X4v8mxNMwCgZGivFADjQtNpH+TZmmYAQMnQXnkA5rOeyLM1zQCAkqG9vgCctWdNKX3SH3m2phkAUDK0VxYA6pgX8mxNMwCgZGhvCABF/6wpRh/yRZ6taQYAlAztFQTgyGxR4/Z2037yLJUZAFAytFcOgCMAyNAMACiZGkwRYAtA0T1TPugBcjQDAEqmBi8DwM6CjgE4YgiUpRkAUDI1WAaA4wkAZGkGAJRMDRYBoMl9mgDk2ZpmAEDJ1OAQAE4tAW3mA4D8zACAkqnB/gAU7TxQP/0DAPIzAwBKpgYHA3BcOBCAPFvTDAAomRocCsBx6UgY8mxNMwCgZGpwEACn4rh4KBh5tqYZAFAyNdgPgO5A8PEEAKS9AAAnbwBMOp6XShyIZapSUVUu2ueNlWBYEKRpnR7AMAt6rHuBwYDsAvBFu6YZegAlU4MDADieAEAEr00C8P/+l29yOihDAKYEAIDszBIBcPPlY9/kdBAA2E+epTIDAErGFhME2AFQpzsAEPfKEoBPj66u7gyPdcJXf26+/Ne7V1f3b6o/926++uer2/9VFXp1xzdTzQIA+8mzVGZCAHx6dKf88P39+lH97wG4+7u/lq9uP1evb+5Wef/29vOqwH3fTDUrRwAUAQBgR4HRGdQNcVR+qz8DAPfbnkABUD1XlNx89dw3U80CAPvJs1RmQgDUia8eqy/8LuHnjw0k1fAn1ggoMwDabC+W5kGRZ2uaJQfg5qu/xBoBAYAd5VkqM+kh0K3H0yGQBsCnR/8QawSUJwCLYyDk2ZpmgjvB4/8fvr9XPd7qAaiH/g0kr65ijYDWAYD+8RcAEM8rRwDm06Clmvj8b3/bA1A+u7rTAlDvC8dRPgCo/C/a5wBA2CtLAOwVbQ5oZwAU9GKz9pNnqczSA/DqXrAFJwCwnzxLZZYagPrIWCzlCUCVyh4AFAAgidl+T4eu9rs/fH9122q8ZWyxHwDHEwUARQAAWNNsvwA8u6POwbA76GZs8SoAFH5joP3kWSqz3QJQdQBqPvatVRdgbPHotg7UVgMAqb0AAKcZAOpghAAARBfgBsDCTgAAWNNstwB8enRPHZZ+Fj4E8gLgeAoCoDgBgDRmQgD8RksgqV002Qe4uXt1p3xmN+dkbrIRAOZAMACI5wUAOMWZBvUEYJS/zgAU/R9H7SfPUpkBACVzk4MBOBUAQNDL0sxu++0YgFdXV/dfBQ6Bmrs7uwNwPDEAEAToay9Gf90EADqdz5cOwLPf/d9mJtRCbGvXBMCHAADQ6Hzufpwh3GtegVR+ANTToPdDp0E9ATgDgIhei2bn0a+ThHrpFUgBgInCAChmjw4CAG361wdSqF+4dfOiKpDKD4DylRoCqWNhFmJb6wlAd0eswcewFwwAJM3O7Za2nUhOAoC6OubqKt5p0J2mO8Fv7VfKtnYNAArtib0uHYBzv51rACy6gM7LprdoKpBaACDeNTATyU+DAoAMvVizIf3tJ9JSAnDzX/7u9nPVG9wvb37/T+qhGqlf3XpcWp+2vKAIxwGmP/I132qGSSAAEM2LMxt/TC0Ay2lddnVtCaAz6Lffzpp0AO7eLz/87WP18ubuPXULFXWPuOrh2T2ZewVNd4Jv2d+OlG+uFwDH7vdhpj7tm7zZrCQAKOirImgzPf+TArC4D3CnHwl9+MNz9VRxUC9RUFTLvHJ+omkP8OzqyvbqM7659BgoDQAeBOwNgJoBjQLSbPIZ9fMIi2ndA2BLAJ1BdkOg+qHKy9s9AL9XGVqNgK6uHL6vWc2HQMo4bBYoPQAF89xO+wKgP5g7o4Aym35ErgCcNQe+AilrANp7g057AIlvfyV9H0AhYLF7wTcXAKzoNduEPQOEGZ3/k2uRTIGddQ+2AilrAOr/Xz5un6p9gOrh2b3mnoqhmgPwqr5HkcUp0XxzpQAYzkwBALbSz+Zpv9B1s9kHNNqPyg0AlZR/83f3Oxb6WSCJEdAUAHWLrvoWXBYHg/nm+gBw7H4kWDNq3mXNTrNqAGCuphPQzNj8X+4CRgDYEUBnkBmAVJrOAjnMrPLNBQDreZHnc6qv9LnZ/ONxBqD9vHYFwCCLXQy+uYkB4HYcbLUnAJjzmSsCZmZa3k6Hkea07gGwJYDOIAAwErELYNoLBgC0uBP6i2JqZsx/WwAK6y6AzqBLBYDtALTk5feCeQDcCbgEAGZ7tnrSzr9FjGldnroRkCUBdAYBgEEBAPDdhqV2BMCZb305ImAp/+0A6M4dBQDk1gQAK3gZLmksq2FQ+5EQGav3oqa0HgCwJIDOoN0CQJ8MFAkAfd7bEBip/QBg6ABqs4Kbuic24gIA3aoAACVnAI4nGoB+CQCw0RIAFQH0CWzURjSk9QgAOwLoDAIAvRgAhi6ABYA47mMIjNQFATAMg6byAKAYSu4HAHXSUWl1GLhcBmC+WQBAbC/iSIpuRh4oIxfxaT0GwIoAOoP2DYDWBQQBMCcAABAydQCmLeYBwGhvez8AvLrqFHpzXFcAjicOAG4nwPH7zKi9AGDsAJz3mkwETACwIYDOoNwA6HsAOxnaCwBienHJZguA9kM6AMBLhvYaAaBHQPTHtwQA99E5aXMAMNlmDYDV2SOmtC6nxxuWCaAzKEMAmnux2F1tb2gvAIjoxV2IaM5/9ysoDF1AEgCmt0X59Oh+pPukTH8gw+Eye0N7HQGok3trADBr2QgAp4J8Oi/BpHVJjKHM506QcgTAMbFtlXwfwGEXgJ8HvVwA2Ouw3AAYynKVCm5F+hkXsQAY3QiouyDsbnvFlpymPUB2AHQLAUAr7josZgPyZsXsUROf1uQ8kvHcCVK//XbQNAWguRFQqS7/vVIAtDcI8s11UpN9ALsjAI0M7Y0AwIyAclgPvXYHeeUs95PEiQDQ080ZgPG5DKT4LkAMgKUeoLkIWJ2WMOwDiN0OotV0CHQlshNMngvRVuB3AaQAcCXADwBmLbEBOM8ex8uN7SbMaoj5SiwAxOkUCwTQGWQLQJ35zxoAnllmp72i/EQSDwAzBwQALL3O2pPhpSsAdQ1DJY6Agu5NogEw9ADtDYJ8U5YUANgmALN88wOAHck1bxLrUYvPVG9iWncgAMM+QHuDIN+UJSX/G2EnAwD0tQAnAGDpxV3XeG5icjNbrEN3AekB+PSomwVqbhAUku+a5H8j7MQDwOb/1gBgxw4rArCQgx4B0F1AQXqZ6SNlBiCV5H8iqd0a8/OhS8PvAhgAoOdBLxQAfdgzehYLgNla9VusjMsyKye1cwDmXYAXANyBgNK0zS8FgNkesTwAZBfAAGCegyWVHwCz3wj7+PP1t2/qZ6+vr6+/eTlaUPoAwP8whgUAUwJaAI5H4ke0EwFAryYpANNJ0RgA6ARQd5k7La2eTr0MAZj8RtjnJw/L19/VT188nC0oPQAw5T97IH8BgJNiQKPAjYDtAEAe/TpZ5b9vYNrN31gATAHQqZcjAGN9/PVl+f7Hl9Wzz396Ol2gZNxs6s8MADr/gwDoFx2nGEQHoGDXkhaA8YkRcQBoEBhWXN8u4kIAeP/Tm/LjLyr1q6HP9fXD0YIvKplMC/XneJ4sO9BFj83Dua0017lffNTXMltUMTBafUwVSdai6cwsqv/EC6cohjUXVBCeyhCAT4/uDedEv/u2y/f3PzxVvcCwQMn4raH+THuAA1PBvAvAnQ866wGmZnvtAbizoM9DTPZmTup/Z6O5X5CzF516GQLwTOV+R8DwhV/rxcPpAuMGU38mAByYrTaMgDgAyGmgUlsyLgMAls0cdS7aNu8agOldIaZD/goA+30A7UjYgdtqiwD0XYAGgN4BdIXSAECuJiIA3JWQVvkfDEC9M9DuDlwIAJ+fPGgnfdTY5/OfXw4LlIwt3jcAxeQh0IyXHQB2HUBwYPUn1N4xcbcAlK9U6s+OA6jv/NfX118/Le2PA8wBOLBbbRkAchqoPFEjoMsEoFFsAMYTTvsFYHIcYEHGFk8BOLBbrUtiIwDnadnOjAfAjYCNAGDOfwDgqyinQ08BaI4AAABXuQCw2OLwwM59ELsFQOqaYGEA2s0+A+BIlvcYAwEAS52TAtBc+DJc/tL/RPY0W+tlnx7dIa+TsUnoGHeFmJ4O2h4C9gagIyAbAIrZY5CZQROvwBHQ9gGYvxgBwOa5KwCl5bUwtYwtHh8IMADQ57QPAGTZlABQq9kzAKfzKgC0N0e5+ep/f391+/mH76+amZr2ypj2p+Pnd1H5+8ddkabCp3/8l2rn9i2xgxvlovgxAN05QCEA1O9PAaA7gBAAaKLoeGZPdDMJjb0W8j8RAGdPLw6AQhMFQHNzlHYI9Oxe+epO2V4lWRf4S9cTjO+icutxV+RZvVAd3b25e4e4ojjeTjAACJQDAMsNFglMGgC7HqC/N0R7Z6APf+iuk1cFvvzP9d3MZ9fQ/+Pjtoh6qCpVC9RC9TQjAIaU404G7c1mBLAAeBDQBkZeWsDGw61l3wD4egkCoAYptx63d0pRBe7eqw9cjQr+/q8q10c3U6le2QIgdFH8CID+LOgwAFSJMQBHrnx8AAri2dxMRCOv4BHQ9gBoUrXK5ikAf+jvjjXsBKsbRcj0AFIXxY/mQa0AMF/TnQgA2zEQAEhzHECdmalOT54A0A7px/sAz+vJm9ldVLR9ACsAxK4JHgAYLoPxB6AjYAIAV/wiAbBo7vYAUHeBu7pXjgD49KieBaqSu71TStkfB/jd/xkAqIr8J5XvjyazQBkCMBkBLQJwOo8SlO0AvAE4Wu8FF+TTiZmMBq/wDmCLAATI4fZxhovizTI3eTUAGlcAwJuFK28Aqm/+upOwVJyT4ToARhcCBwMwKn8s1wOgYJ6PzWTUey3lPwAIUJxpUAAgIGsAbFoLABitB8Ao3+wAGGosAuBCQNnXsiIAAOwZgPq3gu3OiDM3uQFgfCsUCQD6E6MvCgCJERAA4GS4Iswsc5NFAejHQAMAhtKuYyA3AAr2xWAmJACQQvw1wQsyN7kG4DD+6OYVxtlmC0B/ZUAmAOirAQBkBVK7B2B6YxQ5AKqa0gActZAWQiFfnaLkmUj+AwBO0x/JU/OnYkOgXQPA3IsBAJAVSOUHQHc9gNUlAeYmqw/l4AKA8VMc5kHbs0LjAGBDAADYMQBOWmhzsQDAJNecAFA1TQDUBWIB0Od/MgAW8x8ABCkHAJZGQKMDAbYAOBBQDsE4AMDcknkFAOxaCgAYxQPgYNwHcAJgshOw+AWfEABtNeJ5JtQBAABOGwOgPSVubQDYW9ImB6Aw/tLpzExIaa8IG15Td4Wod1xvP58WdMnjaAAcjLNA810AAKBrEYDCNvtPOwBg/qIFoJ66by6IIUstaocAOO4Fl+Oz7BbKjuaA0gDA5r9L8ndmUkoLwOJtUdTlk/+mFt/crQp+GJV6azGduTUAbE71sQSg6ALzAoDeC04CgGvyd2ZSEgPgqIkCwHhblE+PmkvY2ztGTEqp64FfLV3fG3EWyADANNHWAqBoA3MG4Nz/WQEA9+TvzKSUuAcw3hal/pq/9bgb+FRvjEpp1z/uAQB6+nEiOwCKU/4AUPnvbSamNQGY3xalKftlu0QNeYZSZTUmWrw2bBsA9AQ0Z0MU5rXb7QUXbZlycqmlVRgDAPPVAACyggcAlrdFeVsPcer7/6j94UkppbdLN/mJBMChBmD8ASYEwK4LKNr/DgCM838lADzzf3sAWN4WpZ4FqmDpuoqmL2hKqYJ5AjDLs20CQI6BvPKMmeopBfN/gwDY3RalPg5wS90E5fbzV1dq4ajUs9VmgQ766aAyADSlJQAour9jABYIiAUATcClA5BGsQDQdgLMANilqzwA1cMkGBsAukZJAXBmuoBSMP8BAKdtAdCVXvoIjtsCgCZAB8A//wEApygAqGuBDQC4j4DGBWQBmP3aqhGA6QhIEgCSAACQQlsEoFj8CJYBGN72BoAiQBIAyfwHAJy2B4D66WwLAOwOrZ1mPzRgAcDQJhkAxpOqxBvz1XsqQwDyUAwA6ruh8ADMk2xlAEprAtYFICj/AQCnfQKwOAYajYDyAEAn4DzzAgBRFAGA5nZY2wFgUtIAwCT/jydhADQCZgCE5T8A4LRBACx2gu0BULdZHBd1AYCI3D3PztqT7uXEKzD/AQCn9ABoKWYFwLhEVgBM1xMAwIwAAJBG8gC0NwSNB0BxDgZgPAlazl6bK/X5T4+BQgCYEjBtZGj+AwBOsU6HXhmAk+E3ZE46AFYEJAXgPPEKzn8AwCkuAKPPNDkAJs/RCMgagNkISAiAM/MCACRSNADmXUBXQU8wZwC0GUJCRgAm6V5OF7kAoIceBsB0h2DwCs9/AMApDwAsPuHIAPTLzACMdoG7LiAKAOexl0D+AwBOACAnACYHBQBACq0PgN0IaFTGCgDjXvBkvFNOFzoDMFmPa27ox3+Hh1lgYQIAjFID4LsLMJQp9LMEKBkAmO7xWgIwzv/oAJxHXiL5DwA4bRIA7irasZwBWCBAA4AcAwUD0CwZASCT/wCAEwDwAODY/w0EgDkH9DzyAgBxtWMAWNfplOd8tpEGQO8A5AAo5stGAAjlPwDglBgAIrsiAcB3AbODXhkAMCdgAEAq/wEAp20CQNwwQZM7AM07JACTo2BdkaMMAMWs/d1dUkrB/AcAnLYDQFuo/psNAPPo3XJjGAEV+mIAkER7BoC2nZ/2o51yQ8RI5r8kAFSopWD+AwBOaQGgvl0zAoDtAuIDQMRq/IyqV7UAABImSURBVCVAVwEARvEAUB/p6HTQ5ABwBHgA0FaZA0DsBHgAMN63YQIVEABgtFEAAiZCOQD6bOQA6FcpBcBsEnQeLABIIW8AllVU/4/nyaIjUezcFrXy64ueDQVHK9ONi8n74zi6QLQgZ6sc3j82S62iJ3SeBTT18XWFnBS3BxjtBJh6ALvvOo8egHCedwDd99nw09dakNwIqNsJ0HuAcytzgNphsHG0Fhc+uwg9AKOkAASNgMbzhdYAmEbWcwD6UI5kDX0ERIyBymnZs5EE/YKyYvwMAKTQVgHw7gKm50GcogDAnOJGLpsGON4hAAAptHcA5t5aBzDO2TaWI1kjCQDdy+IEANLoYgHoY3EFYPyuthNQjkuOxZz3ycz9FENgQgIAjFICQJ5kEBsAbowxBeA8DuZIVaA6gK4LCACA3EvvGyknAMBozwAQXYA+Aprm7FkAAMMer76AaHoBABIqOQDzRPAFwK8L0DsADYApAVr+UwAMtobAqIYbD9UBgBRKDYD2i3AOAPTfjbYA6F0AA8DgNe8C5lNAywBwcdkDMApMTACAUUIAug5gmgnxAaAONY2y2AjAQv5rYyDT2Exvt7nlACCFIgJQT6jMAOgnW3olAIA43YYFoE7nOQDjVS0BwIcFAHLUGgBMUsEbAJ8ugAFgFs8AABGYPwA6+ABgfcUGoP/Uy268rDT9xo0OQL8CYgSkjVrOo7f1DmAJAGNQc/DNDQcAKbQOANNBd0QApl0A1QHow/Zz//Zy/rctdAdguQMAAEkUGYBhDFQeiQQ4zc+mXDL0BKCtxwCgz0uNa03fJQAYN2EhpvPsGQBYXSkBIMbATh3AUDIQgEkW68P287jfmL0JAABAI4t2GwEY7Q97AuBOAA0AcYx2AGD+phmAxZuWTseA5oYDgBRKCAB5JCglAGT+U8P287Errr2nn85xdAFg3PEBgByUDIB5B3BqsiA6ACMCrAE4dQBY5H/bsKLBBQCQFTJWOgCIPDu7AtBv0a66hZYAoFyOzf62/hYJQD+esfnxsvGREACwvhL2AITOQQA4jYGGKaRZJKTJsaCjMgCgfrzPDYCFdgOAFFoXgOY+mHEB6LsAugNgAKA7ALIV/eCusLqQvRv4AYAslAqAI1MhHQBcB0AGdjwXzNiIWtZ/qxc2m+UMADJSTADGJwNxALTFXLdo+7h045F23YZXLADW+T8GwKopACAnJQLgHAcApxOCyFfMfisxZ6XXHRb2w5qysGjM2WoXAAAk0dYBsOoE5texj8QCsGg0XjoAYNOas1UHAACSKDoAbXJEA8CmE3AHgE11emk/qlFmFgTUfwFADkoCgDq3IB4AywQcyadtVQcA2H5hAsD8J484AYAcFBuAegxkBsA9/+dmi8OgI/GsqSkFwHkSmE2TFssAgBRKAUB9fnFMABY7gbgAKAIAgKlCxtoJAEudwHH22NUivYiChoWn6WU/jSzaBACyUAIAmgtMIgOw0AnkB8ByCQCQQvsBwNgJOAPAnPWzVLY3W2wUAMhDSXaC0wBg7ASOo7/T8gIADO8AALJCxooPwOl0iQAstgoA5KEkAByNWy0JAH0cWvF1ALBoNABIoagANEfCtgkAefGjyXxuZm4WAMhEuwJgaQzkBMDpqN8Dy+g+MwMAQ4WMdTEAVEHQV8IYWmI8j5p8b2xmbBcAyEQAwNSSI/uCKWgLgE2bAUAKpQDgaN5qiQDgLoU0tsRwHilZbmJmaBgAyEUXC0Bf1NwS9iwiuhwAICtkrAsCgCm50JJ+V9gdAEPLAEAuig5AN/ZmK3jkP29mS8Co3GJLjpMHcyFLAKzaDABSKAEAR/NWWwUAG69e5FFksszcjGsbAMhGlwnAuJhFS479H3ORHABgwgQAjC4SgEkpm5YctTlUvQhpxjQuGgDH+dG7EDNOAEDJquV5AjAtZNcSLrGGAqQZ3Ti7JnvkLHG429+MFQBQsmt6wQ0OJkWcFQTArIxlS/wAoFsXCYCjYagGABjtDAALAuYlhFLDAQDLFrsGZpyvBQCMLg4ArYBUajCTvXrzbBvsFtgwRgMALooPwGyraR9/WgD09xMDYHnTINJrae3Ecy+zBQEAJbumEwBoGeG6OU8BABBvRwZg1j6H1joENt1FBwAOSg2A/sMTqfcB7L3cZAWAS2PtA5tnPEEAAGCUHoB5EqQEgHo3NgDjBjq11TYwfYYWANhrbwAYCSDfE0sN7qqHgnhmo4D5WX0ZAGCUGIBiulB/ZblF+bcMANBvRQegb6FjSy2P0NktBACMVgfAJ//9AGDeSQaAa0sDANCXAgBGaQEgUuECAKjbaD/92ckqMOYANQCwFQBIA4DgVT/aSm2WAwBGqwDgPTEyMaPFAsC9IZca/P3v3L/+T5anqdq+AQAYRQZgyO/yRM+HSAPAJvqqAPjYBQEwfycGAEvnBw4VMhYASAGAlyy8DCkIAOy0EgDDUwDAKQyA2XsRAlu+SKivkLEMAHz8+frbN/Wz93+8vn5Ylq+vr6+/edm+a9n2MQDkvm8qANh9gw0DYExAAGAlHoDPTx6Wr79Tzz7+8rR8/8PT8sXD0duWbecA8D061JuxWg+Ak/G3MJ216LWQf5O35QPjrz7TK2QsHoCPv74s3/+ovvDfKQxePPz8p6ejty03FgDwFgBIIR6A9z+9qb/7G1XPqiFRPRIqyy8qWfoX5NPRy9lSAZ0dlsrqmGAdDmuLG84x/ipSiAfg3bcjAD4/eVCPgoZewPLbYtQD0CfByc8Q0t/1++sBFr9+xwXEA7O5WVJfIWPZ9QAff37QLu33Ayw3Fg9A+zoRAPwBYsnUOCYEwCL3RkUiAWBHQNwUDpPNPkD5/o/97q8/AMzFsQCAEwBIIdMs0IN2FqjNfzUm+vxn72lQGgCv/AcAlpk3FJIOzHwJ/rxCxlo8DlB1Amr+X+3+Vo9f9xNBlhvLON/vd5LYCQCcAICUkh0JTgcAleyGy2S2CYDlBGRfTDiw0eotIpFMWGnFBsA8369fIm+nXAGwPz3GQgAghVIBUDDXSgEAVqbArNfTFYwHgEUskgkrrXUB8DtRHgDYryYOAIu3IZpVyFgAYN8ALN6Z0kMAQMl2a3WHuyQvFXEGwHSvlA0C4LKW+AAshyOZsNJaGwA/LZhp+Z4MgFKQABkAuNtWB2jeSABgEgDw9uLecFtHfAAWA5JMWGmlAaCQzjPz2wBAKy16tGNxwUySCSutiwDAeMPQzQHgugr2pqW+0gNYCEkyYaUFAIQDkyMAAKRQEgDUfwDg7kXKfQX8Hbu8RJ3vYQ5KMmGltUsA5hkPAAAApxQA1KMgAODuRcnHX/Z2FeQZf8awJBNWWtEB6M73WREA849mAABXMwCgZL3BLgwAOQLIwLzcEwBgDEwyYaWVAIDmUBgA8PDS5ecueLU+BxMA4AQA/L10ZQuAKTLJhJXWPgGY5PzCD0duCgBfc7lL1QBAK+st1p7vCQA8vDStDoBhSpWPTTJhpQUAxAOTIsB5ut2gFADwkkxYacUHoNsIrhWCzACAWE3dBwAoOW8E1wpBZmfyqZ+Xi/YOgN95RZIJKy0AsCEAApyFTlMFAL2cN4JrhTCzM/HM18tBOwfA89oCyYSVFgCQD0yIAC2wEF8AwAgAXAgAIlEBgEHOG8G1QpjZWXvi7+WgfQPge4cJyYSVFgDYDABBtiJH6ADASM4bwbVCmNmaAAgRAABSaK8A9Im/GwDCTCUA8L7NomTCSmvvACzm/+UAEBwWABjLeSO4Vgg02xsAgZ4CAPTVAYCS80ZwrRBoBgB0szAPADCR80ZwrRBotiYAMgQAgBQCANsAINQxvGsa6gIAJeeN4Foh1Ozc/wn3shYAIFeesQBAlMCOAgiMAwu2owE42sc5KggAlJw3gmuFULNVAZDoBCIAMPY5Ntl/tIQAAMzkvBFcK4SarQxAeCcQEYBZ1ltAMH4fACg5bwTXCqFm55NV/kcMTGLiRsRpZHbksn0BAgAwl/NGcK0QarY+AAIHb0WMxmbmLOffBABzOW8E1wrBZufVAQgbBknuT9i2klvTZDkAUHLeCK4Vgs0yACDsKkYJE93MKABgLeeN4Foh2CwLAAI6gTUAYFY1XQoAlJw3gmuFYLOzVf7HD8w3fXsvicNqAIARAIgfmGcnsAoA9MoAgC7njeBaIdgsGwCaOUbbI06aV4Qz6wwip0g9vfoKGWvHAJzO2QDQyQmEdQCgVgcACDlvBNcK4WZW+b9GYHY5vRIA+vrmCwCAkvNGcK0QbpYvAFZJLXlmKQDgBABWAcBmx3gtAPRzRgO8mgoZa88ApPcK+qKlvWLdZcugo/ElAGjkvBFcK6QyWy2wpdReDYDZOgEAKeeN4Fohldl6gS3kdmlRxlr+gekRAAAl543gWiGV2YqBmbN7PQAmawUAtJw3gmuFVGZrBmZM7xUBmFw5FuoFAPy2WiqzVQMz5Xe58L6TvAEgIgAASs4bwbVCKrN1AzNMh64JwLBiAMDIeSO4VkhltnZgbI6XgvnvDQAVAQBQct4IrhVSma0eGJflqwLQXz4v4SWZsNICAOsHxqS5zK8a9WauOvZ/gr0kE1ZaACCDwOhEBwAp5A0AJKej4/I0Oq4eQQqhB8ghMPqLVrAD8Nw757om15VnLACQRWDkvubKAKibaMl4SSastABAHoEtX4cVJi8A2L1z15VnLACQR2A5AsBPT7muPGMBgEwC06/DyiQwAS/JhJUWAMglMO06rFwCC/eSTFhpAYBsAptfiJVNYMFekgkrLQCQTWDz67CyCSzYSzJhpQUA8glsdiFWPoGFekkmrLQAQEaBTS9DySiwQC/JhJUWAMgoMACQXgAgp8Aml6HkFFiYl2TCSgsAZBXY+DqUrAIL8pJMWGkBgLwCG12HkldgIV6SCSstAJBXYMfhb16BhXhJJqy0AEBmgQ3XoWQWWICXZMJKCwDkFlh/Gn5ugfl7SSastABAdoEdAUBCAYDsAutOw88uMG8vyYSVFgDILzAAkFAAAIFF95JMWGkBAAQW3UsyYaUFABBYdC/JhJUWAEBg0b0kE1ZaAACBRfeSTFhpAQAEFt1LMmGlBQAQWHQvyYSVFgBAYNG9JBNWWgAAgUX3kkxYaQEABBbdSzJhpQUAEFh0L8mElRYAQGDRvSQTVloAAIFF95JMWGkBAAQW3UsyYaUFABBYdC/JhJUWAEBg0b0kE1ZaAACBRfeSTFhpAQAEFt1LMmGlBQAQWHQvyYSVFgBAYNG9JBNWWgAAgUX3kkxYaQEABBbdSzJhpQUAEFh0L8mElZY3AKvqi7UD4ITAtiYAICoEtjUBAFEhsK0JAIgKgW1N2wQAgoQEAKCLFgCALloAALpoAQDoorUhAN7/+LL688frb6qHz0+uv35alh9/vv72zdpxTQJrH3IIrArl+mEfyvQB6rQdAN6pzPr488PydfUJvnhYvvv2zecn1avvcgrs4y9P1UMOgalQ3v/wtA1l+gD12gwAL77+9+qL9v1Pb9Qn+/HXl2qZeqi/frMJrH749WUOgb1Tef7iYRvK9GHVwPLSZgBoRhp9nv1PNQRqX2UUWNsDZBJYj+T8Ye24MtLGAKhHGl8/ff/HhyrlqlFQDh/nKLB2jJ1JYJ+fPOhCmT6sHVhG2hgAas/uv/8ps++zcWA/PC3fffMyj8A+/vygLNEDmLU1AMp65P/xf/S7AhmMaEeBtd+wWQSmusl+Pwn7AIw2BkA9xv5O7dyprzbVxWcwpzEKrO0Bcgisyf+yDWX6APXaGADlu+tuOjuX6fZpYNVDJgcoXl8rPcRxALM2BAAEyQsAQBctAABdtAAAdNECANBFCwBAFy0AAF20AAB00QIA0EULAATq2Z3qz6s75adHV1e3n5flzd2rq6t75c1X/1y/hDIXAAjU2yrNPz26/+lRBcKr3/31w/f3q8fbz2/u3lk7MshGACBQKuNvvnquOFDP/+Ov1bKbLx/f3L2/dmSQjQBAqKrhj/p3Vete1SVUD7ceVwysHRhkIwAQqpuv/vLovhr91K8+fH/rcd0DAIBtCACE6tOjf/jqefn2VpPwbxUIb9EDbEYAIFivru4oDKrMrxJfgXBzFwBsRgAgWM3+rpoGVb3As+rh376/DwA2IgAQrJuvMN+/XQGAYL26t3YEkL8AQKBu7rbzP9AmBQCgixYAgC5aAAC6aAEA6KIFAKCLFgCALloAALpo/X/vVV5aisHnUAAAAABJRU5ErkJggg==" /><!-- --></p>
</div>
<div class="slide section level1">

<h2 id="example-2.6">Example 2.6:</h2>
<h3 id="faceting-the-time-series">Faceting the time series</h3>
<p>Now you’ll take a look at six countries. While in the previous exercise you used color to represent distinct countries, this gets a little too crowded with six.</p>
<p>Instead, you will facet, giving each country its own sub-plot. To do so, you add a <code>facet_wrap()</code> step after all of your layers.</p>
<h3 id="instructions-13">Instructions</h3>
<ul>
<li>Create a filtered version that contains these six countries called <code>filtered_6_countries</code>. Use the filtered dataset (containing summarized data for six countries) to create a plot with one facet for each country.</li>
</ul>
<div class="sourceCode" id="cb41"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb41-1" title="1"><span class="co"># Vector of six countries to examine</span></a>
<a class="sourceLine" id="cb41-2" title="2">countries &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;United States&quot;</span>, <span class="st">&quot;United Kingdom&quot;</span>,</a>
<a class="sourceLine" id="cb41-3" title="3">               <span class="st">&quot;France&quot;</span>, <span class="st">&quot;Japan&quot;</span>, <span class="st">&quot;Brazil&quot;</span>, <span class="st">&quot;India&quot;</span>)</a>
<a class="sourceLine" id="cb41-4" title="4"></a>
<a class="sourceLine" id="cb41-5" title="5"><span class="co"># Filtered by_year_country: filtered_6_countries</span></a>
<a class="sourceLine" id="cb41-6" title="6">filtered_<span class="dv">6</span>_countries &lt;-<span class="st"> </span>by_year_country <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb41-7" title="7"><span class="st">  </span><span class="kw">filter</span>(country <span class="op">%in%</span><span class="st"> </span>countries)</a>
<a class="sourceLine" id="cb41-8" title="8"></a>
<a class="sourceLine" id="cb41-9" title="9"><span class="co"># Line plot of % yes over time faceted by country</span></a>
<a class="sourceLine" id="cb41-10" title="10"><span class="kw">ggplot</span>(filtered_<span class="dv">6</span>_countries, <span class="kw">aes</span>(<span class="dt">x =</span> year, <span class="dt">y =</span> percent_yes)) <span class="op">+</span></a>
<a class="sourceLine" id="cb41-11" title="11"><span class="st">  </span><span class="kw">geom_line</span>() <span class="op">+</span><span class="st"> </span></a>
<a class="sourceLine" id="cb41-12" title="12"><span class="st">  </span><span class="kw">facet_wrap</span>(<span class="op">~</span><span class="st"> </span>country)</a></code></pre></div>
<p><img src="data:image/png;base64,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" /><!-- --></p>
</div>
<div class="slide section level1">

<h2 id="example-2.7">Example 2.7:</h2>
<h3 id="faceting-with-free-y-axis">Faceting with free y-axis</h3>
<p>In the previous plot, all six graphs had the same axis limits. This made the changes over time hard to examine for plots with relatively little change.</p>
<p>Instead, you may want to let the plot choose a different y-axis for each facet.</p>
<h3 id="instructions-14">Instructions</h3>
<ul>
<li>Change the faceted plot so that the y-axis is freely chosen for each facet, rather than being the same for all six.</li>
</ul>
<div class="sourceCode" id="cb42"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb42-1" title="1"><span class="co"># Vector of six countries to examine</span></a>
<a class="sourceLine" id="cb42-2" title="2">countries &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;United States&quot;</span>, <span class="st">&quot;United Kingdom&quot;</span>,</a>
<a class="sourceLine" id="cb42-3" title="3">               <span class="st">&quot;France&quot;</span>, <span class="st">&quot;Japan&quot;</span>, <span class="st">&quot;Brazil&quot;</span>, <span class="st">&quot;India&quot;</span>)</a>
<a class="sourceLine" id="cb42-4" title="4"></a>
<a class="sourceLine" id="cb42-5" title="5"><span class="co"># Filtered by_year_country: filtered_6_countries</span></a>
<a class="sourceLine" id="cb42-6" title="6">filtered_<span class="dv">6</span>_countries &lt;-<span class="st"> </span>by_year_country <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb42-7" title="7"><span class="st">  </span><span class="kw">filter</span>(country <span class="op">%in%</span><span class="st"> </span>countries)</a>
<a class="sourceLine" id="cb42-8" title="8"></a>
<a class="sourceLine" id="cb42-9" title="9"><span class="co"># Line plot of % yes over time faceted by country</span></a>
<a class="sourceLine" id="cb42-10" title="10"><span class="kw">ggplot</span>(filtered_<span class="dv">6</span>_countries, <span class="kw">aes</span>(year, percent_yes)) <span class="op">+</span></a>
<a class="sourceLine" id="cb42-11" title="11"><span class="st">  </span><span class="kw">geom_line</span>() <span class="op">+</span></a>
<a class="sourceLine" id="cb42-12" title="12"><span class="st">  </span><span class="kw">facet_wrap</span>(<span class="op">~</span><span class="st"> </span>country, <span class="dt">scales =</span> <span class="st">&quot;free_y&quot;</span>)</a></code></pre></div>
<p><img src="data:image/png;base64,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" /><!-- --></p>
</div>
<div class="slide section level1">

<h2 id="example-2.8">Example 2.8:</h2>
<h3 id="choose-your-own-countries">Choose your own countries</h3>
<p>The purpose of an exploratory data analysis is to ask questions and answer them with data. Now it’s your turn to ask the questions.</p>
<p>You’ll choose some countries whose history you are interested in and add them to the graph. If you want to look up the full list of countries, enter <code>by_country$country</code> in the console.</p>
<h3 id="instructions-15">Instructions</h3>
<ul>
<li>Add <em>three</em> more countries to the <code>countries</code> vector and therefore to the faceted graph.</li>
</ul>
<div class="sourceCode" id="cb43"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb43-1" title="1"><span class="co"># Add three more countries to this list</span></a>
<a class="sourceLine" id="cb43-2" title="2">countries &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;United States&quot;</span>, <span class="st">&quot;United Kingdom&quot;</span>,</a>
<a class="sourceLine" id="cb43-3" title="3">               <span class="st">&quot;France&quot;</span>, <span class="st">&quot;Germany&quot;</span>, <span class="st">&quot;China&quot;</span>, <span class="st">&quot;India&quot;</span>, <span class="st">&quot;Argentina&quot;</span>, <span class="st">&quot;Canada&quot;</span>,<span class="st">&quot;Uruguay&quot;</span>)</a>
<a class="sourceLine" id="cb43-4" title="4"></a>
<a class="sourceLine" id="cb43-5" title="5"><span class="co"># Filtered by_year_country: filtered_countries</span></a>
<a class="sourceLine" id="cb43-6" title="6">filtered_countries &lt;-<span class="st"> </span>by_year_country <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb43-7" title="7"><span class="st">  </span><span class="kw">filter</span>(country <span class="op">%in%</span><span class="st"> </span>countries)</a>
<a class="sourceLine" id="cb43-8" title="8"></a>
<a class="sourceLine" id="cb43-9" title="9"><span class="co"># Line plot of % yes over time faceted by country</span></a>
<a class="sourceLine" id="cb43-10" title="10"><span class="kw">ggplot</span>(filtered_countries, <span class="kw">aes</span>(year, percent_yes)) <span class="op">+</span></a>
<a class="sourceLine" id="cb43-11" title="11"><span class="st">  </span><span class="kw">geom_line</span>() <span class="op">+</span></a>
<a class="sourceLine" id="cb43-12" title="12"><span class="st">  </span><span class="kw">facet_wrap</span>(<span class="op">~</span><span class="st"> </span>country, <span class="dt">scales =</span> <span class="st">&quot;free_y&quot;</span>)</a></code></pre></div>
<p><img src="data:image/png;base64,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" /><!-- --></p>
</div>
<div id="tidy-modeling-with-broom" class="slide section level1">
<h1>Tidy modeling with broom</h1>
<p>While visualization helps you understand one country at a time, statistical modeling lets you quantify trends across many countries and interpret them together. Here you’ll learn to use the tidyr, purrr, and broom packages to fit linear models to each country, and understand and compare their outputs.</p>
</div>
<div class="slide section level1">

<h2 id="example-3.1">Example 3.1:</h2>
<h3 id="linear-regression-on-the-united-states">Linear regression on the United States</h3>
<p>A linear regression is a model that lets us examine how one variable changes with respect to another by fitting a best fit line. It is done with the <code>lm()</code> function in R.</p>
<p>Here, you’ll fit a linear regression to just the percentage of “yes” votes from the United States.</p>
<h3 id="instructions-16">Instructions</h3>
<ul>
<li>Print the <code>US_by_year</code> data to the console.</li>
<li>Using just the US data in <code>US_by_year</code>, use <code>lm()</code> to run a linear regression predicting <code>percent_yes</code> from year. Save this to a variable <code>US_fit</code>.</li>
<li>Summarize <code>US_fit</code> using the <code>summary()</code> function.</li>
</ul>
<div class="sourceCode" id="cb44"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb44-1" title="1"><span class="co"># Percentage of yes votes from the US by year: US_by_year</span></a>
<a class="sourceLine" id="cb44-2" title="2">US_by_year &lt;-<span class="st"> </span>by_year_country <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb44-3" title="3"><span class="st">  </span><span class="kw">filter</span>(country <span class="op">==</span><span class="st"> &quot;United States&quot;</span>)</a>
<a class="sourceLine" id="cb44-4" title="4"></a>
<a class="sourceLine" id="cb44-5" title="5"><span class="co"># Print the US_by_year data</span></a>
<a class="sourceLine" id="cb44-6" title="6">US_by_year</a></code></pre></div>
<pre><code>## # A tibble: 34 x 4
## # Groups:   year [34]
##     year country       total percent_yes
##    &lt;dbl&gt; &lt;chr&gt;         &lt;int&gt;       &lt;dbl&gt;
##  1  1947 United States    38       0.711
##  2  1949 United States    64       0.281
##  3  1951 United States    25       0.4  
##  4  1953 United States    26       0.5  
##  5  1955 United States    37       0.622
##  6  1957 United States    34       0.647
##  7  1959 United States    54       0.426
##  8  1961 United States    75       0.507
##  9  1963 United States    32       0.5  
## 10  1965 United States    41       0.366
## # ... with 24 more rows</code></pre>
<div class="sourceCode" id="cb46"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb46-1" title="1"><span class="co"># Perform a linear regression of percent_yes by year: US_fit</span></a>
<a class="sourceLine" id="cb46-2" title="2">US_fit &lt;-<span class="st"> </span><span class="kw">lm</span>(percent_yes <span class="op">~</span><span class="st"> </span>year, <span class="dt">data =</span> US_by_year)</a>
<a class="sourceLine" id="cb46-3" title="3"></a>
<a class="sourceLine" id="cb46-4" title="4"><span class="co"># Perform summary() on the US_fit object</span></a>
<a class="sourceLine" id="cb46-5" title="5"><span class="kw">summary</span>(US_fit)</a></code></pre></div>
<pre><code>## 
## Call:
## lm(formula = percent_yes ~ year, data = US_by_year)
## 
## Residuals:
##       Min        1Q    Median        3Q       Max 
## -0.222491 -0.080635 -0.008661  0.081948  0.194307 
## 
## Coefficients:
##               Estimate Std. Error t value Pr(&gt;|t|)    
## (Intercept) 12.6641455  1.8379743   6.890 8.48e-08 ***
## year        -0.0062393  0.0009282  -6.722 1.37e-07 ***
## ---
## Signif. codes:  0 &#39;***&#39; 0.001 &#39;**&#39; 0.01 &#39;*&#39; 0.05 &#39;.&#39; 0.1 &#39; &#39; 1
## 
## Residual standard error: 0.1062 on 32 degrees of freedom
## Multiple R-squared:  0.5854, Adjusted R-squared:  0.5724 
## F-statistic: 45.18 on 1 and 32 DF,  p-value: 1.367e-07</code></pre>
</div>
<div class="slide section level1">

<h2 id="example-3.2">Example 3.2:</h2>
<h3 id="tidying-a-linear-regression-model">Tidying a linear regression model</h3>
<p>In the last section, you fit a linear model. Now, you’ll use the <code>tidy()</code> function in the <code>broom</code> package to turn that model into a tidy data frame.</p>
<h3 id="instructions-17">Instructions</h3>
<p>The <code>US_fit</code> linear model is available in your workspace.</p>
<ul>
<li>Load the <code>broom</code> package.</li>
<li>Use the <code>tidy()</code> function from <code>broom</code> on the model object to turn it into a tidy data frame. Don’t store the result; just print the output to the console.</li>
</ul>
<div class="sourceCode" id="cb48"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb48-1" title="1"><span class="co"># Load the broom package</span></a>
<a class="sourceLine" id="cb48-2" title="2"><span class="kw">library</span>(broom)</a>
<a class="sourceLine" id="cb48-3" title="3"></a>
<a class="sourceLine" id="cb48-4" title="4"><span class="co"># Call the tidy() function on the US_fit object</span></a>
<a class="sourceLine" id="cb48-5" title="5"><span class="kw">tidy</span>(US_fit)</a></code></pre></div>
<pre><code>## # A tibble: 2 x 5
##   term        estimate std.error statistic      p.value
##   &lt;chr&gt;          &lt;dbl&gt;     &lt;dbl&gt;     &lt;dbl&gt;        &lt;dbl&gt;
## 1 (Intercept) 12.7      1.84          6.89 0.0000000848
## 2 year        -0.00624  0.000928     -6.72 0.000000137</code></pre>
</div>
<div class="slide section level1">

<h2 id="example-3.3">Example 3.3:</h2>
<h3 id="combining-models-for-multiple-countries">Combining models for multiple countries</h3>
<p>One important advantage of changing models to tidied data frames is that they can be combined.</p>
<p>In an earlier section, you fit a linear model to the percentage of “yes” votes for each year in the United States. Now you’ll fit the same model for the United Kingdom and combine the results from both countries.</p>
<h3 id="instructions-18">Instructions</h3>
<ul>
<li>Fit a model for the United Kingdom similar to the one you fit for the US and save it as <code>UK_fit</code>.</li>
<li>Tidy <code>US_fit</code> into a data frame called <code>US_tidied</code> and the UK model into <code>UK_tidied</code>.</li>
<li>Use <code>bind_rows()</code> from <code>dplyr</code> to combine the two tidied models, printing the result to the console.</li>
</ul>
<div class="sourceCode" id="cb50"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb50-1" title="1"><span class="co"># Linear regression of percent_yes by year for US</span></a>
<a class="sourceLine" id="cb50-2" title="2">US_by_year &lt;-<span class="st"> </span>by_year_country <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb50-3" title="3"><span class="st">  </span><span class="kw">filter</span>(country <span class="op">==</span><span class="st"> &quot;United States&quot;</span>)</a>
<a class="sourceLine" id="cb50-4" title="4">US_fit &lt;-<span class="st"> </span><span class="kw">lm</span>(percent_yes <span class="op">~</span><span class="st"> </span>year, US_by_year)</a>
<a class="sourceLine" id="cb50-5" title="5"></a>
<a class="sourceLine" id="cb50-6" title="6"><span class="co"># Fit model for the United Kingdom</span></a>
<a class="sourceLine" id="cb50-7" title="7">UK_by_year &lt;-<span class="st"> </span>by_year_country <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb50-8" title="8"><span class="st">  </span><span class="kw">filter</span>(country <span class="op">==</span><span class="st"> &quot;United Kingdom&quot;</span>)</a>
<a class="sourceLine" id="cb50-9" title="9">UK_fit &lt;-<span class="st"> </span><span class="kw">lm</span>(percent_yes <span class="op">~</span><span class="st"> </span>year, UK_by_year)</a>
<a class="sourceLine" id="cb50-10" title="10"></a>
<a class="sourceLine" id="cb50-11" title="11"><span class="co"># Create US_tidied and UK_tidied</span></a>
<a class="sourceLine" id="cb50-12" title="12">US_tidied &lt;-<span class="st"> </span><span class="kw">tidy</span>(US_fit)</a>
<a class="sourceLine" id="cb50-13" title="13">UK_tidied &lt;-<span class="st"> </span><span class="kw">tidy</span>(UK_fit)</a>
<a class="sourceLine" id="cb50-14" title="14"></a>
<a class="sourceLine" id="cb50-15" title="15"><span class="co"># Combine the two tidied models</span></a>
<a class="sourceLine" id="cb50-16" title="16"><span class="kw">bind_rows</span>(US_tidied, UK_tidied)</a></code></pre></div>
<pre><code>## # A tibble: 4 x 5
##   term        estimate std.error statistic      p.value
##   &lt;chr&gt;          &lt;dbl&gt;     &lt;dbl&gt;     &lt;dbl&gt;        &lt;dbl&gt;
## 1 (Intercept) 12.7      1.84          6.89 0.0000000848
## 2 year        -0.00624  0.000928     -6.72 0.000000137 
## 3 (Intercept) -3.27     1.96         -1.67 0.105       
## 4 year         0.00187  0.000989      1.89 0.0677</code></pre>
</div>
<div class="slide section level1">

<h2 id="example-3.4">Example 3.4:</h2>
<h3 id="nesting-a-data-frame">Nesting a data frame</h3>
<p>Right now, the <code>by_year_country</code> data frame has one row per country-vote pair. So that you can model each country individually, you’re going to “nest” all columns besides country, which will result in a data frame with one row per <code>country</code>. The data for each individual country will then be stored in a <strong>list column</strong> called <code>data</code>.</p>
<h3 id="instructions-19">Instructions</h3>
<ul>
<li>Load the <code>tidyr</code> package.</li>
<li>Use the <code>nest()</code> function to nest all the columns in <code>by_year_country</code> except <code>country</code>.</li>
</ul>
<div class="sourceCode" id="cb52"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb52-1" title="1"><span class="co"># Load the tidyr package</span></a>
<a class="sourceLine" id="cb52-2" title="2"><span class="kw">library</span>(tidyr)</a>
<a class="sourceLine" id="cb52-3" title="3"><span class="co"># Nest all columns besides country</span></a>
<a class="sourceLine" id="cb52-4" title="4">by_year_country <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb52-5" title="5"><span class="st">  </span><span class="kw">nest</span>(<span class="op">-</span>country)</a></code></pre></div>
<pre><code>## # A tibble: 200 x 2
##    country     data             
##    &lt;chr&gt;       &lt;list&gt;           
##  1 Afghanistan &lt;tibble [34 x 3]&gt;
##  2 Argentina   &lt;tibble [34 x 3]&gt;
##  3 Australia   &lt;tibble [34 x 3]&gt;
##  4 Belarus     &lt;tibble [34 x 3]&gt;
##  5 Belgium     &lt;tibble [34 x 3]&gt;
##  6 Bolivia     &lt;tibble [34 x 3]&gt;
##  7 Brazil      &lt;tibble [34 x 3]&gt;
##  8 Canada      &lt;tibble [34 x 3]&gt;
##  9 Chile       &lt;tibble [34 x 3]&gt;
## 10 Colombia    &lt;tibble [34 x 3]&gt;
## # ... with 190 more rows</code></pre>
</div>
<div class="slide section level1">

<h2 id="example-3.5">Example 3.5:</h2>
<h3 id="list-columns">List columns</h3>
<p>This “nested” data has an interesting structure. The second column, <code>data</code>, is a <strong>list</strong>, a type of R object that hasn’t yet come up in this course that allows complicated objects to be stored within each row. This is because each item of the <code>data</code> column is itself a data frame.</p>
<pre><code>## # A tibble: 200 x 2
##    country     data             
##    &lt;chr&gt;       &lt;list&gt;           
##  1 Afghanistan &lt;tibble [34 x 3]&gt;
##  2 Argentina   &lt;tibble [34 x 3]&gt;
##  3 Australia   &lt;tibble [34 x 3]&gt;
##  4 Belarus     &lt;tibble [34 x 3]&gt;
##  5 Belgium     &lt;tibble [34 x 3]&gt;
##  6 Bolivia     &lt;tibble [34 x 3]&gt;
##  7 Brazil      &lt;tibble [34 x 3]&gt;
##  8 Canada      &lt;tibble [34 x 3]&gt;
##  9 Chile       &lt;tibble [34 x 3]&gt;
## 10 Colombia    &lt;tibble [34 x 3]&gt;
## # ... with 190 more rows</code></pre>
<p>You can use <code>nested$data</code> to access this list column and double brackets to access a particular element. For example, <code>nested$data[[1]]</code> would give you the data frame with Afghanistan’s voting history (the <code>percent_yes</code> per year), since Afghanistan is the first row of the table.</p>
<h3 id="instructions-20">Instructions</h3>
<ul>
<li>Print the data frame from the <code>data</code> column that contains the data for Brazil.</li>
</ul>
<div class="sourceCode" id="cb55"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb55-1" title="1"><span class="co"># All countries are nested besides country</span></a>
<a class="sourceLine" id="cb55-2" title="2">nested &lt;-<span class="st"> </span>by_year_country <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb55-3" title="3"><span class="st">  </span><span class="kw">nest</span>(<span class="op">-</span>country)</a>
<a class="sourceLine" id="cb55-4" title="4"></a>
<a class="sourceLine" id="cb55-5" title="5">nested<span class="op">$</span>data[[<span class="dv">1</span>]]</a></code></pre></div>
<pre><code>## # A tibble: 34 x 3
## # Groups:   year [34]
##     year total percent_yes
##    &lt;dbl&gt; &lt;int&gt;       &lt;dbl&gt;
##  1  1947    34       0.382
##  2  1949    51       0.608
##  3  1951    25       0.76 
##  4  1953    26       0.769
##  5  1955    37       0.730
##  6  1957    34       0.529
##  7  1959    54       0.611
##  8  1961    76       0.605
##  9  1963    32       0.781
## 10  1965    40       0.85 
## # ... with 24 more rows</code></pre>
<div class="sourceCode" id="cb57"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb57-1" title="1"><span class="co"># Print the nested data for Brazil</span></a>
<a class="sourceLine" id="cb57-2" title="2">nested<span class="op">$</span>data[nested<span class="op">$</span>country <span class="op">==</span><span class="st"> &#39;Brazil&#39;</span>]</a></code></pre></div>
<pre><code>## [[1]]
## # A tibble: 34 x 3
## # Groups:   year [34]
##     year total percent_yes
##    &lt;dbl&gt; &lt;int&gt;       &lt;dbl&gt;
##  1  1947    38       0.658
##  2  1949    64       0.469
##  3  1951    25       0.64 
##  4  1953    26       0.731
##  5  1955    37       0.730
##  6  1957    34       0.735
##  7  1959    54       0.537
##  8  1961    76       0.553
##  9  1963    32       0.781
## 10  1965    41       0.610
## # ... with 24 more rows
## 
## [[2]]
## NULL</code></pre>
</div>
<div class="slide section level1">

<h2 id="example-3.6">Example 3.6:</h2>
<h3 id="unnesting">Unnesting</h3>
<p>The opposite of the <code>nest()</code> operation is the <code>unnest()</code> operation. This takes each of the data frames in the list column and brings those rows back to the main data frame.</p>
<p>In this exercise, you are just undoing the <code>nest()</code> operation. In the next section, you’ll learn ho w to fit a model in between these nesting and unnesting steps that makes this process useful.</p>
<h3 id="instructions-21">Instructions</h3>
<ul>
<li>Unnest the <code>data</code> list column, so that the table again has one row for each country-year pair, much like <code>by_year_country</code>.</li>
</ul>
<div class="sourceCode" id="cb59"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb59-1" title="1"><span class="co"># All countries are nested besides country</span></a>
<a class="sourceLine" id="cb59-2" title="2">nested &lt;-<span class="st"> </span>by_year_country <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb59-3" title="3"><span class="st">  </span><span class="kw">nest</span>(<span class="op">-</span>country)</a>
<a class="sourceLine" id="cb59-4" title="4"></a>
<a class="sourceLine" id="cb59-5" title="5"><span class="co"># Unnest the data column to return it to its original form</span></a>
<a class="sourceLine" id="cb59-6" title="6">nested <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb59-7" title="7"><span class="st">  </span><span class="kw">unnest</span>()</a></code></pre></div>
<pre><code>## # A tibble: 4,744 x 4
##    country      year total percent_yes
##    &lt;chr&gt;       &lt;dbl&gt; &lt;int&gt;       &lt;dbl&gt;
##  1 Afghanistan  1947    34       0.382
##  2 Afghanistan  1949    51       0.608
##  3 Afghanistan  1951    25       0.76 
##  4 Afghanistan  1953    26       0.769
##  5 Afghanistan  1955    37       0.730
##  6 Afghanistan  1957    34       0.529
##  7 Afghanistan  1959    54       0.611
##  8 Afghanistan  1961    76       0.605
##  9 Afghanistan  1963    32       0.781
## 10 Afghanistan  1965    40       0.85 
## # ... with 4,734 more rows</code></pre>
</div>
<div class="slide section level1">

<h2 id="example-3.7">Example 3.7:</h2>
<h3 id="performing-linear-regression-on-each-nested-dataset">Performing linear regression on each nested dataset</h3>
<p>Now that you’ve divided the data for each country into a separate dataset in the <code>data</code> column, you need to fit a linear model to each of these datasets.</p>
<p>The <code>map()</code> function from <code>purrr</code> works by applying a formula to each item in a list, where . represents the individual item. For example, you could add one to each of a list of numbers:</p>
<p><code>map(numbers, ~ 1 + .)</code></p>
<p>This means that to fit a model to each dataset, you can do:</p>
<p><code>map(data, ~ lm(percent_yes ~ year, data = .))</code></p>
<p>where <code>.</code> represents each individual item from the <code>data</code> column in <code>by_year_country</code>. Recall that each item in the <code>data</code> column is a dataset that pertains to a specific country.</p>
<h3 id="instructions-22">Instructions</h3>
<ul>
<li>Load the <code>tidyr</code> and <code>purrr</code> packages.</li>
<li>After nesting, use the <code>map()</code> function within a <code>mutate()</code> to perform a linear regression on each dataset (i.e. each item in the data column in <code>by_year_country</code>) modeling <code>percent_yes</code> as a function of <code>year</code>. Save the results to the <code>model</code> column.</li>
</ul>
<div class="sourceCode" id="cb61"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb61-1" title="1"><span class="co"># Load tidyr and purrr</span></a>
<a class="sourceLine" id="cb61-2" title="2"><span class="kw">library</span>(tidyr)</a>
<a class="sourceLine" id="cb61-3" title="3"><span class="kw">library</span>(purrr)</a>
<a class="sourceLine" id="cb61-4" title="4"></a>
<a class="sourceLine" id="cb61-5" title="5"><span class="co"># Perform a linear regression on each item in the data column</span></a>
<a class="sourceLine" id="cb61-6" title="6">by_year_country <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb61-7" title="7"><span class="st">  </span><span class="kw">nest</span>(<span class="op">-</span>country) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb61-8" title="8"><span class="st">  </span><span class="kw">mutate</span>(</a>
<a class="sourceLine" id="cb61-9" title="9">    <span class="dt">model =</span> <span class="kw">map</span>(data, <span class="op">~</span><span class="st"> </span><span class="kw">lm</span>(percent_yes <span class="op">~</span><span class="st"> </span>year, <span class="dt">data =</span> .))</a>
<a class="sourceLine" id="cb61-10" title="10">  )</a></code></pre></div>
<pre><code>## # A tibble: 200 x 3
##    country     data              model 
##    &lt;chr&gt;       &lt;list&gt;            &lt;list&gt;
##  1 Afghanistan &lt;tibble [34 x 3]&gt; &lt;lm&gt;  
##  2 Argentina   &lt;tibble [34 x 3]&gt; &lt;lm&gt;  
##  3 Australia   &lt;tibble [34 x 3]&gt; &lt;lm&gt;  
##  4 Belarus     &lt;tibble [34 x 3]&gt; &lt;lm&gt;  
##  5 Belgium     &lt;tibble [34 x 3]&gt; &lt;lm&gt;  
##  6 Bolivia     &lt;tibble [34 x 3]&gt; &lt;lm&gt;  
##  7 Brazil      &lt;tibble [34 x 3]&gt; &lt;lm&gt;  
##  8 Canada      &lt;tibble [34 x 3]&gt; &lt;lm&gt;  
##  9 Chile       &lt;tibble [34 x 3]&gt; &lt;lm&gt;  
## 10 Colombia    &lt;tibble [34 x 3]&gt; &lt;lm&gt;  
## # ... with 190 more rows</code></pre>
</div>
<div class="slide section level1">

<h2 id="example-3.8">Example 3.8:</h2>
<h3 id="tidy-each-linear-regression-model">Tidy each linear regression model</h3>
<p>You’ve now performed a linear regression on each nested dataset and have a linear model stored in the list column model. But you can’t recombine the <code>models</code> until you’ve tidied each into a table of coefficients. To do that, you’ll need to use <code>map()</code> one more time and the <code>tidy()</code> function from the <code>broom</code> package.</p>
<p>Recall that you can simply give a function to <code>map()</code> (e.g. <code>map(models, tidy)</code>) in order to apply that function to each item of a list.</p>
<h3 id="instructions-23">Instructions</h3>
<ul>
<li>Load the <code>broom</code> package.</li>
<li>Use the <code>map()</code> function to apply the <code>tidy()</code> function to each linear model in the <code>model</code> column, creating a new column called <code>tidied</code>.</li>
</ul>
<div class="sourceCode" id="cb63"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb63-1" title="1"><span class="co"># Load the broom package</span></a>
<a class="sourceLine" id="cb63-2" title="2"><span class="kw">library</span>(broom)</a>
<a class="sourceLine" id="cb63-3" title="3"></a>
<a class="sourceLine" id="cb63-4" title="4"><span class="co"># Add another mutate that applies tidy() to each model</span></a>
<a class="sourceLine" id="cb63-5" title="5">by_year_country <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb63-6" title="6"><span class="st">  </span><span class="kw">nest</span>(<span class="op">-</span>country) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb63-7" title="7"><span class="st">  </span><span class="kw">mutate</span>(</a>
<a class="sourceLine" id="cb63-8" title="8">    <span class="dt">model =</span> <span class="kw">map</span>(data, <span class="op">~</span><span class="st"> </span><span class="kw">lm</span>(percent_yes <span class="op">~</span><span class="st"> </span>year, <span class="dt">data =</span> .)),</a>
<a class="sourceLine" id="cb63-9" title="9">    <span class="dt">tidied =</span> <span class="kw">map</span>(model, tidy)</a>
<a class="sourceLine" id="cb63-10" title="10">  )</a></code></pre></div>
<pre><code>## # A tibble: 200 x 4
##    country     data              model  tidied          
##    &lt;chr&gt;       &lt;list&gt;            &lt;list&gt; &lt;list&gt;          
##  1 Afghanistan &lt;tibble [34 x 3]&gt; &lt;lm&gt;   &lt;tibble [2 x 5]&gt;
##  2 Argentina   &lt;tibble [34 x 3]&gt; &lt;lm&gt;   &lt;tibble [2 x 5]&gt;
##  3 Australia   &lt;tibble [34 x 3]&gt; &lt;lm&gt;   &lt;tibble [2 x 5]&gt;
##  4 Belarus     &lt;tibble [34 x 3]&gt; &lt;lm&gt;   &lt;tibble [2 x 5]&gt;
##  5 Belgium     &lt;tibble [34 x 3]&gt; &lt;lm&gt;   &lt;tibble [2 x 5]&gt;
##  6 Bolivia     &lt;tibble [34 x 3]&gt; &lt;lm&gt;   &lt;tibble [2 x 5]&gt;
##  7 Brazil      &lt;tibble [34 x 3]&gt; &lt;lm&gt;   &lt;tibble [2 x 5]&gt;
##  8 Canada      &lt;tibble [34 x 3]&gt; &lt;lm&gt;   &lt;tibble [2 x 5]&gt;
##  9 Chile       &lt;tibble [34 x 3]&gt; &lt;lm&gt;   &lt;tibble [2 x 5]&gt;
## 10 Colombia    &lt;tibble [34 x 3]&gt; &lt;lm&gt;   &lt;tibble [2 x 5]&gt;
## # ... with 190 more rows</code></pre>
</div>
<div class="slide section level1">

<h2 id="example-3.9">Example 3.9:</h2>
<h3 id="unnesting-a-data-frame">Unnesting a data frame</h3>
<p>You now have a tidied version of each model stored in the <code>tidied</code> column. You want to combine all of those into a large data frame, similar to how you combined the US and UK tidied models earlier. Recall that the <code>unnest()</code> function from <code>tidyr</code> achieves this.</p>
<h3 id="instructions-24">Instructions</h3>
<ul>
<li>Add an <code>unnest()</code> step to unnest the <code>tidied</code> models stored in the tidied column. Save the result as <code>country_coefficients</code>.</li>
<li>Print the resulting <code>country_coefficients</code> object to the console.</li>
</ul>
<div class="sourceCode" id="cb65"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb65-1" title="1"><span class="co"># Add one more step that unnests the tidied column</span></a>
<a class="sourceLine" id="cb65-2" title="2">country_coefficients &lt;-<span class="st"> </span>by_year_country <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb65-3" title="3"><span class="st">  </span><span class="kw">group_by</span>(country) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb65-4" title="4"><span class="st">  </span><span class="kw">nest</span>() <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb65-5" title="5"><span class="st">  </span><span class="kw">mutate</span>(<span class="dt">model =</span> <span class="kw">map</span>(data, <span class="op">~</span><span class="st"> </span><span class="kw">lm</span>(percent_yes <span class="op">~</span><span class="st"> </span>year, <span class="dt">data =</span> .)),</a>
<a class="sourceLine" id="cb65-6" title="6">         <span class="dt">tidied =</span> <span class="kw">map</span>(model, tidy)) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb65-7" title="7"><span class="st">  </span><span class="kw">unnest</span>(tidied)</a>
<a class="sourceLine" id="cb65-8" title="8"></a>
<a class="sourceLine" id="cb65-9" title="9"><span class="co"># Print the resulting country_coefficients variable</span></a>
<a class="sourceLine" id="cb65-10" title="10">country_coefficients</a></code></pre></div>
<pre><code>## # A tibble: 400 x 8
## # Groups:   country [200]
##    country   data      model term    estimate std.error statistic   p.value
##    &lt;chr&gt;     &lt;list&gt;    &lt;lis&gt; &lt;chr&gt;      &lt;dbl&gt;     &lt;dbl&gt;     &lt;dbl&gt;     &lt;dbl&gt;
##  1 Afghanis~ &lt;tibble ~ &lt;lm&gt;  (Inter~ -1.11e+1  1.47         -7.52   1.44e-8
##  2 Afghanis~ &lt;tibble ~ &lt;lm&gt;  year     6.01e-3  0.000743      8.09   3.06e-9
##  3 Argentina &lt;tibble ~ &lt;lm&gt;  (Inter~ -9.46e+0  2.10         -4.50   8.32e-5
##  4 Argentina &lt;tibble ~ &lt;lm&gt;  year     5.15e-3  0.00106       4.85   3.05e-5
##  5 Australia &lt;tibble ~ &lt;lm&gt;  (Inter~ -4.55e+0  2.15         -2.12   4.22e-2
##  6 Australia &lt;tibble ~ &lt;lm&gt;  year     2.57e-3  0.00108       2.37   2.42e-2
##  7 Belarus   &lt;tibble ~ &lt;lm&gt;  (Inter~ -7.00e+0  1.50         -4.66   5.33e-5
##  8 Belarus   &lt;tibble ~ &lt;lm&gt;  year     3.91e-3  0.000759      5.15   1.28e-5
##  9 Belgium   &lt;tibble ~ &lt;lm&gt;  (Inter~ -5.85e+0  1.52         -3.86   5.22e-4
## 10 Belgium   &lt;tibble ~ &lt;lm&gt;  year     3.20e-3  0.000765      4.19   2.07e-4
## # ... with 390 more rows</code></pre>
</div>
<div class="slide section level1">

<h2 id="example-3.10">Example 3.10:</h2>
<h3 id="filtering-model-terms">Filtering model terms</h3>
<p>You currently have both the intercept and slope terms for each by-country model. You’re probably more interested in how each is changing over time, so you want to focus on the slope terms.</p>
<h3 id="instructions-25">Instructions</h3>
<ul>
<li>Print the <code>country_coefficients</code> data frame to the console.</li>
<li>Perform a <code>filter()</code> step that extracts only the slope (not intercept) terms.</li>
</ul>
<div class="sourceCode" id="cb67"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb67-1" title="1"><span class="co"># Print the country_coefficients dataset</span></a>
<a class="sourceLine" id="cb67-2" title="2">country_coefficients</a></code></pre></div>
<pre><code>## # A tibble: 400 x 8
## # Groups:   country [200]
##    country   data      model term    estimate std.error statistic   p.value
##    &lt;chr&gt;     &lt;list&gt;    &lt;lis&gt; &lt;chr&gt;      &lt;dbl&gt;     &lt;dbl&gt;     &lt;dbl&gt;     &lt;dbl&gt;
##  1 Afghanis~ &lt;tibble ~ &lt;lm&gt;  (Inter~ -1.11e+1  1.47         -7.52   1.44e-8
##  2 Afghanis~ &lt;tibble ~ &lt;lm&gt;  year     6.01e-3  0.000743      8.09   3.06e-9
##  3 Argentina &lt;tibble ~ &lt;lm&gt;  (Inter~ -9.46e+0  2.10         -4.50   8.32e-5
##  4 Argentina &lt;tibble ~ &lt;lm&gt;  year     5.15e-3  0.00106       4.85   3.05e-5
##  5 Australia &lt;tibble ~ &lt;lm&gt;  (Inter~ -4.55e+0  2.15         -2.12   4.22e-2
##  6 Australia &lt;tibble ~ &lt;lm&gt;  year     2.57e-3  0.00108       2.37   2.42e-2
##  7 Belarus   &lt;tibble ~ &lt;lm&gt;  (Inter~ -7.00e+0  1.50         -4.66   5.33e-5
##  8 Belarus   &lt;tibble ~ &lt;lm&gt;  year     3.91e-3  0.000759      5.15   1.28e-5
##  9 Belgium   &lt;tibble ~ &lt;lm&gt;  (Inter~ -5.85e+0  1.52         -3.86   5.22e-4
## 10 Belgium   &lt;tibble ~ &lt;lm&gt;  year     3.20e-3  0.000765      4.19   2.07e-4
## # ... with 390 more rows</code></pre>
<div class="sourceCode" id="cb69"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb69-1" title="1"><span class="co"># Filter for only the slope terms</span></a>
<a class="sourceLine" id="cb69-2" title="2">country_coefficients <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb69-3" title="3"><span class="st">  </span><span class="kw">filter</span>(term <span class="op">==</span><span class="st"> &#39;year&#39;</span>)</a></code></pre></div>
<pre><code>## # A tibble: 200 x 8
## # Groups:   country [200]
##    country   data        model term  estimate std.error statistic   p.value
##    &lt;chr&gt;     &lt;list&gt;      &lt;lis&gt; &lt;chr&gt;    &lt;dbl&gt;     &lt;dbl&gt;     &lt;dbl&gt;     &lt;dbl&gt;
##  1 Afghanis~ &lt;tibble [3~ &lt;lm&gt;  year   0.00601  0.000743      8.09   3.06e-9
##  2 Argentina &lt;tibble [3~ &lt;lm&gt;  year   0.00515  0.00106       4.85   3.05e-5
##  3 Australia &lt;tibble [3~ &lt;lm&gt;  year   0.00257  0.00108       2.37   2.42e-2
##  4 Belarus   &lt;tibble [3~ &lt;lm&gt;  year   0.00391  0.000759      5.15   1.28e-5
##  5 Belgium   &lt;tibble [3~ &lt;lm&gt;  year   0.00320  0.000765      4.19   2.07e-4
##  6 Bolivia   &lt;tibble [3~ &lt;lm&gt;  year   0.00580  0.000966      6.01   1.06e-6
##  7 Brazil    &lt;tibble [3~ &lt;lm&gt;  year   0.00611  0.000817      7.48   1.64e-8
##  8 Canada    &lt;tibble [3~ &lt;lm&gt;  year   0.00152  0.000955      1.59   1.22e-1
##  9 Chile     &lt;tibble [3~ &lt;lm&gt;  year   0.00678  0.000822      8.24   2.05e-9
## 10 Colombia  &lt;tibble [3~ &lt;lm&gt;  year   0.00616  0.000965      6.38   3.58e-7
## # ... with 190 more rows</code></pre>
</div>
<div class="slide section level1">

<h2 id="example-3.11">Example 3.11:</h2>
<h3 id="filtering-for-significant-countries">Filtering for significant countries</h3>
<p>Not all slopes are significant, and you can use the p-value to guess which are and which are not.</p>
<p>However, when you have lots of p-values, like one for each country, you run into the problem of multiple hypothesis testing, where you have to set a stricter threshold. The <code>p.adjust()</code> function is a simple way to correct for this, where <code>p.adjust(p.value)</code> on a vector of p-values returns a set that you can trust.</p>
<p>Here you’ll add two steps to process the <code>slope_terms</code> dataset: use a <code>mutate</code> to create the new, adjusted p-value column, and <code>filter</code> to filter for those below <span class="math inline">\(\alpha=0.5\)</span> threshold.</p>
<h3 id="instructions-26">Instructions</h3>
<ul>
<li>Use the <code>p.adjust()</code> function to adjust the <code>p.value</code> column, saving the result into a new <code>p.adjusted</code> column. Then, filter for cases where <code>p.adjusted</code> is less than <span class="math inline">\(\alpha=0.5\)</span></li>
</ul>
<div class="sourceCode" id="cb71"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb71-1" title="1"><span class="co"># Filter for only the slope terms</span></a>
<a class="sourceLine" id="cb71-2" title="2">slope_terms &lt;-<span class="st"> </span>country_coefficients <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb71-3" title="3"><span class="st">  </span><span class="kw">filter</span>(term <span class="op">==</span><span class="st"> &quot;year&quot;</span>)</a>
<a class="sourceLine" id="cb71-4" title="4"></a>
<a class="sourceLine" id="cb71-5" title="5"><span class="co"># Add p.adjusted column, then filter</span></a>
<a class="sourceLine" id="cb71-6" title="6">slope_terms <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb71-7" title="7"><span class="st">  </span><span class="kw">mutate</span>(<span class="dt">p.adjusted =</span> <span class="kw">p.adjust</span>(p.value)) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb71-8" title="8"><span class="st">  </span><span class="kw">data.frame</span>() <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">head</span>()</a></code></pre></div>
<pre><code>##       country
## 1 Afghanistan
## 2   Argentina
## 3   Australia
## 4     Belarus
## 5     Belgium
## 6     Bolivia
##                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              data
## 1 1947.0000000, 1949.0000000, 1951.0000000, 1953.0000000, 1955.0000000, 1957.0000000, 1959.0000000, 1961.0000000, 1963.0000000, 1965.0000000, 1967.0000000, 1969.0000000, 1971.0000000, 1973.0000000, 1975.0000000, 1977.0000000, 1979.0000000, 1981.0000000, 1983.0000000, 1985.0000000, 1987.0000000, 1989.0000000, 1991.0000000, 1993.0000000, 1995.0000000, 1997.0000000, 1999.0000000, 2001.0000000, 2003.0000000, 2005.0000000, 2007.0000000, 2009.0000000, 2011.0000000, 2013.0000000, 34.0000000, 51.0000000, 25.0000000, 26.0000000, 37.0000000, 34.0000000, 54.0000000, 76.0000000, 32.0000000, 40.0000000, 57.0000000, 42.0000000, 122.0000000, 92.0000000, 68.0000000, 95.0000000, 114.0000000, 125.0000000, 146.0000000, 148.0000000, 140.0000000, 114.0000000, 67.0000000, 55.0000000, 70.0000000, 59.0000000, 26.0000000, 38.0000000, 59.0000000, 66.0000000, 74.0000000, 63.0000000, 64.0000000, 60.0000000, 0.3823529, 0.6078431, 0.7600000, 0.7692308, 0.7297297, 0.5294118, 0.6111111, 0.6052632, 0.7812500, 0.8500000, 0.7368421, 0.8333333, 0.7786885, 0.8478261, 0.9117647, 0.9578947, 0.8771930, 0.8400000, 0.8698630, 0.8783784, 0.9571429, 0.9473684, 0.9701493, 0.9454545, 0.9000000, 0.9322034, 0.8461538, 0.9473684, 0.9661017, 0.9545455, 0.9729730, 0.9682540, 0.9687500, 0.9666667
## 2 1947.0000000, 1949.0000000, 1951.0000000, 1953.0000000, 1955.0000000, 1957.0000000, 1959.0000000, 1961.0000000, 1963.0000000, 1965.0000000, 1967.0000000, 1969.0000000, 1971.0000000, 1973.0000000, 1975.0000000, 1977.0000000, 1979.0000000, 1981.0000000, 1983.0000000, 1985.0000000, 1987.0000000, 1989.0000000, 1991.0000000, 1993.0000000, 1995.0000000, 1997.0000000, 1999.0000000, 2001.0000000, 2003.0000000, 2005.0000000, 2007.0000000, 2009.0000000, 2011.0000000, 2013.0000000, 38.0000000, 62.0000000, 24.0000000, 26.0000000, 37.0000000, 34.0000000, 54.0000000, 76.0000000, 32.0000000, 41.0000000, 57.0000000, 42.0000000, 124.0000000, 93.0000000, 65.0000000, 94.0000000, 121.0000000, 133.0000000, 144.0000000, 152.0000000, 145.0000000, 114.0000000, 73.0000000, 64.0000000, 80.0000000, 69.0000000, 68.0000000, 67.0000000, 76.0000000, 74.0000000, 77.0000000, 68.0000000, 65.0000000, 64.0000000, 0.5789474, 0.3709677, 0.4583333, 0.6153846, 0.6756757, 0.5588235, 0.6111111, 0.4736842, 0.8125000, 0.6341463, 0.5964912, 0.6428571, 0.5645161, 0.8494624, 0.8307692, 0.8829787, 0.8925620, 0.8421053, 0.8680556, 0.9144737, 0.9172414, 0.9298246, 0.6027397, 0.6406250, 0.5625000, 0.7681159, 0.7500000, 0.7611940, 0.7763158, 0.8648649, 0.8831169, 0.8970588, 0.9076923, 0.8906250
## 3 1947.0000000, 1949.0000000, 1951.0000000, 1953.0000000, 1955.0000000, 1957.0000000, 1959.0000000, 1961.0000000, 1963.0000000, 1965.0000000, 1967.0000000, 1969.0000000, 1971.0000000, 1973.0000000, 1975.0000000, 1977.0000000, 1979.0000000, 1981.0000000, 1983.0000000, 1985.0000000, 1987.0000000, 1989.0000000, 1991.0000000, 1993.0000000, 1995.0000000, 1997.0000000, 1999.0000000, 2001.0000000, 2003.0000000, 2005.0000000, 2007.0000000, 2009.0000000, 2011.0000000, 2013.0000000, 38.0000000, 64.0000000, 25.0000000, 26.0000000, 37.0000000, 34.0000000, 53.0000000, 76.0000000, 32.0000000, 41.0000000, 57.0000000, 43.0000000, 126.0000000, 94.0000000, 70.0000000, 98.0000000, 123.0000000, 134.0000000, 149.0000000, 151.0000000, 144.0000000, 114.0000000, 73.0000000, 64.0000000, 81.0000000, 69.0000000, 68.0000000, 66.0000000, 76.0000000, 74.0000000, 77.0000000, 69.0000000, 65.0000000, 64.0000000, 0.5526316, 0.3437500, 0.2800000, 0.1923077, 0.6216216, 0.5294118, 0.4716981, 0.4736842, 0.6562500, 0.4634146, 0.2807018, 0.3488372, 0.5634921, 0.7446809, 0.6714286, 0.6938776, 0.5609756, 0.4626866, 0.4899329, 0.5629139, 0.6111111, 0.6842105, 0.6164384, 0.6875000, 0.6543210, 0.7101449, 0.6617647, 0.5909091, 0.5263158, 0.5270270, 0.4805195, 0.5217391, 0.5538462, 0.4843750
## 4 1947.0000000, 1949.0000000, 1951.0000000, 1953.0000000, 1955.0000000, 1957.0000000, 1959.0000000, 1961.0000000, 1963.0000000, 1965.0000000, 1967.0000000, 1969.0000000, 1971.0000000, 1973.0000000, 1975.0000000, 1977.0000000, 1979.0000000, 1981.0000000, 1983.0000000, 1985.0000000, 1987.0000000, 1989.0000000, 1991.0000000, 1993.0000000, 1995.0000000, 1997.0000000, 1999.0000000, 2001.0000000, 2003.0000000, 2005.0000000, 2007.0000000, 2009.0000000, 2011.0000000, 2013.0000000, 38.0000000, 64.0000000, 25.0000000, 26.0000000, 37.0000000, 34.0000000, 54.0000000, 76.0000000, 32.0000000, 41.0000000, 57.0000000, 44.0000000, 126.0000000, 89.0000000, 68.0000000, 98.0000000, 123.0000000, 134.0000000, 149.0000000, 151.0000000, 144.0000000, 114.0000000, 57.0000000, 63.0000000, 81.0000000, 69.0000000, 66.0000000, 64.0000000, 75.0000000, 73.0000000, 76.0000000, 67.0000000, 62.0000000, 57.0000000, 0.5000000, 0.7812500, 0.5600000, 0.6538462, 0.7027027, 0.5882353, 0.7037037, 0.5657895, 0.5312500, 0.7317073, 0.8245614, 0.6136364, 0.6031746, 0.7078652, 0.7205882, 0.6938776, 0.6585366, 0.7686567, 0.7785235, 0.8211921, 0.9652778, 0.9824561, 0.7368421, 0.7301587, 0.7407407, 0.7101449, 0.8333333, 0.8281250, 0.8400000, 0.8082192, 0.8684211, 0.8507463, 0.8225806, 0.8070175
## 5 1947.0000000, 1949.0000000, 1951.0000000, 1953.0000000, 1955.0000000, 1957.0000000, 1959.0000000, 1961.0000000, 1963.0000000, 1965.0000000, 1967.0000000, 1969.0000000, 1971.0000000, 1973.0000000, 1975.0000000, 1977.0000000, 1979.0000000, 1981.0000000, 1983.0000000, 1985.0000000, 1987.0000000, 1989.0000000, 1991.0000000, 1993.0000000, 1995.0000000, 1997.0000000, 1999.0000000, 2001.0000000, 2003.0000000, 2005.0000000, 2007.0000000, 2009.0000000, 2011.0000000, 2013.0000000, 38.0000000, 63.0000000, 25.0000000, 26.0000000, 37.0000000, 34.0000000, 54.0000000, 75.0000000, 32.0000000, 41.0000000, 52.0000000, 44.0000000, 126.0000000, 92.0000000, 70.0000000, 98.0000000, 123.0000000, 134.0000000, 149.0000000, 152.0000000, 144.0000000, 114.0000000, 73.0000000, 64.0000000, 81.0000000, 69.0000000, 68.0000000, 67.0000000, 75.0000000, 74.0000000, 77.0000000, 69.0000000, 65.0000000, 63.0000000, 0.6052632, 0.3174603, 0.2800000, 0.2692308, 0.5945946, 0.4705882, 0.4259259, 0.4400000, 0.5937500, 0.4878049, 0.3846154, 0.4090909, 0.5158730, 0.4565217, 0.4285714, 0.5714286, 0.4471545, 0.4253731, 0.3892617, 0.3618421, 0.4583333, 0.4561404, 0.4931507, 0.5312500, 0.5308642, 0.6231884, 0.6323529, 0.6268657, 0.6000000, 0.6621622, 0.6233766, 0.5942029, 0.6000000, 0.5873016
## 6  1947.0000000, 1949.0000000, 1951.0000000, 1953.0000000, 1955.0000000, 1957.0000000, 1959.0000000, 1961.0000000, 1963.0000000, 1965.0000000, 1967.0000000, 1969.0000000, 1971.0000000, 1973.0000000, 1975.0000000, 1977.0000000, 1979.0000000, 1981.0000000, 1983.0000000, 1985.0000000, 1987.0000000, 1989.0000000, 1991.0000000, 1993.0000000, 1995.0000000, 1997.0000000, 1999.0000000, 2001.0000000, 2003.0000000, 2005.0000000, 2007.0000000, 2009.0000000, 2011.0000000, 2013.0000000, 37.0000000, 51.0000000, 25.0000000, 26.0000000, 37.0000000, 32.0000000, 52.0000000, 75.0000000, 28.0000000, 35.0000000, 57.0000000, 41.0000000, 72.0000000, 76.0000000, 63.0000000, 93.0000000, 111.0000000, 118.0000000, 144.0000000, 150.0000000, 146.0000000, 116.0000000, 74.0000000, 65.0000000, 79.0000000, 69.0000000, 62.0000000, 67.0000000, 75.0000000, 69.0000000, 60.0000000, 66.0000000, 65.0000000, 60.0000000, 0.5945946, 0.4509804, 0.7200000, 0.9230769, 0.7027027, 0.7500000, 0.5192308, 0.5333333, 0.8571429, 0.6000000, 0.5789474, 0.7073171, 0.7083333, 0.7105263, 0.7460317, 0.8817204, 0.9549550, 0.8728814, 0.9652778, 0.9733333, 0.9589041, 0.9827586, 0.9594595, 0.9076923, 0.9493671, 0.9565217, 0.9516129, 0.9402985, 0.9600000, 0.9710145, 0.9000000, 0.9393939, 0.8307692, 0.9166667
##                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        model
## 1                           -11.06308, 0.006009299, -0.2546669, -0.04119531, 0.09894296, 0.09615513, 0.04463549, -0.1677011, -0.09802032, -0.1158869, 0.04808137, 0.1048128, -0.02036372, 0.06410891, -0.002554492, 0.05456447, 0.1064845, 0.1405959, 0.04787558, -0.001336004, 0.01650841, 0.01300518, 0.07975106, 0.05795803, 0.06872026, 0.03200696, -0.02546618, -0.005281392, -0.1033495, -0.01415356, -0.007438879, -0.03101372, -0.0246048, -0.0413424, -0.05286496, -0.06696689, -4.87075, 0.6875331, 0.1368972, 0.1340537, 0.08247835, -0.1299139, -0.06028883, -0.07821106, 0.0857015, 0.1423772, 0.01714504, 0.101562, 0.0348429, 0.09190618, 0.1437705, 0.1778263, 0.08505024, 0.03578297, 0.05357171, 0.05001279, 0.116703, 0.09485427, 0.1055608, 0.06879184, 0.01126301, 0.03139212, -0.0667317, 0.02240859, 0.02906758, 0.005437062, 0.0117903, -0.005002985, -0.01658123, -0.03073885, 2, 0.6370198, 0.6490384, 0.661057, 0.6730756, 0.6850942, 0.6971128, 0.7091314, 0.72115, 0.7331686, 0.7451872, 0.7572058, 0.7692244, 0.781243, 0.7932616, 0.8052802, 0.8172988, 0.8293174, 0.841336, 0.8533546, 0.8653732, 0.8773918, 0.8894104, 0.901429, 0.9134476, 0.9254662, 0.9374848, 0.9495034, 0.961522, 0.9735406, 0.9855592, 0.9975778, 1.009596, 1.021615, 1.033634, 0, 1, -5.830952, 0.1714986, 0.1714986, 0.1714986, 0.1714986, 0.1714986, 0.1714986, 0.1714986, 0.1714986, 0.1714986, 0.1714986, 0.1714986, 0.1714986, 0.1714986, 0.1714986, 0.1714986, 0.1714986, 0.1714986, 0.1714986, 0.1714986, 0.1714986, 0.1714986, 0.1714986, 0.1714986, 0.1714986, 0.1714986, 0.1714986, 0.1714986, 0.1714986, 0.1714986, 0.1714986, 0.1714986, 0.1714986, 0.1714986, -11545.28, 114.4115, 0.2112466, 0.1937658, 0.1762851, 0.1588043, 0.1413236, 0.1238428, 0.1063621, 0.08888132, 0.07140056, 0.05391981, 0.03643905, 0.0189583, 0.001477544, -0.01600321, -0.03348396, -0.05096472, -0.06844547, -0.08592623, -0.103407, -0.1208877, -0.1383685, -0.1558492, -0.17333, -0.1908108, -0.2082915, -0.2257723, -0.243253, -0.2607338, -0.2782145, -0.2956953, -0.313176, -0.3306568, 1.171499, 1.228727, 1, 2, 1e-07, 2, 32, lm(formula = percent_yes ~ year, data = .), percent_yes ~ year, 0.3823529, 0.6078431, 0.76, 0.7692308, 0.7297297, 0.5294118, 0.6111111, 0.6052632, 0.78125, 0.85, 0.7368421, 0.8333333, 0.7786885, 0.8478261, 0.9117647, 0.9578947, 0.877193, 0.84, 0.869863, 0.8783784, 0.9571429, 0.9473684, 0.9701493, 0.9454545, 0.9, 0.9322034, 0.8461538, 0.9473684, 0.9661017, 0.9545455, 0.972973, 0.968254, 0.96875, 0.9666667, 1947, 1949, 1951, 1953, 1955, 1957, 1959, 1961, 1963, 1965, 1967, 1969, 1971, 1973, 1975, 1977, 1979, 1981, 1983, 1985, 1987, 1989, 1991, 1993, 1995, 1997, 1999, 2001, 2003, 2005, 2007, 2009, 2011, 2013
## 2                -9.464513, 0.005148829, 0.01868934, -0.1995879, -0.12252, 0.02423361, 0.07422701, -0.0529228, -0.01093287, -0.1586574, 0.1698607, -0.01879062, -0.06674339, -0.03067513, -0.1193138, 0.1553348, 0.126344, 0.1682558, 0.1675414, 0.106787, 0.1224397, 0.1585601, 0.1510302, 0.1533157, -0.1840668, -0.1564792, -0.2449018, -0.04958355, -0.07799715, -0.07710078, -0.07227668, 0.005974735, 0.01392909, 0.01757338, 0.0179092, -0.009455764, -4.257583, 0.5890855, -0.09047184, 0.05340338, 0.1005184, -0.02950983, 0.009601683, -0.1410013, 0.1846384, -0.006891277, -0.05772245, -0.0245326, -0.1160497, 0.1557205, 0.1238513, 0.1628847, 0.1592919, 0.09565914, 0.1084334, 0.1416754, 0.1312671, 0.1306742, -0.2095867, -0.1848775, -0.2761786, -0.08373869, -0.1150307, -0.1170127, -0.115067, -0.03969402, -0.03461807, -0.03385219, -0.03639477, -0.06663814, 2, 0.560258, 0.5705557, 0.5808533, 0.591151, 0.6014487, 0.6117463, 0.622044, 0.6323416, 0.6426393, 0.652937, 0.6632346, 0.6735323, 0.6838299, 0.6941276, 0.7044253, 0.7147229, 0.7250206, 0.7353182, 0.7456159, 0.7559135, 0.7662112, 0.7765089, 0.7868065, 0.7971042, 0.8074018, 0.8176995, 0.8279972, 0.8382948, 0.8485925, 0.8588901, 0.8691878, 0.8794854, 0.8897831, 0.9000808, 0, 1, -5.830952, 0.1714986, 0.1714986, 0.1714986, 0.1714986, 0.1714986, 0.1714986, 0.1714986, 0.1714986, 0.1714986, 0.1714986, 0.1714986, 0.1714986, 0.1714986, 0.1714986, 0.1714986, 0.1714986, 0.1714986, 0.1714986, 0.1714986, 0.1714986, 0.1714986, 0.1714986, 0.1714986, 0.1714986, 0.1714986, 0.1714986, 0.1714986, 0.1714986, 0.1714986, 0.1714986, 0.1714986, 0.1714986, 0.1714986, -11545.28, 114.4115, 0.2112466, 0.1937658, 0.1762851, 0.1588043, 0.1413236, 0.1238428, 0.1063621, 0.08888132, 0.07140056, 0.05391981, 0.03643905, 0.0189583, 0.001477544, -0.01600321, -0.03348396, -0.05096472, -0.06844547, -0.08592623, -0.103407, -0.1208877, -0.1383685, -0.1558492, -0.17333, -0.1908108, -0.2082915, -0.2257723, -0.243253, -0.2607338, -0.2782145, -0.2956953, -0.313176, -0.3306568, 1.171499, 1.228727, 1, 2, 1e-07, 2, 32, lm(formula = percent_yes ~ year, data = .), percent_yes ~ year, 0.5789474, 0.3709677, 0.4583333, 0.6153846, 0.6756757, 0.5588235, 0.6111111, 0.4736842, 0.8125, 0.6341463, 0.5964912, 0.6428571, 0.5645161, 0.8494624, 0.8307692, 0.8829787, 0.892562, 0.8421053, 0.8680556, 0.9144737, 0.9172414, 0.9298246, 0.6027397, 0.640625, 0.5625, 0.7681159, 0.75, 0.761194, 0.7763158, 0.8648649, 0.8831169, 0.8970588, 0.9076923, 0.890625, 1947, 1949, 1951, 1953, 1955, 1957, 1959, 1961, 1963, 1965, 1967, 1969, 1971, 1973, 1975, 1977, 1979, 1981, 1983, 1985, 1987, 1989, 1991, 1993, 1995, 1997, 1999, 2001, 2003, 2005, 2007, 2009, 2011, 2013
## 3           -4.545493, 0.002567161, 0.09986204, -0.1141539, -0.1830382, -0.2758648, 0.1483148, 0.05097061, -0.01187736, -0.01502558, 0.1624059, -0.0355638, -0.223411, -0.1604099, 0.04911066, 0.2251651, 0.1467785, 0.1640932, 0.02605692, -0.07736644, -0.05525445, 0.01259225, 0.05565514, 0.1236202, 0.05071374, 0.1166411, 0.07832773, 0.1290173, 0.0755028, -0.0004871351, -0.07021476, -0.07463784, -0.1262797, -0.09019438, -0.06322168, -0.1378272, -3.134054, 0.2937128, -0.1755182, -0.2701768, 0.1521707, 0.05299455, -0.01168544, -0.01666568, 0.1589338, -0.04086793, -0.2305471, -0.169378, 0.03831049, 0.2125329, 0.1323143, 0.147797, 0.007928688, -0.09732669, -0.07704671, -0.01103203, 0.03019884, 0.09633192, 0.02159341, 0.08568872, 0.04554337, 0.09440097, 0.03905441, -0.03876754, -0.1103272, -0.1165823, -0.1700562, -0.1358028, -0.1106622, -0.1870997, 2, 0.4527695, 0.4579039, 0.4630382, 0.4681725, 0.4733068, 0.4784412, 0.4835755, 0.4887098, 0.4938441, 0.4989784, 0.5041128, 0.5092471, 0.5143814, 0.5195157, 0.52465, 0.5297844, 0.5349187, 0.540053, 0.5451873, 0.5503217, 0.555456, 0.5605903, 0.5657246, 0.5708589, 0.5759933, 0.5811276, 0.5862619, 0.5913962, 0.5965305, 0.6016649, 0.6067992, 0.6119335, 0.6170678, 0.6222022, 0, 1, -5.830952, 0.1714986, 0.1714986, 0.1714986, 0.1714986, 0.1714986, 0.1714986, 0.1714986, 0.1714986, 0.1714986, 0.1714986, 0.1714986, 0.1714986, 0.1714986, 0.1714986, 0.1714986, 0.1714986, 0.1714986, 0.1714986, 0.1714986, 0.1714986, 0.1714986, 0.1714986, 0.1714986, 0.1714986, 0.1714986, 0.1714986, 0.1714986, 0.1714986, 0.1714986, 0.1714986, 0.1714986, 0.1714986, 0.1714986, -11545.28, 114.4115, 0.2112466, 0.1937658, 0.1762851, 0.1588043, 0.1413236, 0.1238428, 0.1063621, 0.08888132, 0.07140056, 0.05391981, 0.03643905, 0.0189583, 0.001477544, -0.01600321, -0.03348396, -0.05096472, -0.06844547, -0.08592623, -0.103407, -0.1208877, -0.1383685, -0.1558492, -0.17333, -0.1908108, -0.2082915, -0.2257723, -0.243253, -0.2607338, -0.2782145, -0.2956953, -0.313176, -0.3306568, 1.171499, 1.228727, 1, 2, 1e-07, 2, 32, lm(formula = percent_yes ~ year, data = .), percent_yes ~ year, 0.5526316, 0.34375, 0.28, 0.1923077, 0.6216216, 0.5294118, 0.4716981, 0.4736842, 0.65625, 0.4634146, 0.2807018, 0.3488372, 0.5634921, 0.7446809, 0.6714286, 0.6938776, 0.5609756, 0.4626866, 0.4899329, 0.5629139, 0.6111111, 0.6842105, 0.6164384, 0.6875, 0.654321, 0.7101449, 0.6617647, 0.5909091, 0.5263158, 0.527027, 0.4805195, 0.5217391, 0.5538462, 0.484375, 1947, 1949, 1951, 1953, 1955, 1957, 1959, 1961, 1963, 1965, 1967, 1969, 1971, 1973, 1975, 1977, 1979, 1981, 1983, 1985, 1987, 1989, 1991, 1993, 1995, 1997, 1999, 2001, 2003, 2005, 2007, 2009, 2011, 2013
## 4 -7.000693, 0.003907557, -0.1073201, 0.1661148, -0.06295028, 0.02308076, 0.0641222, -0.05816032, 0.04949297, -0.09623637, -0.138591, 0.05405125, 0.1390902, -0.07964993, -0.09792681, -0.001051354, 0.003856599, -0.0306692, -0.07382528, 0.02847974, 0.0305314, 0.06538485, 0.2016555, 0.2110187, -0.04241044, -0.05690893, -0.05414203, -0.09255295, 0.02282034, 0.009796891, 0.01385678, -0.02573916, 0.0266476, 0.001157707, -0.03482303, -0.05820124, -4.293152, 0.4470696, -0.07849946, 0.01011836, 0.05374658, -0.06594916, 0.04429092, -0.09885164, -0.1386194, 0.05660954, 0.1442353, -0.07191808, -0.08760817, 0.01185407, 0.0193488, -0.01259021, -0.05315951, 0.05173229, 0.05637073, 0.09381097, 0.2326684, 0.2446184, -0.006223976, -0.01813568, -0.012782, -0.04860615, 0.06935393, 0.05891726, 0.06556393, 0.02855478, 0.08352832, 0.06062521, 0.02723125, 0.006439822, 2, 0.6073201, 0.6151352, 0.6229503, 0.6307654, 0.6385805, 0.6463956, 0.6542107, 0.6620258, 0.669841, 0.6776561, 0.6854712, 0.6932863, 0.7011014, 0.7089165, 0.7167316, 0.7245467, 0.7323619, 0.740177, 0.7479921, 0.7558072, 0.7636223, 0.7714374, 0.7792525, 0.7870677, 0.7948828, 0.8026979, 0.810513, 0.8183281, 0.8261432, 0.8339583, 0.8417734, 0.8495886, 0.8574037, 0.8652188, 0, 1, -5.830952, 0.1714986, 0.1714986, 0.1714986, 0.1714986, 0.1714986, 0.1714986, 0.1714986, 0.1714986, 0.1714986, 0.1714986, 0.1714986, 0.1714986, 0.1714986, 0.1714986, 0.1714986, 0.1714986, 0.1714986, 0.1714986, 0.1714986, 0.1714986, 0.1714986, 0.1714986, 0.1714986, 0.1714986, 0.1714986, 0.1714986, 0.1714986, 0.1714986, 0.1714986, 0.1714986, 0.1714986, 0.1714986, 0.1714986, -11545.28, 114.4115, 0.2112466, 0.1937658, 0.1762851, 0.1588043, 0.1413236, 0.1238428, 0.1063621, 0.08888132, 0.07140056, 0.05391981, 0.03643905, 0.0189583, 0.001477544, -0.01600321, -0.03348396, -0.05096472, -0.06844547, -0.08592623, -0.103407, -0.1208877, -0.1383685, -0.1558492, -0.17333, -0.1908108, -0.2082915, -0.2257723, -0.243253, -0.2607338, -0.2782145, -0.2956953, -0.313176, -0.3306568, 1.171499, 1.228727, 1, 2, 1e-07, 2, 32, lm(formula = percent_yes ~ year, data = .), percent_yes ~ year, 0.5, 0.78125, 0.56, 0.6538462, 0.7027027, 0.5882353, 0.7037037, 0.5657895, 0.53125, 0.7317073, 0.8245614, 0.6136364, 0.6031746, 0.7078652, 0.7205882, 0.6938776, 0.6585366, 0.7686567, 0.7785235, 0.8211921, 0.9652778, 0.9824561, 0.7368421, 0.7301587, 0.7407407, 0.7101449, 0.8333333, 0.828125, 0.84, 0.8082192, 0.8684211, 0.8507463, 0.8225806, 0.8070175, 1947, 1949, 1951, 1953, 1955, 1957, 1959, 1961, 1963, 1965, 1967, 1969, 1971, 1973, 1975, 1977, 1979, 1981, 1983, 1985, 1987, 1989, 1991, 1993, 1995, 1997, 1999, 2001, 2003, 2005, 2007, 2009, 2011, 2013
## 5      -5.845534, 0.003203234, 0.2141011, -0.08010824, -0.123975, -0.1411507, 0.1778066, 0.04739381, -0.003674967, 0.00399264, 0.1513362, 0.03898458, -0.07061138, -0.05254232, 0.04783332, -0.01792443, -0.0522812, 0.08416947, -0.0465111, -0.0746989, -0.1172168, -0.1510429, -0.0609581, -0.06955755, -0.03895369, -0.00726084, -0.01405311, 0.07186463, 0.0746227, 0.06272896, 0.02945682, 0.08521252, 0.04002051, 0.004440319, 0.003830953, -0.01527393, -2.897218, 0.3664869, -0.1361568, -0.1549181, 0.1624537, 0.03045528, -0.02219908, -0.01611705, 0.1296409, 0.01570373, -0.09547782, -0.07899434, 0.01979572, -0.04754761, -0.08348997, 0.05137512, -0.08089103, -0.1106644, -0.1547679, -0.1901795, -0.1016804, -0.1118654, -0.08284711, -0.05273985, -0.0611177, 0.02321446, 0.02438695, 0.01090763, -0.02395009, 0.03022002, -0.01655757, -0.05372334, -0.05591829, -0.07660875, 2, 0.3911621, 0.3975686, 0.403975, 0.4103815, 0.416788, 0.4231944, 0.4296009, 0.4360074, 0.4424138, 0.4488203, 0.4552268, 0.4616332, 0.4680397, 0.4744462, 0.4808526, 0.4872591, 0.4936656, 0.500072, 0.5064785, 0.512885, 0.5192914, 0.5256979, 0.5321044, 0.5385108, 0.5449173, 0.5513238, 0.5577302, 0.5641367, 0.5705432, 0.5769496, 0.5833561, 0.5897626, 0.596169, 0.6025755, 0, 1, -5.830952, 0.1714986, 0.1714986, 0.1714986, 0.1714986, 0.1714986, 0.1714986, 0.1714986, 0.1714986, 0.1714986, 0.1714986, 0.1714986, 0.1714986, 0.1714986, 0.1714986, 0.1714986, 0.1714986, 0.1714986, 0.1714986, 0.1714986, 0.1714986, 0.1714986, 0.1714986, 0.1714986, 0.1714986, 0.1714986, 0.1714986, 0.1714986, 0.1714986, 0.1714986, 0.1714986, 0.1714986, 0.1714986, 0.1714986, -11545.28, 114.4115, 0.2112466, 0.1937658, 0.1762851, 0.1588043, 0.1413236, 0.1238428, 0.1063621, 0.08888132, 0.07140056, 0.05391981, 0.03643905, 0.0189583, 0.001477544, -0.01600321, -0.03348396, -0.05096472, -0.06844547, -0.08592623, -0.103407, -0.1208877, -0.1383685, -0.1558492, -0.17333, -0.1908108, -0.2082915, -0.2257723, -0.243253, -0.2607338, -0.2782145, -0.2956953, -0.313176, -0.3306568, 1.171499, 1.228727, 1, 2, 1e-07, 2, 32, lm(formula = percent_yes ~ year, data = .), percent_yes ~ year, 0.6052632, 0.3174603, 0.28, 0.2692308, 0.5945946, 0.4705882, 0.4259259, 0.44, 0.59375, 0.4878049, 0.3846154, 0.4090909, 0.515873, 0.4565217, 0.4285714, 0.5714286, 0.4471545, 0.4253731, 0.3892617, 0.3618421, 0.4583333, 0.4561404, 0.4931507, 0.53125, 0.5308642, 0.6231884, 0.6323529, 0.6268657, 0.6, 0.6621622, 0.6233766, 0.5942029, 0.6, 0.5873016, 1947, 1949, 1951, 1953, 1955, 1957, 1959, 1961, 1963, 1965, 1967, 1969, 1971, 1973, 1975, 1977, 1979, 1981, 1983, 1985, 1987, 1989, 1991, 1993, 1995, 1997, 1999, 2001, 2003, 2005, 2007, 2009, 2011, 2013
## 6                                -10.66982, 0.005802864, -0.03375927, -0.1889792, 0.06843468, 0.2599059, 0.02792593, 0.0636175, -0.1787575, -0.1762606, 0.1359432, -0.1328054, -0.1654638, -0.04869979, -0.05928926, -0.068702, -0.0448023, 0.07928066, 0.1409095, 0.04723013, 0.1280208, 0.1244707, 0.0984357, 0.1106845, 0.0757796, 0.01240672, 0.04247577, 0.03802469, 0.02151013, -0.001409992, 0.006685774, 0.006094539, -0.07652568, -0.04873747, -0.1689679, -0.0946762, -4.780496, 0.6639146, 0.105017, 0.29387, 0.05927177, 0.0923451, -0.1526481, -0.1527695, 0.156816, -0.1145508, -0.1498274, -0.03568165, -0.04888936, -0.06092035, -0.03963889, 0.08182582, 0.1408364, 0.04453881, 0.1227113, 0.1165428, 0.08788965, 0.09752019, 0.05999706, -0.005994065, 0.02145675, 0.01438742, -0.004745382, -0.03028375, -0.02480623, -0.0280157, -0.1132542, -0.0880842, -0.2109329, -0.1392594, 2, 0.6283539, 0.6399596, 0.6515653, 0.663171, 0.6747768, 0.6863825, 0.6979882, 0.709594, 0.7211997, 0.7328054, 0.7444111, 0.7560169, 0.7676226, 0.7792283, 0.790834, 0.8024398, 0.8140455, 0.8256512, 0.837257, 0.8488627, 0.8604684, 0.8720741, 0.8836799, 0.8952856, 0.9068913, 0.918497, 0.9301028, 0.9417085, 0.9533142, 0.96492, 0.9765257, 0.9881314, 0.9997371, 1.011343, 0, 1, -5.830952, 0.1714986, 0.1714986, 0.1714986, 0.1714986, 0.1714986, 0.1714986, 0.1714986, 0.1714986, 0.1714986, 0.1714986, 0.1714986, 0.1714986, 0.1714986, 0.1714986, 0.1714986, 0.1714986, 0.1714986, 0.1714986, 0.1714986, 0.1714986, 0.1714986, 0.1714986, 0.1714986, 0.1714986, 0.1714986, 0.1714986, 0.1714986, 0.1714986, 0.1714986, 0.1714986, 0.1714986, 0.1714986, 0.1714986, -11545.28, 114.4115, 0.2112466, 0.1937658, 0.1762851, 0.1588043, 0.1413236, 0.1238428, 0.1063621, 0.08888132, 0.07140056, 0.05391981, 0.03643905, 0.0189583, 0.001477544, -0.01600321, -0.03348396, -0.05096472, -0.06844547, -0.08592623, -0.103407, -0.1208877, -0.1383685, -0.1558492, -0.17333, -0.1908108, -0.2082915, -0.2257723, -0.243253, -0.2607338, -0.2782145, -0.2956953, -0.313176, -0.3306568, 1.171499, 1.228727, 1, 2, 1e-07, 2, 32, lm(formula = percent_yes ~ year, data = .), percent_yes ~ year, 0.5945946, 0.4509804, 0.72, 0.9230769, 0.7027027, 0.75, 0.5192308, 0.5333333, 0.8571429, 0.6, 0.5789474, 0.7073171, 0.7083333, 0.7105263, 0.7460317, 0.8817204, 0.954955, 0.8728814, 0.9652778, 0.9733333, 0.9589041, 0.9827586, 0.9594595, 0.9076923, 0.9493671, 0.9565217, 0.9516129, 0.9402985, 0.96, 0.9710145, 0.9, 0.9393939, 0.8307692, 0.9166667, 1947, 1949, 1951, 1953, 1955, 1957, 1959, 1961, 1963, 1965, 1967, 1969, 1971, 1973, 1975, 1977, 1979, 1981, 1983, 1985, 1987, 1989, 1991, 1993, 1995, 1997, 1999, 2001, 2003, 2005, 2007, 2009, 2011, 2013
##   term    estimate    std.error statistic      p.value   p.adjusted
## 1 year 0.006009299 0.0007426499  8.091698 3.064797e-09 3.064797e-09
## 2 year 0.005148829 0.0010610076  4.852773 3.047078e-05 3.047078e-05
## 3 year 0.002567161 0.0010847910  2.366503 2.417617e-02 2.417617e-02
## 4 year 0.003907557 0.0007587624  5.149908 1.284924e-05 1.284924e-05
## 5 year 0.003203234 0.0007652852  4.185673 2.072981e-04 2.072981e-04
## 6 year 0.005802864 0.0009657515  6.008651 1.058595e-06 1.058595e-06</code></pre>
<div class="sourceCode" id="cb73"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb73-1" title="1">slope_terms <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb73-2" title="2"><span class="st">  </span><span class="kw">mutate</span>(<span class="dt">p.adjusted =</span> <span class="kw">p.adjust</span>(p.value)) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb73-3" title="3"><span class="st">  </span><span class="kw">filter</span>(p.adjusted <span class="op">&lt;</span><span class="st"> </span><span class="fl">0.05</span>)</a></code></pre></div>
<pre><code>## # A tibble: 123 x 9
## # Groups:   country [123]
##    country data  model term  estimate std.error statistic p.value
##    &lt;chr&gt;   &lt;lis&gt; &lt;lis&gt; &lt;chr&gt;    &lt;dbl&gt;     &lt;dbl&gt;     &lt;dbl&gt;   &lt;dbl&gt;
##  1 Afghan~ &lt;tib~ &lt;lm&gt;  year   0.00601  0.000743      8.09 3.06e-9
##  2 Argent~ &lt;tib~ &lt;lm&gt;  year   0.00515  0.00106       4.85 3.05e-5
##  3 Austra~ &lt;tib~ &lt;lm&gt;  year   0.00257  0.00108       2.37 2.42e-2
##  4 Belarus &lt;tib~ &lt;lm&gt;  year   0.00391  0.000759      5.15 1.28e-5
##  5 Belgium &lt;tib~ &lt;lm&gt;  year   0.00320  0.000765      4.19 2.07e-4
##  6 Bolivia &lt;tib~ &lt;lm&gt;  year   0.00580  0.000966      6.01 1.06e-6
##  7 Brazil  &lt;tib~ &lt;lm&gt;  year   0.00611  0.000817      7.48 1.64e-8
##  8 Chile   &lt;tib~ &lt;lm&gt;  year   0.00678  0.000822      8.24 2.05e-9
##  9 Colomb~ &lt;tib~ &lt;lm&gt;  year   0.00616  0.000965      6.38 3.58e-7
## 10 Costa ~ &lt;tib~ &lt;lm&gt;  year   0.00654  0.000812      8.05 3.39e-9
## # ... with 113 more rows, and 1 more variable: p.adjusted &lt;dbl&gt;</code></pre>
</div>
<div class="slide section level1">

<h2 id="example-3.12">Example 3.12:</h2>
<h3 id="sorting-by-slope">Sorting by slope</h3>
<p>Now that you’ve filtered for countries where the trend is probably not due to chance, you may be interested in countries whose percentage of “yes” votes is changing most quickly over time. Thus, you want to find the countries with the highest and lowest slopes; that is, the <code>estimate</code> column.</p>
<h3 id="instructions-27">Instructions</h3>
<ul>
<li>Using <code>arrange()</code> and <code>desc()</code>, sort the filtered countries to find the countries whose percentage “yes” is most quickly increasing over time. Using <code>arrange()</code>, sort to find the countries whose percentage “yes” is most quickly decreasing.</li>
</ul>
<div class="sourceCode" id="cb75"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb75-1" title="1"><span class="co"># Filter by adjusted p-values</span></a>
<a class="sourceLine" id="cb75-2" title="2">filtered_countries &lt;-<span class="st"> </span>country_coefficients <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb75-3" title="3"><span class="st">  </span><span class="kw">filter</span>(term <span class="op">==</span><span class="st"> &quot;year&quot;</span>) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb75-4" title="4"><span class="st">  </span><span class="kw">mutate</span>(<span class="dt">p.adjusted =</span> <span class="kw">p.adjust</span>(p.value)) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb75-5" title="5"><span class="st">  </span><span class="kw">filter</span>(p.adjusted <span class="op">&lt;</span><span class="st"> </span><span class="fl">.05</span>)</a>
<a class="sourceLine" id="cb75-6" title="6"></a>
<a class="sourceLine" id="cb75-7" title="7"><span class="co"># Sort for the countries increasing most quickly</span></a>
<a class="sourceLine" id="cb75-8" title="8">filtered_countries <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb75-9" title="9"><span class="st">  </span><span class="kw">arrange</span>(<span class="kw">desc</span>(estimate))</a></code></pre></div>
<pre><code>## # A tibble: 123 x 9
## # Groups:   country [123]
##    country data  model term  estimate std.error statistic p.value
##    &lt;chr&gt;   &lt;lis&gt; &lt;lis&gt; &lt;chr&gt;    &lt;dbl&gt;     &lt;dbl&gt;     &lt;dbl&gt;   &lt;dbl&gt;
##  1 Tuvalu  &lt;tib~ &lt;lm&gt;  year   0.0409   0.00992       4.12 9.17e-3
##  2 Uzbeki~ &lt;tib~ &lt;lm&gt;  year   0.0206   0.00645       3.19 1.53e-2
##  3 German~ &lt;tib~ &lt;lm&gt;  year   0.0197   0.00337       5.84 6.36e-4
##  4 Eritrea &lt;tib~ &lt;lm&gt;  year   0.0166   0.00665       2.49 3.42e-2
##  5 Tajiki~ &lt;tib~ &lt;lm&gt;  year   0.0127   0.00289       4.39 2.31e-3
##  6 South ~ &lt;tib~ &lt;lm&gt;  year   0.0119   0.00140       8.47 1.60e-8
##  7 Kazakh~ &lt;tib~ &lt;lm&gt;  year   0.0110   0.00195       5.62 3.24e-4
##  8 Yemen ~ &lt;tib~ &lt;lm&gt;  year   0.0109   0.00159       6.84 1.20e-6
##  9 Kyrgyz~ &lt;tib~ &lt;lm&gt;  year   0.00973  0.000988      9.84 2.38e-5
## 10 Malawi  &lt;tib~ &lt;lm&gt;  year   0.00908  0.00181       5.02 4.48e-5
## # ... with 113 more rows, and 1 more variable: p.adjusted &lt;dbl&gt;</code></pre>
<div class="sourceCode" id="cb77"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb77-1" title="1"><span class="co"># Sort for the countries decreasing most quickly</span></a>
<a class="sourceLine" id="cb77-2" title="2">filtered_countries <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb77-3" title="3"><span class="st">  </span><span class="kw">arrange</span>(estimate)</a></code></pre></div>
<pre><code>## # A tibble: 123 x 9
## # Groups:   country [123]
##    country data  model term  estimate std.error statistic p.value
##    &lt;chr&gt;   &lt;lis&gt; &lt;lis&gt; &lt;chr&gt;    &lt;dbl&gt;     &lt;dbl&gt;     &lt;dbl&gt;   &lt;dbl&gt;
##  1 Micron~ &lt;tib~ &lt;lm&gt;  year  -0.0176   0.00592      -2.98 1.38e-2
##  2 Tonga   &lt;tib~ &lt;lm&gt;  year  -0.0152   0.00549      -2.77 3.22e-2
##  3 Bosnia~ &lt;tib~ &lt;lm&gt;  year  -0.0150   0.00423      -3.54 6.35e-3
##  4 Vanuatu &lt;tib~ &lt;lm&gt;  year  -0.0132   0.00310      -4.26 8.00e-4
##  5 Marsha~ &lt;tib~ &lt;lm&gt;  year  -0.0126   0.00561      -2.24 4.92e-2
##  6 South ~ &lt;tib~ &lt;lm&gt;  year  -0.00921  0.00155      -5.96 1.39e-4
##  7 Israel  &lt;tib~ &lt;lm&gt;  year  -0.00685  0.00117      -5.85 1.89e-6
##  8 United~ &lt;tib~ &lt;lm&gt;  year  -0.00624  0.000928     -6.72 1.37e-7
##  9 Yemen   &lt;tib~ &lt;lm&gt;  year  -0.00425  0.000951     -4.47 1.19e-3
## 10 Cyprus  &lt;tib~ &lt;lm&gt;  year  -0.00354  0.00152      -2.33 2.79e-2
## # ... with 113 more rows, and 1 more variable: p.adjusted &lt;dbl&gt;</code></pre>
</div>
<div id="joining-and-tidying" class="slide section level1">
<h1>Joining and tidying</h1>
<p>In this chapter, you’ll learn to combine multiple related datasets, such as incorporating information about each resolution’s topic into your vote analysis. You’ll also learn how to turn untidy data into tidy data, and see how tidy data can guide your exploration of topics and countries over time.</p>
</div>
<div class="slide section level1">

<h2 id="example-4.1">Example 4.1:</h2>
<h3 id="joining-datasets-with-inner_join">Joining datasets with inner_join</h3>
<p>In the first chapter, you created the <code>votes_processed</code> dataset, containing information about each country’s votes. You’ll now combine that with the new <code>descriptions</code> dataset, which includes topic information about each country, so that you can analyze votes within particular topics.</p>
<p>To do this, you’ll make use of the <code>inner_join()</code> function from <code>dplyr</code>.</p>
<h3 id="instructions-28">Instructions</h3>
<ul>
<li>Load the <code>dplyr</code> package.</li>
<li>Print the <code>votes_processed</code> dataset.</li>
<li>Print the new <code>descriptions</code> dataset.</li>
<li>Join the two datasets using dplyr’s <code>inner_join()</code>, using the <code>rcid</code> and <code>session</code> columns to match them. Save as <code>votes_joined</code>.</li>
</ul>
<div class="sourceCode" id="cb79"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb79-1" title="1"><span class="co"># Load dplyr package</span></a>
<a class="sourceLine" id="cb79-2" title="2"><span class="kw">library</span>(dplyr)</a>
<a class="sourceLine" id="cb79-3" title="3"></a>
<a class="sourceLine" id="cb79-4" title="4"><span class="co"># Print the votes_processed dataset</span></a>
<a class="sourceLine" id="cb79-5" title="5">votes_processed</a></code></pre></div>
<pre><code>## # A tibble: 353,547 x 6
##     rcid session  vote ccode  year country           
##    &lt;dbl&gt;   &lt;dbl&gt; &lt;dbl&gt; &lt;int&gt; &lt;dbl&gt; &lt;chr&gt;             
##  1    46       2     1     2  1947 United States     
##  2    46       2     1    20  1947 Canada            
##  3    46       2     1    40  1947 Cuba              
##  4    46       2     1    41  1947 Haiti             
##  5    46       2     1    42  1947 Dominican Republic
##  6    46       2     1    70  1947 Mexico            
##  7    46       2     1    90  1947 Guatemala         
##  8    46       2     1    91  1947 Honduras          
##  9    46       2     1    92  1947 El Salvador       
## 10    46       2     1    93  1947 Nicaragua         
## # ... with 353,537 more rows</code></pre>
<div class="sourceCode" id="cb81"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb81-1" title="1"><span class="co"># Print the descriptions dataset</span></a>
<a class="sourceLine" id="cb81-2" title="2">descriptions</a></code></pre></div>
<pre><code>## # A tibble: 2,589 x 10
##     rcid session date                unres    me    nu    di    hr    co
##    &lt;dbl&gt;   &lt;dbl&gt; &lt;dttm&gt;              &lt;chr&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;
##  1    46       2 1947-09-04 00:00:00 R/2/~     0     0     0     0     0
##  2    47       2 1947-10-05 00:00:00 R/2/~     0     0     0     1     0
##  3    48       2 1947-10-06 00:00:00 R/2/~     0     0     0     0     0
##  4    49       2 1947-10-06 00:00:00 R/2/~     0     0     0     0     0
##  5    50       2 1947-10-06 00:00:00 R/2/~     0     0     0     0     0
##  6    51       2 1947-10-02 00:00:00 R/2/~     0     0     0     0     1
##  7    52       2 1947-11-06 00:00:00 R/2/~     0     0     0     0     1
##  8    53       2 1947-11-06 00:00:00 R/2/~     0     0     0     0     1
##  9    54       2 1947-11-06 00:00:00 R/2/~     0     0     0     0     1
## 10    55       2 1947-11-06 00:00:00 R/2/~     0     0     0     0     1
## # ... with 2,579 more rows, and 1 more variable: ec &lt;dbl&gt;</code></pre>
<div class="sourceCode" id="cb83"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb83-1" title="1"><span class="co"># Join them together based on the &quot;rcid&quot; and &quot;session&quot; columns</span></a>
<a class="sourceLine" id="cb83-2" title="2">votes_joined &lt;-<span class="st"> </span><span class="kw">inner_join</span>(votes_processed, descriptions, <span class="dt">by =</span> <span class="kw">c</span>(<span class="st">&quot;rcid&quot;</span>, <span class="st">&quot;session&quot;</span>))</a>
<a class="sourceLine" id="cb83-3" title="3"></a>
<a class="sourceLine" id="cb83-4" title="4">votes_joined </a></code></pre></div>
<pre><code>## # A tibble: 353,547 x 14
##     rcid session  vote ccode  year country date                unres    me
##    &lt;dbl&gt;   &lt;dbl&gt; &lt;dbl&gt; &lt;int&gt; &lt;dbl&gt; &lt;chr&gt;   &lt;dttm&gt;              &lt;chr&gt; &lt;dbl&gt;
##  1    46       2     1     2  1947 United~ 1947-09-04 00:00:00 R/2/~     0
##  2    46       2     1    20  1947 Canada  1947-09-04 00:00:00 R/2/~     0
##  3    46       2     1    40  1947 Cuba    1947-09-04 00:00:00 R/2/~     0
##  4    46       2     1    41  1947 Haiti   1947-09-04 00:00:00 R/2/~     0
##  5    46       2     1    42  1947 Domini~ 1947-09-04 00:00:00 R/2/~     0
##  6    46       2     1    70  1947 Mexico  1947-09-04 00:00:00 R/2/~     0
##  7    46       2     1    90  1947 Guatem~ 1947-09-04 00:00:00 R/2/~     0
##  8    46       2     1    91  1947 Hondur~ 1947-09-04 00:00:00 R/2/~     0
##  9    46       2     1    92  1947 El Sal~ 1947-09-04 00:00:00 R/2/~     0
## 10    46       2     1    93  1947 Nicara~ 1947-09-04 00:00:00 R/2/~     0
## # ... with 353,537 more rows, and 5 more variables: nu &lt;dbl&gt;, di &lt;dbl&gt;,
## #   hr &lt;dbl&gt;, co &lt;dbl&gt;, ec &lt;dbl&gt;</code></pre>
</div>
<div class="slide section level1">

<h2 id="example-4.2">Example 4.2:</h2>
<h3 id="filtering-the-joined-dataset">Filtering the joined dataset</h3>
<p>There are six columns in the <code>descriptions</code> dataset (and therefore in the new joined dataset) that describe the topic of a resolution:</p>
<ul>
<li><strong>me</strong>: Palestinian conflict</li>
<li><strong>nu</strong>: Nuclear weapons and nuclear material</li>
<li><strong>di</strong>: Arms control and disarmament</li>
<li><strong>hr</strong>: Human rights</li>
<li><strong>co</strong>: Colonialism</li>
<li><strong>ec</strong>: Economic development</li>
</ul>
<p>Each contains a <code>1</code> if the resolution is related to this topic and a <code>0</code> otherwise.</p>
<h3 id="instructions-29">Instructions</h3>
<ul>
<li>Filter the <code>votes_joined</code> dataset for votes relating to colonialism.</li>
</ul>
<div class="sourceCode" id="cb85"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb85-1" title="1"><span class="co"># Filter for votes related to colonialism</span></a>
<a class="sourceLine" id="cb85-2" title="2">votes_joined <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb85-3" title="3"><span class="st">  </span><span class="kw">filter</span>(co <span class="op">==</span><span class="st"> </span><span class="dv">1</span>)</a></code></pre></div>
<pre><code>## # A tibble: 60,962 x 14
##     rcid session  vote ccode  year country date                unres    me
##    &lt;dbl&gt;   &lt;dbl&gt; &lt;dbl&gt; &lt;int&gt; &lt;dbl&gt; &lt;chr&gt;   &lt;dttm&gt;              &lt;chr&gt; &lt;dbl&gt;
##  1    51       2     3     2  1947 United~ 1947-10-02 00:00:00 R/2/~     0
##  2    51       2     3    20  1947 Canada  1947-10-02 00:00:00 R/2/~     0
##  3    51       2     2    40  1947 Cuba    1947-10-02 00:00:00 R/2/~     0
##  4    51       2     1    41  1947 Haiti   1947-10-02 00:00:00 R/2/~     0
##  5    51       2     3    42  1947 Domini~ 1947-10-02 00:00:00 R/2/~     0
##  6    51       2     2    70  1947 Mexico  1947-10-02 00:00:00 R/2/~     0
##  7    51       2     2    90  1947 Guatem~ 1947-10-02 00:00:00 R/2/~     0
##  8    51       2     2    92  1947 El Sal~ 1947-10-02 00:00:00 R/2/~     0
##  9    51       2     3    93  1947 Nicara~ 1947-10-02 00:00:00 R/2/~     0
## 10    51       2     2    95  1947 Panama  1947-10-02 00:00:00 R/2/~     0
## # ... with 60,952 more rows, and 5 more variables: nu &lt;dbl&gt;, di &lt;dbl&gt;,
## #   hr &lt;dbl&gt;, co &lt;dbl&gt;, ec &lt;dbl&gt;</code></pre>
</div>
<div class="slide section level1">

<h2 id="example-4.3">Example 4.3:</h2>
<h3 id="visualizing-colonialism-votes">Visualizing colonialism votes</h3>
<p>In an earlier exercise, you graphed the percentage of votes each year where the US voted “yes”. Now you’ll create that same graph, but only for votes related to colonialism.</p>
<h3 id="instructions-30">Instructions</h3>
<ul>
<li>Load the <code>ggplot2</code> package.</li>
<li>Filter the <code>votes_joined</code> dataset for only votes by the United States relating to colonialism, then <code>summarize()</code> the percentage of votes that are “yes” within each <code>year</code>. Name the resulting column <code>percent_yes</code> and save the entire data frame as <code>US_co_by_year</code>.</li>
<li>Add a <code>geom_line()</code> layer to your <code>ggplot()</code> call to create a line graph of the percentage of “yes” votes on colonialism (<code>percent_yes</code>) cast by the US over time.</li>
</ul>
<div class="sourceCode" id="cb87"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb87-1" title="1"><span class="co"># Load the ggplot2 package</span></a>
<a class="sourceLine" id="cb87-2" title="2"><span class="kw">library</span>(ggplot2)</a>
<a class="sourceLine" id="cb87-3" title="3"></a>
<a class="sourceLine" id="cb87-4" title="4"><span class="co"># Filter, then summarize by year: US_co_by_year</span></a>
<a class="sourceLine" id="cb87-5" title="5">US_co_by_year &lt;-<span class="st"> </span>votes_joined <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb87-6" title="6"><span class="st">  </span><span class="kw">filter</span>(</a>
<a class="sourceLine" id="cb87-7" title="7">    co <span class="op">==</span><span class="st"> </span><span class="dv">1</span>,</a>
<a class="sourceLine" id="cb87-8" title="8">    country <span class="op">==</span><span class="st"> &quot;United States&quot;</span></a>
<a class="sourceLine" id="cb87-9" title="9">  ) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb87-10" title="10"><span class="st">  </span><span class="kw">group_by</span>(year) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb87-11" title="11"><span class="st">  </span><span class="kw">summarize</span>(<span class="dt">percent_yes =</span> <span class="kw">mean</span>(vote <span class="op">==</span><span class="st"> </span><span class="dv">1</span>))</a>
<a class="sourceLine" id="cb87-12" title="12"></a>
<a class="sourceLine" id="cb87-13" title="13"><span class="co"># Graph the % of &quot;yes&quot; votes over time</span></a>
<a class="sourceLine" id="cb87-14" title="14"><span class="kw">ggplot</span>(US_co_by_year, <span class="kw">aes</span>(<span class="dt">x =</span> year, <span class="dt">y =</span> percent_yes)) <span class="op">+</span></a>
<a class="sourceLine" id="cb87-15" title="15"><span class="st">  </span><span class="kw">geom_line</span>()</a></code></pre></div>
<p><img src="data:image/png;base64,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" /><!-- --></p>
</div>
<div class="slide section level1">

<h2 id="example-4.4">Example 4.4:</h2>
<h3 id="using-gather-to-tidy-a-dataset">Using gather to tidy a dataset</h3>
<p>In order to represent the joined vote-topic data in a tidy form so we can analyze and graph by topic, we need to transform the data so that each row has one combination of country-vote-topic. This will change the data from having six columns (<code>me</code>, <code>nu</code>, <code>di</code>, <code>hr</code>, <code>co</code>, <code>ec</code>) to having two columns (<code>topic</code> and <code>has_topic</code>).</p>
<h3 id="instructions-31">Instructions</h3>
<ul>
<li>oad the <code>tidyr</code> package.</li>
<li>Gather the six topic columns in <code>votes_joined</code> into one column called <code>topic</code> (containing one of <code>me</code>, <code>nu</code>, etc.) and a column called <code>has_topic</code> (containing 0 or 1). Print the result without saving it.</li>
<li>You don’t actually care about the cases where <code>has_topic</code> is 0. Perform the <code>gather()</code> operation again, but this time also filter for only the rows where the topic in <code>topic</code> describes the vote. Save the result as <code>votes_gathered</code>.</li>
</ul>
<div class="sourceCode" id="cb88"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb88-1" title="1"><span class="co"># Load the tidyr package</span></a>
<a class="sourceLine" id="cb88-2" title="2"><span class="kw">library</span>(tidyr)</a>
<a class="sourceLine" id="cb88-3" title="3"></a>
<a class="sourceLine" id="cb88-4" title="4"><span class="co"># Gather the six me/nu/di/hr/co/ec columns</span></a>
<a class="sourceLine" id="cb88-5" title="5">votes_joined <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb88-6" title="6"><span class="st">  </span><span class="kw">gather</span>(topic, has_topic, <span class="kw">one_of</span>(<span class="st">&quot;me&quot;</span>,<span class="st">&quot;nu&quot;</span>,<span class="st">&quot;di&quot;</span>,<span class="st">&quot;hr&quot;</span>,<span class="st">&quot;co&quot;</span>,<span class="st">&quot;ec&quot;</span>))</a></code></pre></div>
<pre><code>## # A tibble: 2,121,282 x 10
##     rcid session  vote ccode  year country date                unres topic
##    &lt;dbl&gt;   &lt;dbl&gt; &lt;dbl&gt; &lt;int&gt; &lt;dbl&gt; &lt;chr&gt;   &lt;dttm&gt;              &lt;chr&gt; &lt;chr&gt;
##  1    46       2     1     2  1947 United~ 1947-09-04 00:00:00 R/2/~ me   
##  2    46       2     1    20  1947 Canada  1947-09-04 00:00:00 R/2/~ me   
##  3    46       2     1    40  1947 Cuba    1947-09-04 00:00:00 R/2/~ me   
##  4    46       2     1    41  1947 Haiti   1947-09-04 00:00:00 R/2/~ me   
##  5    46       2     1    42  1947 Domini~ 1947-09-04 00:00:00 R/2/~ me   
##  6    46       2     1    70  1947 Mexico  1947-09-04 00:00:00 R/2/~ me   
##  7    46       2     1    90  1947 Guatem~ 1947-09-04 00:00:00 R/2/~ me   
##  8    46       2     1    91  1947 Hondur~ 1947-09-04 00:00:00 R/2/~ me   
##  9    46       2     1    92  1947 El Sal~ 1947-09-04 00:00:00 R/2/~ me   
## 10    46       2     1    93  1947 Nicara~ 1947-09-04 00:00:00 R/2/~ me   
## # ... with 2,121,272 more rows, and 1 more variable: has_topic &lt;dbl&gt;</code></pre>
<div class="sourceCode" id="cb90"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb90-1" title="1"><span class="co"># Perform gather again, then filter</span></a>
<a class="sourceLine" id="cb90-2" title="2">votes_gathered &lt;-<span class="st"> </span>votes_joined <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb90-3" title="3"><span class="st">  </span><span class="kw">gather</span>(topic, has_topic, <span class="kw">one_of</span>(<span class="st">&quot;me&quot;</span>,<span class="st">&quot;nu&quot;</span>,<span class="st">&quot;di&quot;</span>,<span class="st">&quot;hr&quot;</span>,<span class="st">&quot;co&quot;</span>,<span class="st">&quot;ec&quot;</span>)) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb90-4" title="4"><span class="st">  </span><span class="kw">filter</span>(has_topic <span class="op">==</span><span class="st"> </span><span class="dv">1</span>)</a>
<a class="sourceLine" id="cb90-5" title="5">votes_gathered</a></code></pre></div>
<pre><code>## # A tibble: 350,032 x 10
##     rcid session  vote ccode  year country date                unres topic
##    &lt;dbl&gt;   &lt;dbl&gt; &lt;dbl&gt; &lt;int&gt; &lt;dbl&gt; &lt;chr&gt;   &lt;dttm&gt;              &lt;chr&gt; &lt;chr&gt;
##  1    77       2     1     2  1947 United~ 1947-11-06 00:00:00 R/2/~ me   
##  2    77       2     1    20  1947 Canada  1947-11-06 00:00:00 R/2/~ me   
##  3    77       2     3    40  1947 Cuba    1947-11-06 00:00:00 R/2/~ me   
##  4    77       2     1    41  1947 Haiti   1947-11-06 00:00:00 R/2/~ me   
##  5    77       2     1    42  1947 Domini~ 1947-11-06 00:00:00 R/2/~ me   
##  6    77       2     2    70  1947 Mexico  1947-11-06 00:00:00 R/2/~ me   
##  7    77       2     1    90  1947 Guatem~ 1947-11-06 00:00:00 R/2/~ me   
##  8    77       2     2    91  1947 Hondur~ 1947-11-06 00:00:00 R/2/~ me   
##  9    77       2     2    92  1947 El Sal~ 1947-11-06 00:00:00 R/2/~ me   
## 10    77       2     1    93  1947 Nicara~ 1947-11-06 00:00:00 R/2/~ me   
## # ... with 350,022 more rows, and 1 more variable: has_topic &lt;dbl&gt;</code></pre>
</div>
<div class="slide section level1">

<h2 id="example-4.5">Example 4.5:</h2>
<h3 id="recoding-the-topics">Recoding the topics</h3>
<p>There’s one more step of data cleaning to make this more interpretable. Right now, topics are represented by two-letter codes:</p>
<ul>
<li><strong>me</strong>: Palestinian conflict</li>
<li><strong>nu</strong>: Nuclear weapons and nuclear material</li>
<li><strong>di</strong>: Arms control and disarmament</li>
<li><strong>hr</strong>: Human rights</li>
<li><strong>co</strong>: Colonialism</li>
<li><strong>ec</strong>: Economic development</li>
</ul>
<p>So that you can interpret the data more easily, recode the data to replace these codes with their full name. You can do that with <code>dplyr</code>’s <code>recode()</code> function, which replaces values with ones you specify:</p>
<p><code>example &lt;- c(&quot;apple&quot;, &quot;banana&quot;, &quot;apple&quot;, &quot;orange&quot;)</code> <code>recode(example, apple = &quot;plum&quot;, banana = &quot;grape&quot;)</code></p>
<h3 id="instructions-32">Instructions</h3>
<ul>
<li>Use the <code>recode()</code> function from <code>dplyr</code> in a <code>mutate()</code> to replace each two-letter code in the <code>votes_gathered</code> data frame with the corresponding full name. Save this as <code>votes_tidied</code>.</li>
</ul>
<div class="sourceCode" id="cb92"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb92-1" title="1"><span class="co"># Replace the two-letter codes in topic: votes_tidied</span></a>
<a class="sourceLine" id="cb92-2" title="2">votes_tidied &lt;-<span class="st"> </span>votes_gathered <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb92-3" title="3"><span class="st">  </span><span class="kw">mutate</span>(<span class="dt">topic =</span> <span class="kw">recode</span>(topic,</a>
<a class="sourceLine" id="cb92-4" title="4">                        <span class="dt">me =</span> <span class="st">&quot;Palestinian conflict&quot;</span>,</a>
<a class="sourceLine" id="cb92-5" title="5">                        <span class="dt">nu =</span> <span class="st">&quot;Nuclear weapons and nuclear material&quot;</span>,</a>
<a class="sourceLine" id="cb92-6" title="6">                        <span class="dt">di =</span> <span class="st">&quot;Arms control and disarmament&quot;</span>,</a>
<a class="sourceLine" id="cb92-7" title="7">                        <span class="dt">hr =</span> <span class="st">&quot;Human rights&quot;</span>,</a>
<a class="sourceLine" id="cb92-8" title="8">                        <span class="dt">co =</span> <span class="st">&quot;Colonialism&quot;</span>,</a>
<a class="sourceLine" id="cb92-9" title="9">                        <span class="dt">ec =</span> <span class="st">&quot;Economic development&quot;</span>))</a></code></pre></div>
</div>
<div class="slide section level1">

<h2 id="example-4.6">Example 4.6:</h2>
<h3 id="summarize-by-country-year-and-topic">Summarize by country, year, and topic</h3>
<p>In previous exercises, you summarized the votes dataset by country, by year, and by country-year combination.</p>
<p>Now that you have <code>topic</code> as an additional variable, you can summarize the votes for each combination of country, year, and topic (e.g. for the United States in 2013 on the topic of nuclear weapons.)</p>
<h3 id="instructions-33">Instructions</h3>
<ul>
<li>Print the <code>votes_tidied</code> dataset to the console.</li>
<li>In a single <code>summarize()</code> call, compute both the total number of votes (<code>total</code>) and the percentage of “yes” votes (<code>percent_yes</code>) for each combination of country, year, and topic. Save this as <code>by_country_year_topic</code>. Make sure that you <code>ungroup()</code> after summarizing.</li>
<li>Print the <code>by_country_year_topic</code> dataset to the console.</li>
</ul>
<div class="sourceCode" id="cb93"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb93-1" title="1"><span class="co"># Print votes_tidied</span></a>
<a class="sourceLine" id="cb93-2" title="2">votes_tidied</a></code></pre></div>
<pre><code>## # A tibble: 350,032 x 10
##     rcid session  vote ccode  year country date                unres topic
##    &lt;dbl&gt;   &lt;dbl&gt; &lt;dbl&gt; &lt;int&gt; &lt;dbl&gt; &lt;chr&gt;   &lt;dttm&gt;              &lt;chr&gt; &lt;chr&gt;
##  1    77       2     1     2  1947 United~ 1947-11-06 00:00:00 R/2/~ Pale~
##  2    77       2     1    20  1947 Canada  1947-11-06 00:00:00 R/2/~ Pale~
##  3    77       2     3    40  1947 Cuba    1947-11-06 00:00:00 R/2/~ Pale~
##  4    77       2     1    41  1947 Haiti   1947-11-06 00:00:00 R/2/~ Pale~
##  5    77       2     1    42  1947 Domini~ 1947-11-06 00:00:00 R/2/~ Pale~
##  6    77       2     2    70  1947 Mexico  1947-11-06 00:00:00 R/2/~ Pale~
##  7    77       2     1    90  1947 Guatem~ 1947-11-06 00:00:00 R/2/~ Pale~
##  8    77       2     2    91  1947 Hondur~ 1947-11-06 00:00:00 R/2/~ Pale~
##  9    77       2     2    92  1947 El Sal~ 1947-11-06 00:00:00 R/2/~ Pale~
## 10    77       2     1    93  1947 Nicara~ 1947-11-06 00:00:00 R/2/~ Pale~
## # ... with 350,022 more rows, and 1 more variable: has_topic &lt;dbl&gt;</code></pre>
<div class="sourceCode" id="cb95"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb95-1" title="1"><span class="co"># Summarize the percentage &quot;yes&quot; per country-year-topic</span></a>
<a class="sourceLine" id="cb95-2" title="2">by_country_year_topic &lt;-<span class="st"> </span>votes_tidied <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb95-3" title="3"><span class="st">  </span><span class="kw">group_by</span>(country, year, topic) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb95-4" title="4"><span class="st">  </span><span class="kw">summarize</span>(</a>
<a class="sourceLine" id="cb95-5" title="5">    <span class="dt">total =</span> <span class="kw">n</span>(),</a>
<a class="sourceLine" id="cb95-6" title="6">    <span class="dt">percent_yes =</span> <span class="kw">mean</span>(vote <span class="op">==</span><span class="st"> </span><span class="dv">1</span>)</a>
<a class="sourceLine" id="cb95-7" title="7">  ) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb95-8" title="8"><span class="st">  </span><span class="kw">ungroup</span>()</a>
<a class="sourceLine" id="cb95-9" title="9"></a>
<a class="sourceLine" id="cb95-10" title="10"><span class="co"># Print by_country_year_topic</span></a>
<a class="sourceLine" id="cb95-11" title="11">by_country_year_topic</a></code></pre></div>
<pre><code>## # A tibble: 26,968 x 5
##    country      year topic                                total percent_yes
##    &lt;chr&gt;       &lt;dbl&gt; &lt;chr&gt;                                &lt;int&gt;       &lt;dbl&gt;
##  1 Afghanistan  1947 Colonialism                              8       0.5  
##  2 Afghanistan  1947 Economic development                     1       0    
##  3 Afghanistan  1947 Human rights                             1       0    
##  4 Afghanistan  1947 Palestinian conflict                     6       0    
##  5 Afghanistan  1949 Arms control and disarmament             3       0    
##  6 Afghanistan  1949 Colonialism                             22       0.864
##  7 Afghanistan  1949 Economic development                     1       1    
##  8 Afghanistan  1949 Human rights                             3       0    
##  9 Afghanistan  1949 Nuclear weapons and nuclear material     3       0    
## 10 Afghanistan  1949 Palestinian conflict                    11       0.818
## # ... with 26,958 more rows</code></pre>
</div>
<div class="slide section level1">

<h2 id="example-4.7">Example 4.7:</h2>
<h3 id="visualizing-trends-in-topics-for-one-country">Visualizing trends in topics for one country</h3>
<p>You can now visualize the trends in percentage “yes” over time for all six topics side-by-side. Here, you’ll visualize them just for the United States.</p>
<h3 id="instructions-34">Instructions</h3>
<ul>
<li>Load the <code>ggplot2</code> package.</li>
<li>Filter the <code>by_country_year_topic</code> dataset for just the United States and save the result as <code>US_by_country_year_topic</code>.</li>
<li>Use this dataset to graph the percentage “yes” over time for the United States, faceting by topic.</li>
</ul>
<div class="sourceCode" id="cb97"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb97-1" title="1"><span class="co"># Load the ggplot2 package</span></a>
<a class="sourceLine" id="cb97-2" title="2"><span class="kw">library</span>(ggplot2)</a>
<a class="sourceLine" id="cb97-3" title="3"></a>
<a class="sourceLine" id="cb97-4" title="4"><span class="co"># Filter by_country_year_topic for just the US</span></a>
<a class="sourceLine" id="cb97-5" title="5">US_by_country_year_topic &lt;-<span class="st"> </span>by_country_year_topic <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb97-6" title="6"><span class="st">  </span><span class="kw">filter</span>(country <span class="op">==</span><span class="st"> &quot;United States&quot;</span>)</a>
<a class="sourceLine" id="cb97-7" title="7"></a>
<a class="sourceLine" id="cb97-8" title="8"><span class="co"># Plot % yes over time for the US, faceting by topic</span></a>
<a class="sourceLine" id="cb97-9" title="9"><span class="kw">ggplot</span>(US_by_country_year_topic, <span class="kw">aes</span>(<span class="dt">x =</span> year, <span class="dt">y =</span> percent_yes)) <span class="op">+</span><span class="st"> </span></a>
<a class="sourceLine" id="cb97-10" title="10"><span class="st">  </span><span class="kw">geom_line</span>() <span class="op">+</span></a>
<a class="sourceLine" id="cb97-11" title="11"><span class="st">  </span><span class="kw">facet_wrap</span>(<span class="op">~</span><span class="st"> </span>topic)</a></code></pre></div>
<p><img src="data:image/png;base64,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" /><!-- --></p>
</div>
<div class="slide section level1">

<h2 id="example-4.8">Example 4.8:</h2>
<h3 id="nesting-by-topic-and-country">Nesting by topic and country</h3>
<p>In the last chapter, you constructed a linear model for each country by nesting the data in each country, fitting a model to each dataset, then tidying each model with <code>broom</code> and unnesting the coefficients. The code looked something like this:</p>
<p><code>country_coefficients &lt;- by_year_country %&gt;%</code> <code>nest(-country) %&gt;%</code> <code>mutate(model = map(data, ~ lm(percent_yes ~ year, data = .)),</code> <code>tidied = map(model, tidy)) %&gt;%</code> <code>unnest(tidied)</code></p>
<p>Now, you’ll again be modeling change in “percentage” yes over time, but instead of fitting one model for each country, you’ll fit one for each combination of country and topic.</p>
<h3 id="instructions-35">Instructions</h3>
<ul>
<li>Load the <code>purrr</code>, <code>tidyr</code>, and <code>broom</code> packages.</li>
<li>Print the <code>by_country_year_topic</code> dataset to the console.</li>
<li>Fit a linear model within each country and topic in this dataset, saving the result as <code>country_topic_coefficients</code>. You can use the provided code as a starting point.</li>
<li>Print the <code>country_topic_coefficients</code> dataset to the console.</li>
</ul>
<div class="sourceCode" id="cb98"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb98-1" title="1"><span class="co"># Load purrr, tidyr, and broom</span></a>
<a class="sourceLine" id="cb98-2" title="2"><span class="kw">library</span>(purrr)</a>
<a class="sourceLine" id="cb98-3" title="3"><span class="kw">library</span>(tidyr)</a>
<a class="sourceLine" id="cb98-4" title="4"><span class="kw">library</span>(broom)</a>
<a class="sourceLine" id="cb98-5" title="5"></a>
<a class="sourceLine" id="cb98-6" title="6"><span class="co"># Print by_country_year_topic</span></a>
<a class="sourceLine" id="cb98-7" title="7">by_country_year_topic</a></code></pre></div>
<pre><code>## # A tibble: 26,968 x 5
##    country      year topic                                total percent_yes
##    &lt;chr&gt;       &lt;dbl&gt; &lt;chr&gt;                                &lt;int&gt;       &lt;dbl&gt;
##  1 Afghanistan  1947 Colonialism                              8       0.5  
##  2 Afghanistan  1947 Economic development                     1       0    
##  3 Afghanistan  1947 Human rights                             1       0    
##  4 Afghanistan  1947 Palestinian conflict                     6       0    
##  5 Afghanistan  1949 Arms control and disarmament             3       0    
##  6 Afghanistan  1949 Colonialism                             22       0.864
##  7 Afghanistan  1949 Economic development                     1       1    
##  8 Afghanistan  1949 Human rights                             3       0    
##  9 Afghanistan  1949 Nuclear weapons and nuclear material     3       0    
## 10 Afghanistan  1949 Palestinian conflict                    11       0.818
## # ... with 26,958 more rows</code></pre>
<div class="sourceCode" id="cb100"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb100-1" title="1"><span class="co"># Fit model on the by_country_year_topic dataset</span></a>
<a class="sourceLine" id="cb100-2" title="2">country_topic_coefficients &lt;-<span class="st"> </span>by_country_year_topic <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb100-3" title="3"><span class="st">  </span><span class="kw">nest</span>(<span class="op">-</span>country, <span class="op">-</span>topic) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb100-4" title="4"><span class="st">  </span><span class="kw">mutate</span>(</a>
<a class="sourceLine" id="cb100-5" title="5">    <span class="dt">model =</span> <span class="kw">map</span>(data, <span class="op">~</span><span class="st"> </span><span class="kw">lm</span>(percent_yes <span class="op">~</span><span class="st"> </span>year, <span class="dt">data =</span> .)),</a>
<a class="sourceLine" id="cb100-6" title="6">    <span class="dt">tidied =</span> <span class="kw">map</span>(model, tidy)</a>
<a class="sourceLine" id="cb100-7" title="7">  ) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb100-8" title="8"><span class="st">  </span><span class="kw">unnest</span>(tidied)</a>
<a class="sourceLine" id="cb100-9" title="9"></a>
<a class="sourceLine" id="cb100-10" title="10"></a>
<a class="sourceLine" id="cb100-11" title="11"><span class="co"># Print country_topic_coefficients</span></a>
<a class="sourceLine" id="cb100-12" title="12">country_topic_coefficients</a></code></pre></div>
<pre><code>## # A tibble: 2,384 x 9
##    country  topic   data   model term  estimate std.error statistic p.value
##    &lt;chr&gt;    &lt;chr&gt;   &lt;list&gt; &lt;lis&gt; &lt;chr&gt;    &lt;dbl&gt;     &lt;dbl&gt;     &lt;dbl&gt;   &lt;dbl&gt;
##  1 Afghani~ Coloni~ &lt;tibb~ &lt;lm&gt;  (Int~ -9.20e+0  1.96         -4.70 4.76e-5
##  2 Afghani~ Coloni~ &lt;tibb~ &lt;lm&gt;  year   5.11e-3  0.000989      5.17 1.23e-5
##  3 Afghani~ Econom~ &lt;tibb~ &lt;lm&gt;  (Int~ -1.15e+1  3.62         -3.17 3.49e-3
##  4 Afghani~ Econom~ &lt;tibb~ &lt;lm&gt;  year   6.24e-3  0.00183       3.42 1.85e-3
##  5 Afghani~ Human ~ &lt;tibb~ &lt;lm&gt;  (Int~ -7.27e+0  4.37         -1.66 1.06e-1
##  6 Afghani~ Human ~ &lt;tibb~ &lt;lm&gt;  year   4.08e-3  0.00221       1.85 7.43e-2
##  7 Afghani~ Palest~ &lt;tibb~ &lt;lm&gt;  (Int~ -1.33e+1  3.57         -3.73 8.66e-4
##  8 Afghani~ Palest~ &lt;tibb~ &lt;lm&gt;  year   7.17e-3  0.00180       3.98 4.42e-4
##  9 Afghani~ Arms c~ &lt;tibb~ &lt;lm&gt;  (Int~ -1.38e+1  4.13         -3.33 2.53e-3
## 10 Afghani~ Arms c~ &lt;tibb~ &lt;lm&gt;  year   7.37e-3  0.00208       3.54 1.49e-3
## # ... with 2,374 more rows</code></pre>
</div>
<div class="slide section level1">

<h2 id="example-4.9">Example 4.9:</h2>
<h3 id="interpreting-tidy-models">Interpreting tidy models</h3>
<p>Now you have both the slope and intercept terms for each model. Just as you did in the last chapter with the tidied coefficients, you’ll need to filter for only the slope terms.</p>
<p>You’ll also have to extract only cases that are statistically significant, which means adjusting the p-value for the number of models, and then filtering to include only significant changes.</p>
<h3 id="instructions-36">Instructions</h3>
<ul>
<li>Filter the <code>country_topic_coefficients</code> data to include only the slope term.</li>
<li>Add a <code>p.adjusted</code> column containing adjusted p-values (using the <code>p.adjust()</code> function).</li>
<li>Filter for only adjusted p-values less than .05.</li>
<li>Save the result as <code>country_topic_filtered</code>.</li>
</ul>
<div class="sourceCode" id="cb102"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb102-1" title="1"><span class="co">#Create country_topic_filtered</span></a>
<a class="sourceLine" id="cb102-2" title="2"></a>
<a class="sourceLine" id="cb102-3" title="3">country_topic_filtered &lt;-<span class="st"> </span>country_topic_coefficients <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb102-4" title="4"><span class="st">  </span><span class="kw">filter</span>(term <span class="op">==</span><span class="st"> &#39;year&#39;</span>) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb102-5" title="5"><span class="st">  </span><span class="kw">mutate</span>(<span class="dt">p.adjusted =</span> <span class="kw">p.adjust</span>(p.value)) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb102-6" title="6"><span class="st">  </span><span class="kw">filter</span>(p.adjusted <span class="op">&lt;</span><span class="st"> </span><span class="fl">0.05</span>)</a>
<a class="sourceLine" id="cb102-7" title="7"></a>
<a class="sourceLine" id="cb102-8" title="8">country_topic_filtered</a></code></pre></div>
<pre><code>## # A tibble: 56 x 10
##    country topic data  model term  estimate std.error statistic p.value
##    &lt;chr&gt;   &lt;chr&gt; &lt;lis&gt; &lt;lis&gt; &lt;chr&gt;    &lt;dbl&gt;     &lt;dbl&gt;     &lt;dbl&gt;   &lt;dbl&gt;
##  1 Afghan~ Colo~ &lt;tib~ &lt;lm&gt;  year   0.00511  0.000989      5.17 1.23e-5
##  2 Austria Colo~ &lt;tib~ &lt;lm&gt;  year   0.00835  0.00152       5.49 8.10e-6
##  3 Barbad~ Colo~ &lt;tib~ &lt;lm&gt;  year   0.00669  0.00120       5.60 1.25e-5
##  4 Barbad~ Pale~ &lt;tib~ &lt;lm&gt;  year   0.0166   0.00295       5.61 1.21e-5
##  5 Belgium Colo~ &lt;tib~ &lt;lm&gt;  year   0.00731  0.00155       4.73 4.36e-5
##  6 Bolivia Colo~ &lt;tib~ &lt;lm&gt;  year   0.00852  0.00118       7.23 3.26e-8
##  7 Brazil  Colo~ &lt;tib~ &lt;lm&gt;  year   0.00827  0.00140       5.90 1.43e-6
##  8 Chile   Colo~ &lt;tib~ &lt;lm&gt;  year   0.00932  0.00123       7.59 1.21e-8
##  9 Colomb~ Colo~ &lt;tib~ &lt;lm&gt;  year   0.00715  0.00124       5.76 2.18e-6
## 10 Costa ~ Colo~ &lt;tib~ &lt;lm&gt;  year   0.00738  0.00141       5.25 9.72e-6
## # ... with 46 more rows, and 1 more variable: p.adjusted &lt;dbl&gt;</code></pre>
</div>
<div class="slide section level1">

<h2 id="example-4.10">Example 4.10:</h2>
<h3 id="checking-models-visually">Checking models visually</h3>
<p>In the last exercise, you found that over its history, Vanuatu (an island nation in the Pacific Ocean) sharply changed its pattern of voting on the topic of Palestinian conflict.</p>
<p>Let’s examine this country’s voting patterns more closely. Recall that the <code>by_country_year_topic</code> dataset contained one row for each combination of country, year, and topic. You can use that to create a plot of Vanuatu’s voting, faceted by topic.</p>
<h3 id="instructions-37">Instructions</h3>
<ul>
<li>Filter the <code>by_country_year_topic</code> variable for only Vanuatu’s votes to create a <code>vanuatu_by_country_year_topic</code> object.</li>
<li>Create a plot with <code>year</code> on the x-axis and <code>percent_yes</code> on the y-axis, and facet by topic.</li>
</ul>
<div class="sourceCode" id="cb104"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb104-1" title="1"><span class="co"># Create vanuatu_by_country_year_topic</span></a>
<a class="sourceLine" id="cb104-2" title="2">vanuatu_by_country_year_topic &lt;-<span class="st"> </span>by_country_year_topic <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb104-3" title="3"><span class="st">  </span><span class="kw">filter</span>(country <span class="op">==</span><span class="st"> &quot;Vanuatu&quot;</span>)</a>
<a class="sourceLine" id="cb104-4" title="4"></a>
<a class="sourceLine" id="cb104-5" title="5"><span class="co"># Plot of percentage &quot;yes&quot; over time, faceted by topic</span></a>
<a class="sourceLine" id="cb104-6" title="6"><span class="kw">ggplot</span>(vanuatu_by_country_year_topic, <span class="kw">aes</span>(<span class="dt">x =</span> year, <span class="dt">y =</span> percent_yes)) <span class="op">+</span></a>
<a class="sourceLine" id="cb104-7" title="7"><span class="st">  </span><span class="kw">geom_line</span>() <span class="op">+</span><span class="st"> </span></a>
<a class="sourceLine" id="cb104-8" title="8"><span class="st">  </span><span class="kw">facet_wrap</span>(<span class="op">~</span><span class="st"> </span>topic)</a></code></pre></div>
<p><img src="data:image/png;base64,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" /><!-- --></p>
</div>

  <!-- dynamically load mathjax for compatibility with self-contained -->
  <script>
    (function () {
      var script = document.createElement("script");
      script.type = "text/javascript";
      script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
      document.getElementsByTagName("head")[0].appendChild(script);
    })();
  </script>

</body>
</html>
